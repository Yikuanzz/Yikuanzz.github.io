<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>

<meta name='description' content='Android ä»‹ç» Android ç³»ç»Ÿæ¶æ„ Linuxå†…æ ¸å±‚ï¼Œä¸º Android è®¾å¤‡å„ç§ç¡¬ä»¶åœä¾›åº•å±‚é©±åŠ¨ã€‚ ç³»ç»Ÿè¿è¡Œåº“å±‚ï¼Œé€šè¿‡ä¸€äº› C/C&#43;&#43; åº“ä¸º Android ç³»ç»Ÿæä¾›ä¸»è¦çš„ç‰¹æ€§æ”¯æŒã€‚ åº”ç”¨æ¡†æ¶å±‚ï¼Œæ„å»ºç¨‹åºçš„'><title>Androidå¼€å‘ç¬”è®°</title>

<link rel='canonical' href='https://yikuanzz.github.io/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/'>

<link rel="stylesheet" href="/scss/style.min.46208cabd58e8bcef0cfb7d7ea6b561adcca3b91dd1fc6657493a44f03c5db75.css"><meta property='og:title' content='Androidå¼€å‘ç¬”è®°'>
<meta property='og:description' content='Android ä»‹ç» Android ç³»ç»Ÿæ¶æ„ Linuxå†…æ ¸å±‚ï¼Œä¸º Android è®¾å¤‡å„ç§ç¡¬ä»¶åœä¾›åº•å±‚é©±åŠ¨ã€‚ ç³»ç»Ÿè¿è¡Œåº“å±‚ï¼Œé€šè¿‡ä¸€äº› C/C&#43;&#43; åº“ä¸º Android ç³»ç»Ÿæä¾›ä¸»è¦çš„ç‰¹æ€§æ”¯æŒã€‚ åº”ç”¨æ¡†æ¶å±‚ï¼Œæ„å»ºç¨‹åºçš„'>
<meta property='og:url' content='https://yikuanzz.github.io/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/'>
<meta property='og:site_name' content='Yikuanzz'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='Note' /><meta property='article:published_time' content='2024-04-11T19:05:18&#43;08:00'/><meta property='article:modified_time' content='2024-04-11T19:05:18&#43;08:00'/><meta property='og:image' content='https://yikuanzz.github.io/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/cover.png' />
<meta name="twitter:title" content="Androidå¼€å‘ç¬”è®°">
<meta name="twitter:description" content="Android ä»‹ç» Android ç³»ç»Ÿæ¶æ„ Linuxå†…æ ¸å±‚ï¼Œä¸º Android è®¾å¤‡å„ç§ç¡¬ä»¶åœä¾›åº•å±‚é©±åŠ¨ã€‚ ç³»ç»Ÿè¿è¡Œåº“å±‚ï¼Œé€šè¿‡ä¸€äº› C/C&#43;&#43; åº“ä¸º Android ç³»ç»Ÿæä¾›ä¸»è¦çš„ç‰¹æ€§æ”¯æŒã€‚ åº”ç”¨æ¡†æ¶å±‚ï¼Œæ„å»ºç¨‹åºçš„"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://yikuanzz.github.io/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/cover.png' />
    <link rel="shortcut icon" href="https://s2.loli.net/2024/03/22/Z5UYhgiHmGofML8.jpg" />
<style>
    :root {
        --article-font-family: "Noto Serif SC", var(--base-font-family);
    }
</style>

<script> 
		(function () {
		    const customFont = document.createElement('link');
		    customFont.href = "https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;700&display=swap"; 
		    customFont.type = "text/css";
		    customFont.rel = "stylesheet";
		
		    document.head.appendChild(customFont);
		}());
</script>

    </head>
    <body class="
    article-page
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    <!-- 
        extended
     -->
    on-phone--column extended
">
    
<div id="article-toolbar">
    <a href="https://yikuanzz.github.io/" class="back-home">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



        <span>Back</span>
    </a>
</div>
    <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/aa2_hue12ee8e79b9cb68bf5d1297bba3d9824_12551_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">ğŸ§</span>
                
            </figure>
            
        
        
        <h1 class="site-name"><a href="/">Yikuanzz</a></h1>
        <h2 class="site-description">Anytimes you like.</h2><ol class="social-menu">
                
                    <li>
                        <a 
                            href='https://space.bilibili.com/15264235'
                            target="_blank"
                            title="Bilibili"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-bilibili" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#87CEFA" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" />
  <path d="M8 3l2 3" />
  <path d="M16 3l-2 3" />
  <path d="M9 13v-2" />
  <path d="M15 11v2" />
</svg>
                            
                        </a>
                    </li>
                
                    <li>
                        <a 
                            href='https://github.com/Yikuanzz'
                            target="_blank"
                            title="GitHub"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ff9300" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                            
                        </a>
                    </li>
                
                    <li>
                        <a 
                            href='https://leetcode.cn/u/yikuanzz/'
                            target="_blank"
                            title="Leetcode"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-leetcode" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ff2825" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M12 13h7.5" />
  <path d="M9.424 7.268l4.999 -4.999" />
  <path d="M16.633 16.644l-2.402 2.415a3.189 3.189 0 0 1 -4.524 0l-3.77 -3.787a3.223 3.223 0 0 1 0 -4.544l3.77 -3.787a3.189 3.189 0 0 1 4.524 0l2.302 2.313" />
</svg>
                            
                        </a>
                    </li>
                
                    <li>
                        <a 
                            href='https://www.zhihu.com/people/dolikes'
                            target="_blank"
                            title="Zhihu"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-zhihu" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#009988" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M14 6h6v12h-2l-2 2l-1 -2h-1z" />
  <path d="M4 12h6.5" />
  <path d="M10.5 6h-5" />
  <path d="M6 4c-.5 2.5 -1.5 3.5 -2.5 4.5" />
  <path d="M8 6v7c0 4.5 -2 5.5 -4 7" />
  <path d="M11 18l-3 -5" />
</svg>
                            
                        </a>
                    </li>
                
            </ol></header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>é¦–é¡µ</span>
            </a>
        </li>
        
        

        <li >
            <a href='/daily' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-book-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#C1C1C1" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z" />
  <path d="M19 16h-12a2 2 0 0 0 -2 2" />
  <path d="M9 8h6" />
</svg>
                
                <span>æ—¥æŠ¥</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>å…³äº</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>å½’æ¡£</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>æœç´¢</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>Dark Mode</span>
            </li>
        
    </ol>
</aside>

<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">
                <img src="/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/cover_hu1426f538bf3f3d274a2921f898c10f8c_1722201_800x0_resize_box_3.png"
                        srcset="/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/cover_hu1426f538bf3f3d274a2921f898c10f8c_1722201_800x0_resize_box_3.png 800w, /2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/cover_hu1426f538bf3f3d274a2921f898c10f8c_1722201_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="420" 
                        loading="lazy"
                        alt="Featured image of post Androidå¼€å‘ç¬”è®°" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E5%BC%80%E5%8F%91%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF/" style="background-color: #228B22; color: #fff;">
                å¼€å‘è¿ç»´æŠ€æœ¯
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/2024/android%E5%BC%80%E5%8F%91%E7%AC%94%E8%AE%B0/">Androidå¼€å‘ç¬”è®°</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Apr 11, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-words">
                    17597å­—
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    
    
    <h2 id="android-ä»‹ç»">Android ä»‹ç»</h2>
<h3 id="android-ç³»ç»Ÿæ¶æ„">Android ç³»ç»Ÿæ¶æ„</h3>
<p>Linuxå†…æ ¸å±‚ï¼Œä¸º Android è®¾å¤‡å„ç§ç¡¬ä»¶åœä¾›åº•å±‚é©±åŠ¨ã€‚</p>
<p>ç³»ç»Ÿè¿è¡Œåº“å±‚ï¼Œé€šè¿‡ä¸€äº› C/C++ åº“ä¸º Android ç³»ç»Ÿæä¾›ä¸»è¦çš„ç‰¹æ€§æ”¯æŒã€‚</p>
<p>åº”ç”¨æ¡†æ¶å±‚ï¼Œæ„å»ºç¨‹åºçš„å„ç§ APIã€‚</p>
<p>åº”ç”¨å±‚ï¼Œæ‰‹æœºä¸Šçš„å„ç§åº”ç”¨ç¨‹åºã€‚</p>
<hr>
<p>å››å¤§ç»„ä»¶ï¼šæ´»åŠ¨ï¼ˆActivityï¼‰ã€æœåŠ¡ï¼ˆServiceï¼‰ã€å¹¿æ’­æ¥æ”¶å™¨ï¼ˆBroadcast Reciverï¼‰å’Œå†…å®¹æä¾›å™¨ï¼ˆContent Providerï¼‰ã€‚</p>
<h3 id="android-é¡¹ç›®ç›®å½•">Android é¡¹ç›®ç›®å½•</h3>
<p>æ„å»º Android é¡¹ç›®åï¼Œä¼šå‡ºç°ä¸€ä¸‹ç»“æ„ï¼š</p>
<ul>
<li><code>.gradle å’Œ .idea</code> ï¼šè‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ã€‚</li>
<li><code>app</code> ï¼šå­˜æ”¾é¡¹ç›®ä¸­çš„ä»£ç å’Œèµ„æºã€‚
<ul>
<li><code>build</code>ï¼šä¸»è¦åŒ…å«äº†ç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ã€‚</li>
<li><code>libs</code>ï¼šç¬¬ä¸‰æ–¹çš„ jar åŒ…ã€‚</li>
<li><code>androidTest</code>ï¼šç¼–å†™ Android Test æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>java</code>ï¼šæ”¾ç½® java ä»£ç çš„åœ°æ–¹ã€‚</li>
<li><code>res</code>ï¼šé¡¹ç›®çš„ä¸€äº›é™æ€èµ„æºç­‰ç­‰ã€‚</li>
<li><code>AndroidManifest.xml</code>ï¼šæ•´ä¸ª Android é¡¹ç›®çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><code>test</code>ï¼šç”¨æ¥ç¼–å†™ Unit Test æµ‹è¯•ç”¨ä¾‹ã€‚</li>
<li><code>.gitignore</code> ï¼šå°†æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–ã€‚</li>
<li><code>app.iml</code>ï¼šIDEA é¡¹ç›®è‡ªåŠ¨ç”Ÿæˆæ–‡ä»¶ã€‚</li>
<li><code>build.gradle</code>ï¼šapp æ¨¡å—çš„ gradle æ„å»ºè„šæœ¬ï¼ŒæŒ‡å®šä¸€äº›é¡¹ç›®æ„å»ºçš„ç›¸å…³é…ç½®ã€‚</li>
<li><code>proguard-rules.pro</code>ï¼šæŒ‡å®šé¡¹ç›®ä»£ç çš„æ··æ·†è§„åˆ™ã€‚</li>
</ul>
</li>
<li><code>build</code>ï¼šç¼–è¯‘æ—¶è‡ªåŠ¨ç”Ÿæˆçš„æ–‡ä»¶ã€‚</li>
<li><code>gradle</code>ï¼šgradle wrapper çš„é…ç½®æ–‡ä»¶ã€‚</li>
<li><code>.gitignore</code>ï¼šå°†æŒ‡å®šç›®å½•æˆ–æ–‡ä»¶æ’é™¤åœ¨ç‰ˆæœ¬æ§åˆ¶ä¹‹å¤–ã€‚</li>
<li><code>build.gradle</code>ï¼šé¡¹ç›®å…¨å±€çš„ gradle æ„å»ºè„šæœ¬ï¼Œé€šå¸¸æ–‡ä»¶ä¸­çš„å†…å®¹ä¸éœ€è¦ä¿®æ”¹ã€‚</li>
<li><code>gradle.properties</code>ï¼šå…¨å±€çš„ gradle é…ç½®æ–‡ä»¶ï¼Œè¿™é‡Œé…ç½®çš„å±æ€§ä¼šå½±å“åˆ°é¡¹ç›®ä¸­æ‰€æœ‰çš„ gradle ç¼–è¯‘è„šæœ¬ã€‚</li>
<li><code>gradlew å’Œ gradlew.bat</code>ï¼šCLI æ‰§è¡Œ gradle å‘½ä»¤ã€‚</li>
<li><code>HelloWorld.iml</code>ï¼šç”¨äºæ ‡è¯†è¿™æ˜¯ä¸€ä¸ª IDEA é¡¹ç›®ã€‚</li>
<li><code>local.properties</code>ï¼šç”¨äºæŒ‡å®š Android SDK è·¯å¾„ã€‚</li>
<li><code>settings.gradle</code>ï¼šæŒ‡å®šé¡¹ç›®ä¸­å¼•ç”¨çš„æ¨¡å—ã€‚</li>
</ul>
<hr>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- AndroidMainfest.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.action.MAIN&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;category</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.category.LAUNCHER&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span></code></pre></div><p>å…¶ä¸­ï¼Œ<code>&lt;intent-filter&gt;</code> é‡Œé¢çš„ä»£ç æ„æ€æ˜¯å½“æˆ‘ä»¬æ‰‹æœºç‚¹å‡»åº”ç”¨å›¾æ ‡çš„æ—¶å€™ï¼Œé¦–å…ˆå¯åŠ¨çš„å°±æ˜¯è¿™ä¸ªæ´»åŠ¨ã€‚</p>
<p>è€Œ <code>MainActivity.java</code> ä¸­åˆ™æ˜¯åŒ…å«äº†åº”ç”¨ä¸­æ‰€æœ‰èƒ½çœ‹è§çš„ä¸œè¥¿ã€‚Android ç¨‹åºä¸€èˆ¬å°†é€»è¾‘å’Œè§†å›¾åˆ†å¼€ï¼Œåœ¨å¸ƒå±€æ–‡ä»¶ä¸­å†™ç•Œé¢ï¼Œç„¶ååœ¨æ´»åŠ¨ä¸­å¼•å…¥ã€‚å¸ƒå±€æ–‡ä»¶åœ¨ <code>res/layout</code> ç›®å½•ä¸‹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å¼•å…¥ activity_main å¸ƒå±€</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>å½’çº³ä¸€ä¸‹ res ç›®å½•ä¸‹çš„å†…å®¹ï¼š</p>
<ul>
<li>æ‰€æœ‰ <code>drawabic</code> å¼€å¤´çš„æ–‡ä»¶å¤¹æ˜¯æ”¾å›¾ç‰‡çš„ã€‚</li>
<li>æ‰€æœ‰ <code>mipmap</code> å¼€å¤´çš„æ–‡ä»¶æ˜¯æ”¾åº”ç”¨å›¾æ ‡çš„ã€‚</li>
<li>æ‰€æœ‰ <code>values</code> å¼€å¤´çš„æ–‡ä»¶å¤¹æ˜¯æ”¾å­—ç¬¦ä¸²ã€æ ·å¼ã€é¢œè‰²ç­‰é…ç½®çš„ã€‚</li>
<li><code>layout</code> æ–‡ä»¶å¤¹æ˜¯ç”¨æ¥æ”¾ç½®å¸ƒå±€çš„ã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;resources&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;string</span> <span style="color:#e06c75">name=</span><span style="color:#98c379">&#34;app_name&#34;</span><span style="color:#e06c75">&gt;</span>Hello, Android!<span style="color:#e06c75">&lt;/string&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/resources&gt;</span>
</span></span></code></pre></div><p>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ªåº”ç”¨ç¨‹åºåçš„å­—ç¬¦ä¸²ï¼Œå¯ä»¥é€šè¿‡ä¸€ä¸‹æ–¹å¼è¿›è¡Œå¼•ç”¨ï¼š</p>
<ul>
<li>åœ¨ä»£ç ä¸­ç”¨ <code>R.string.hello_world</code> æ¥è·å–å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</li>
<li>åœ¨ XML ä¸­é€šè¿‡ <code>@string/hello_world</code> è·å¾—å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</li>
</ul>
<h3 id="è¯¦è§£-buildgradle">è¯¦è§£ build.gradle</h3>
<p>Gradle æ˜¯ä¸€ä¸ªå…ˆè¿›çš„é¡¹ç›®æ„å»ºå·¥å…·ï¼Œä½¿ç”¨äº†ä¸€ç§å±…äº Groovy çš„é¢†åŸŸç‰¹å®šè¯­è¨€æ¥å£°æ˜è®¾ç½®ï¼Œæ‘’å¼ƒäº†ä¼ ç»Ÿçš„ XML çš„å„ç§ç¹çé…ç½®ã€‚</p>
<p>æ¥ä¸‹æ¥ä¸€èµ·çœ‹çœ‹ app å†…çš„ <code>build.gradle </code> æ–‡ä»¶</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#e06c75">plugins</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        com.android.application åº”ç”¨ç¨‹åºæ¨¡å—ï¼šå¯ç›´æ¥è¿è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        com.android.library åº“æ¨¡å—ï¼šä½œä¸ºä»£ç ä¾é™„äºåˆ«çš„åº”ç”¨ç¨‹åºæ¨¡å—
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    */</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">id</span>(<span style="color:#98c379">&#34;com.android.application&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">android</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        android é—­åŒ…å†…å¯ä»¥é…ç½®æ„å»ºé¡¹ç›®çš„å„ç§å±æ€§
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    */</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">namespace</span> = <span style="color:#98c379">&#34;com.example.myapplication4&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">compileSdk</span> = <span style="color:#d19a66">34</span>        <span style="color:#7f848e">// æŒ‡å®šç¼–è¯‘ç‰ˆæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">defaultConfig</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">            defaultCOnfig é—­åŒ…å¯¹é¡¹ç›®æ›´å¤šç»†èŠ‚è¿›è¡Œé…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">applicationId</span> = <span style="color:#98c379">&#34;com.example.myapplication4&#34;</span> <span style="color:#7f848e">// æŒ‡å®šé¡¹ç›®åŒ…å
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">minSdk</span> = <span style="color:#d19a66">24</span>        <span style="color:#7f848e">// æœ€ä½å…¼å®¹ç‰ˆæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">targetSdk</span> = <span style="color:#d19a66">34</span>        <span style="color:#7f848e">// ç›®æ ‡ç‰ˆæœ¬
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">versionCode</span> = <span style="color:#d19a66">1</span>        <span style="color:#7f848e">// æŒ‡å®šé¡¹ç›®çš„ç‰ˆæœ¬å· 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>        <span style="color:#e06c75">versionName</span> = <span style="color:#98c379">&#34;1.0&#34;</span>        <span style="color:#7f848e">// æŒ‡å®šé¡¹ç›®ç‰ˆæœ¬å
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">testInstrumentationRunner</span> = <span style="color:#98c379">&#34;androidx.test.runner.AndroidJUnitRunner&#34;</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">buildTypes</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">            buildTypes é—­åŒ…ç”¨äºæŒ‡å®šå®‰è£…æ–‡ä»¶çš„ç›¸å…³é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">            debug æŒ‡å®šæµ‹è¯•ç‰ˆæœ¬å®‰è£…æ–‡ä»¶çš„é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">            release æŒ‡å®šç”Ÿæˆæ­£å¼ç‰ˆæœ¬å®‰è£…æ–‡ä»¶çš„é…ç½®
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        */</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">release</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">isMinifyEnabled</span> = <span style="color:#c678dd">false</span>        <span style="color:#7f848e">// æ˜¯å¦å¯¹é¡¹ç›®ä»£ç è¿›è¡Œæ··æ·†
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>            <span style="color:#e06c75">proguardFiles</span>(    <span style="color:#7f848e">// æŒ‡å®šæ··æ·†ä½¿ç”¨çš„è§„åˆ™æ–‡ä»¶
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>                <span style="color:#e06c75">getDefaultProguardFile</span>(<span style="color:#98c379">&#34;proguard-android-optimize.txt&#34;</span>),
</span></span><span style="display:flex;"><span>                <span style="color:#98c379">&#34;proguard-rules.pro&#34;</span>    <span style="color:#7f848e">// å½“å‰é¡¹ç›®å¯ç¼–å†™çš„ç‰¹åˆ«æ··æ·†è§„åˆ™
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>            )
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">compileOptions</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">sourceCompatibility</span> = <span style="color:#e5c07b">JavaVersion</span>.<span style="color:#e06c75">VERSION_1_8</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">targetCompatibility</span> = <span style="color:#e5c07b">JavaVersion</span>.<span style="color:#e06c75">VERSION_1_8</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">dependencies</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        dependencies æŒ‡å®šå½“å‰é¡¹ç›®æ‰€æœ‰ä¾èµ–å…³ç³»
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        - æœ¬åœ°ä¾èµ–ã€åº“ä¾èµ–ã€è¿œç¨‹ä¾èµ–
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    */</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">implementation</span>(<span style="color:#98c379">&#34;androidx.appcompat:appcompat:1.6.1&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">implementation</span>(<span style="color:#98c379">&#34;com.google.android.material:material:1.9.0&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">implementation</span>(<span style="color:#98c379">&#34;androidx.constraintlayout:constraintlayout:2.1.4&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">testImplementation</span>(<span style="color:#98c379">&#34;junit:junit:4.13.2&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">androidTestImplementation</span>(<span style="color:#98c379">&#34;androidx.test.ext:junit:1.1.5&#34;</span>)
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">androidTestImplementation</span>(<span style="color:#98c379">&#34;androidx.test.espresso:espresso-core:3.5.1&#34;</span>)
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="android-æ—¥å¿—å·¥å…·">Android æ—¥å¿—å·¥å…·</h3>
<p>Android ä¸­çš„æ—¥å¿—å·¥å…·ç±»æ˜¯ Logï¼ˆandroid.util.Logï¼‰ï¼Œè¿™ä¸ªç±»æä¾›äº†å‡ ä¸ªæ–¹æ³•æ¥æ‰“å°æ—¥å¿—ï¼š</p>
<ul>
<li><code>Log.v()</code>ï¼šæ‰“å°æœ€ä¸ºçç¢çš„ã€æ„ä¹‰æœ€å°çš„æ—¥å¿—ä¿¡æ¯ï¼Œå¯¹åº”çº§åˆ«æ˜¯ verboseã€‚</li>
<li><code>Log.d()</code>ï¼šæ‰“å°ä¸€äº›è°ƒè¯•ä¿¡æ¯ï¼Œå¯¹åº”çº§åˆ«ä¸º dubugã€‚</li>
<li><code>Log.i()</code>ï¼šæ‰“å°ä¸€äº›è¾ƒä¸ºé‡è¦çš„æ•°æ®ï¼Œå¯ä»¥åˆ†æç”¨æˆ·è¡Œä¸ºçš„æ•°æ®ï¼Œå¯¹åº”çº§åˆ«ä¸º infoã€‚</li>
<li><code>Log.e()</code>ï¼šæ‰“å°é”™è¯¯ä¿¡æ¯ï¼Œå¯¹åº”çº§åˆ«ä¸º errorã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">/*
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        æ—¥å¿— - Log.d()
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        ç¬¬ä¸€ä¸ªå‚æ•°æ˜¯tagï¼Œä¸€èˆ¬ä¼ å…¥ç±»åï¼Œç”¨äºè¿‡æ»¤ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        ç¬¬äºŒä¸ªå‚æ•°æ˜¯msgï¼Œæ˜¯æƒ³è¦æ‰“å°çš„å†…å®¹ã€‚
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    */</span>     
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;MainActivity&#34;</span>, <span style="color:#98c379">&#34;onCreate execute&#34;</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="android-æ´»åŠ¨">Android æ´»åŠ¨</h2>
<p>æ´»åŠ¨ï¼ˆActivityï¼‰æ˜¯ä¸€ç§å¯ä»¥åŒ…å«ç”¨æˆ·ç•Œé¢çš„ç»„ä»¶ï¼Œä¸»è¦ç”¨äºç”¨æˆ·çš„äº¤äº’ã€‚</p>
<p>æˆ‘ä»¬é€‰æ‹© <code>no activity</code> é€‰é¡¹åæ„å»ºé¡¹ç›®ï¼Œåœ¨ <code>./app/java/com/example/activitytest</code> ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªæ´»åŠ¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">FirstActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åï¼Œæˆ‘ä»¬ä¸ºæ´»åŠ¨æ·»åŠ å¸ƒå±€ã€‚åœ¨ <code>./app/src/main/res</code> ç›®å½•ä¸‹åˆ›å»º <code>layout</code> ç›®å½•ï¼Œç„¶åæ–°å»ºå¸ƒå±€èµ„æºã€‚å†™å®Œå¸ƒå±€åï¼Œç›´æ¥å°†å¸ƒå±€å¼•å…¥æ´»åŠ¨ä¸­ <code>setContentView(R.layout.first_layout)</code>ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">&lt;!-- æ·»åŠ ä¸€ä¸ª Button 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">         å¦‚æœåœ¨ XML å®šä¹‰ idï¼Œä½¿ç”¨ @+id/id_name è¯­æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">         å¦‚æœåœ¨ XML å¼•ç”¨ idï¼Œä½¿ç”¨ @id/id_name è¯­æ³•
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        match_partent è¡¨ç¤ºè®©å½“å‰å…ƒç´ å’Œçˆ¶å…ƒç´ ä¸€æ ·çš„é•¿åº¦
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        wrap_content è¡¨ç¤ºå½“å‰å…ƒç´ åªè¦èƒ½åŒ…å«é‡Œé¢çš„å†…å®¹å°±è¡Œ
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        text æŒ‡å®šå…ƒç´ å†…æ˜¾ç¤ºçš„å†…å®¹
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button1&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æ³¨æ„ï¼Œæ‰€ä»¥çš„æ´»åŠ¨è¦åœ¨ <code>AndroidMainfest.xml </code> ä¸­è¿›è¡Œæ³¨å†Œæ‰èƒ½ç”Ÿæ•ˆã€‚å½“ç„¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦ç»™ç¨‹åºé…ç½®ä¸»æ´»åŠ¨ï¼Œæ‰èƒ½å¯åŠ¨åº”ç”¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- AndroidMainfest.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.FirstActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:label=</span><span style="color:#98c379">&#34;This is FirstActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.action.MAIN&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;category</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.category.LAUNCHER&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span></code></pre></div><h3 id="toast">Toast</h3>
<p>Toast å¯ä»¥å°†ä¸€äº›çŸ­å°çš„ä¿¡æ¯é€šçŸ¥ä¸ªç”¨æˆ·ï¼Œè¿™äº›ä¿¡æ¯ä¼šåœ¨ä¸€æ®µæ—¶é—´åè‡ªåŠ¨æ¶ˆå¤±ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// è·å¾— Button å®ä¾‹</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// æ³¨å†Œ Button ç›‘å¬æŒ‰é’®ç‚¹å‡»</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">FirstActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#98c379">&#34;You clicked Button1&#34;</span>,
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// Activity ç±»æä¾›äº†ä¸€ä¸ª finish() æ–¹æ³•ï¼Œå¯ä»¥é”€æ¯å½“å‰æ´»åŠ¨</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">finish</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="menu">Menu</h3>
<p>åœ¨ <code>./app/src/main/res</code> ç›®å½•ä¸‹åˆ›å»º <code>menu</code> æ–‡ä»¶å¤¹ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;menu</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;item</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id =</span> <span style="color:#98c379">&#34;@+id/add_item&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:title =</span> <span style="color:#98c379">&#34;Add&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;item</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id =</span> <span style="color:#98c379">&#34;@+id/remove_item&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:title =</span> <span style="color:#98c379">&#34;Remove&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/menu&gt;</span>
</span></span></code></pre></div><p>ç„¶åå›åˆ° <code>FirstActivity.java</code> é‡å†™æ–¹æ³•ï¼Œè®©èœå•æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">boolean</span> <span style="color:#61afef;font-weight:bold">onCreateOptionsMenu</span>(<span style="color:#e06c75">Menu</span> <span style="color:#e06c75">menu</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// åˆ›å»º MenuInflater å¯¹è±¡ï¼Œè°ƒç”¨ inflate() æ–¹æ³•åˆ›å»ºèœå•</span>
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// ç¬¬ä¸€ä¸ªå‚æ•°ï¼ŒæŒ‡å®šèµ„æºæ–‡ä»¶åˆ›å»ºèœå•ï¼›ç¬¬äºŒä¸ªå‚æ•°ï¼ŒæŒ‡å®šèœå•æ·»åŠ åˆ°menuä¸­</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">getMenuInflater</span>().<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">menu</span>.<span style="color:#e06c75">main</span>, <span style="color:#e06c75">menu</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#e5c07b">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ­¤å¤–ï¼Œå‡ºæ¥è®©èœå•æ˜¾ç¤ºå¤–ï¼Œè¿˜è¦è®©èœå•è¿›è¡Œå“åº”ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">boolean</span> <span style="color:#61afef;font-weight:bold">onOptionsItemSelected</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">MenuItem</span> <span style="color:#e06c75">item</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#e5c07b">int</span> <span style="color:#e06c75">id</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">item</span>.<span style="color:#e06c75">getItemId</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">id</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">add_item</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#c678dd">this</span>, <span style="color:#98c379">&#34;You clicked Add&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">else</span> <span style="color:#c678dd">if</span> (<span style="color:#e06c75">id</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">remove_item</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#c678dd">this</span>, <span style="color:#98c379">&#34;You clicked Remove&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#e5c07b">true</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="intent">Intent</h3>
<p>åœ¨ <code>./app/java/com/example/activitytest</code> ç›®å½•ä¸‹æ–°å»ºç¬¬äºŒä¸ªæ´»åŠ¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- second_layout.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button2&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>Intent æ˜¯ Android ç¨‹åºä¸­å„ç»„ä»¶ä¹‹é—´è¿›è¡Œäº¤äº’çš„ä¸€ç§é‡è¦æ–¹å¼ï¼Œä¸ä»…å¯ä»¥æŒ‡æ˜å½“å‰ç»„ä»¶æƒ³è¦æ‰§è¡Œçš„åŠ¨ä½œï¼Œè¿˜å¯ä»¥åœ¨ä¸åŒç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p>
<p>Intent ä¸€èˆ¬ç”¨äºå¯åŠ¨æ´»åŠ¨ã€å¯åŠ¨æœåŠ¡ä»¥åŠå‘é€å¹¿æ’­ç­‰åœºæ™¯ã€‚</p>
<p>Intent æœ‰å¤šä¸ªæ„é€ å‡½æ•°çš„é‡è½½ï¼Œå…¶ä¸­ä¸€ä¸ªæ˜¯ <code>Intent(Context packageContex, Class&lt;?&gt;cls)</code>ï¼ŒContext è¦æ±‚æä¾›ä¸€ä¸ªå¯åŠ¨æ´»åŠ¨çš„ä¸Šä¸‹æ–‡ï¼ŒClass æŒ‡å®šæƒ³è¦å¯åŠ¨çš„ç›®æ ‡æ´»åŠ¨ã€‚</p>
<p>Activity ç±»ä¸­æä¾›äº† startActivity() æ–¹æ³•ä¸“é—¨ç”¨äºå¯åŠ¨æ´»åŠ¨ï¼Œå®ƒæ¥æ”¶ä¸€ä¸ª Intent å‚æ•°ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">FirstActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">SecondActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>ä¸Šè¿°æ–¹æ³•ä¸ºæ˜¾ç¤º Intentæ–¹æ³•ï¼Œéšå¼ Intent åˆ™æ˜¯é€šè¿‡æ ‡ç­¾æŒ‡å®šã€‚</p>
<ul>
<li><code>&lt;action&gt;</code> æ ‡ç­¾ä¸­æŒ‡æ˜å½“å‰æ´»åŠ¨å¯ä»¥å“åº”ã€‚</li>
<li><code>&lt;category&gt;</code> æ ‡ç­¾åŒ…å«é™„åŠ ä¿¡æ¯ï¼ŒæŒ‡æ˜å½“å‰æ´»åŠ¨èƒ½å¤Ÿå“åº”çš„ Intent ä¸­è¿˜å¯èƒ½å¸¦æœ‰çš„ categoryã€‚</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- AndroidManifest.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.SecondActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.example.activitytest.ACTION_START&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;category</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.category.DEFAULT&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span></code></pre></div><p>å†å¯¹äº‹ä»¶è¿›è¡Œä¿®æ”¹ï¼Œå½“ç„¶æ¯ä¸ª Intent åªèƒ½æŒ‡å®šä¸€ä¸ª action ï¼Œå´èƒ½æŒ‡å®šå¤šä¸ª categoryã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#98c379">&#34;com.example.activitytest.ACTION_START&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>ä½¿ç”¨éšå¼ Intentï¼Œä¸ä»…å¯ä»¥å¯åŠ¨è‡ªå·±ç¨‹åºå†…çš„æ´»åŠ¨æ–¹æ³•ï¼Œè¿˜å¯ä»¥å¯åŠ¨å…¶ä»–ç¨‹åºçš„æ´»åŠ¨ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// é€šè¿‡æµè§ˆå™¨å¼€å¯ç½‘é¡µ</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">Intent</span>.<span style="color:#e06c75">ACTION_VIEW</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">setData</span>(<span style="color:#e06c75">Uri</span>.<span style="color:#e06c75">parse</span>(<span style="color:#98c379">&#34;http://www.baidu.com&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>äºæ­¤ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥åœ¨ <code>&lt;intent-filter&gt;</code> æ ‡ç­¾ä¸­é…ç½® <code>&lt;data&gt;</code> æ ‡ç­¾ï¼Œç”¨äºæ›´ç²¾ç¡®åœ°æŒ‡å®šå½“å‰æ´»åŠ¨èƒ½å¤Ÿå“åº”ä»€ä¹ˆç±»å‹çš„æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- AndroidManifest.xml --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.ThirdActivity&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">&lt;intent-filter</span> <span style="color:#e06c75">tools:ignore=</span><span style="color:#98c379">&#34;AppLinkUrlError&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.action.VIEW&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">&lt;category</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.category.DEFAULT&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">&lt;data</span> <span style="color:#e06c75">android:scheme=</span><span style="color:#98c379">&#34;http&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬æŒ‡å®šäº† <code>Intent.ACTION_VIEW</code> ç”¨äºå±•ç¤º ï¼Œç°åœ¨ç‚¹å‡»æŒ‰é’®åé™¤äº†å¯ä»¥é€‰æ‹© <code>Browser</code> å¤–ï¼Œè¿˜å¯ä»¥é€‰æ‹© <code>ActivityTest</code> æ¥å¯åŠ¨æ´»åŠ¨ã€‚</p>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥æŒ‡å®šå…¶ä»–åè®®ï¼š<code>geo</code> è¡¨ç¤ºåœ°ç†ä½ç½®ã€<code>tel</code> è¡¨ç¤ºæ‹¨æ‰“ç”µè¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// å¯ä»¥æ”¹ä¸ºæ‰“å¼€æ‹¨å·</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">Intent</span>.<span style="color:#e06c75">ACTION_DIAL</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">setData</span>(<span style="color:#e06c75">Uri</span>.<span style="color:#e06c75">parse</span>(<span style="color:#98c379">&#34;tel:10086&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>é™¤äº†è¿›è¡Œæ´»åŠ¨çš„åˆ›å»ºå¤–ï¼Œæˆ‘ä»¬è¿˜è¦åœ¨æ´»åŠ¨å¯åŠ¨çš„æ—¶å€™ä¼ é€’æ•°æ®ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>FirstActivity</code> ä¸­ä¼ é€’æ•°æ®ç»™ <code>SecondActivity</code> ï¼Œç„¶åå†åœ¨ <code>SecondaActivity</code> ä¸­æ¥æ”¶ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// FistActivity</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">finViewByID</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">FirstActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">SecondActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Hello SecondActivity&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">putExtra</span>(<span style="color:#98c379">&#34;extar_data&#34;</span>, <span style="color:#e06c75">data</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>})
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// SecondActivity</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">second_layout</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getIntent</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">String</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">getStringExtra</span>(<span style="color:#98c379">&#34;extra_data&#34;</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">// int data = intent.getIntExtra(&#34;extra_data&#34;);</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">assert</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;SecondActivity&#34;</span>, <span style="color:#e06c75">data</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å½“ç„¶ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ¥æ”¶ä¸‹ä¸€ä¸ªæ´»åŠ¨é”€æ¯æ—¶ä¼ é€’çš„æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// FirstActivity</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">finViewByID</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button1</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">FirstActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">SecondActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intentActivityResultLauncher</span>.<span style="color:#e06c75">launch</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// å¤„ç†å›è°ƒæ•°æ®</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">ActivityResultLauncher</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Intent</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">intentActivityResultLauncher</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">registerForActivityResult</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">ActivityResultContracts</span>.<span style="color:#e06c75">StartActivityForResult</span>(), <span style="color:#c678dd">new</span> <span style="color:#e06c75">ActivityResultCallback</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">ActivityResult</span><span style="color:#56b6c2">&gt;</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onActivityResult</span>(<span style="color:#e06c75">ActivityResult</span> <span style="color:#e06c75">result</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">result</span>.<span style="color:#e06c75">getData</span>() <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span> <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#e06c75">result</span>.<span style="color:#e06c75">getResultCode</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">RESULT_OK</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">String</span> <span style="color:#e06c75">returnedData</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">result</span>.<span style="color:#e06c75">getData</span>().<span style="color:#e06c75">getStringExtra</span>(<span style="color:#98c379">&#34;data_return&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;FirstActivity&#34;</span>, <span style="color:#e06c75">returnedData</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});   
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// SecondActivty</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button2</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button2</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button2</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">putExtra</span>(<span style="color:#98c379">&#34;data_return&#34;</span>, <span style="color:#98c379">&#34;Hello FirstActivity&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// RESULT_OK æˆ– RESULT_CANCELED</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setResult</span>(<span style="color:#e06c75">RESULT_OK</span>, <span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">finish</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><h3 id="ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</h3>
<p>Android ä¸­çš„æ´»åŠ¨æ˜¯å±‚å çš„ï¼Œæ¯å¯åŠ¨ä¸€ä¸ªæ´»åŠ¨å°±ä¼šè¦†ç›–åœ¨åŸæ´»åŠ¨ä¹‹ä¸Šï¼Œæˆ‘ä»¬é€šè¿‡ <code>Back</code> é”®é”€æ¯æœ€ä¸Šå±‚çš„æ´»åŠ¨ï¼Œç„¶åä¸‹é¢çš„ä¸€ä¸ªæ´»åŠ¨å°±ä¼šé‡æ–°æ˜¾ç¤ºå‡ºæ¥ã€‚</p>
<p>å…¶å®ï¼ŒAndroid æ˜¯ä½¿ç”¨ä»»åŠ¡ï¼ˆTaskï¼‰æ¥ç®¡ç†æ´»åŠ¨çš„ï¼Œä¸€ä¸ªä»»åŠ¡å°±æ˜¯ä¸€ç»„å­˜æ”¾åœ¨æ ˆé‡Œçš„æ´»åŠ¨é›†åˆï¼Œè¿™ä¸ªæ ˆä¹Ÿè¢«ç§°ä¸ºè¿”å›æ ˆï¼ˆBack Stackï¼‰ã€‚å½“æˆ‘ä»¬å¯åŠ¨ä¸€ä¸ªæ´»åŠ¨çš„æ—¶å€™ï¼Œå®ƒå°±ä¼šè¿›å…¥åˆ°ä»»åŠ¡æ ˆä¸­ã€‚</p>
<p>æ¯ä¸ªæ´»åŠ¨åœ¨å…¶ç”Ÿå‘½å‘¨æœŸä¸­æœ€å¤šå¯èƒ½ä¼šæœ‰å››ç§çŠ¶æ€ï¼šè¿è¡ŒçŠ¶æ€ã€æš‚åœçŠ¶æ€ã€åœæ­¢çŠ¶æ€å’Œé”€æ¯çŠ¶æ€ã€‚</p>
<p>Activity ç±»ä¸­å®šä¹‰äº† 7 ä¸ªå›è°ƒæ–¹æ³•ï¼Œè¦†ç›–äº†æ´»åŠ¨ç”Ÿå‘½å‘¨æœŸçš„æ¯ä¸€ä¸ªç¯èŠ‚ã€‚</p>
<ul>
<li>onCreate()ï¼šå®ƒä¼šåœ¨æ´»åŠ¨ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºçš„æ—¶å€™è°ƒç”¨ï¼Œå®Œæˆåˆå§‹åŒ–æ“ä½œï¼Œæ¯”å¦‚åŠ è½½å¸ƒå±€ã€ç»‘å®šäº‹ä»¶ç­‰ç­‰ã€‚</li>
<li>onStart()ï¼šåœ¨æ´»åŠ¨ç”±ä¸å¯è§å˜ä¸ºå¯è§çš„æ—¶å€™è°ƒç”¨ã€‚</li>
<li>onResume()ï¼šåœ¨æ´»åŠ¨å‡†å¤‡å¥½å’Œç”¨æˆ·è¿›è¡Œäº¤äº’çš„æ—¶å€™è°ƒç”¨ï¼Œè¿™æ—¶æ´»åŠ¨ä½äºè¿”å›æ ˆçš„æ ˆé¡¶ï¼Œå¹¶ä¸”å¤„äºè¿è¡ŒçŠ¶æ€ã€‚</li>
<li>onPause()ï¼šè¿™ä¸ªæ–¹æ³•åœ¨ç³»ç»Ÿå‡†å¤‡å»å¯åŠ¨æˆ–æ¢å¤å¦ä¸€ä¸ªæ´»åŠ¨çš„æ—¶å€™è°ƒç”¨ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•å†…é‡Šæ”¾ä¸€äº›èµ„æºä»¥åŠä¿å­˜ä¸€äº›å…³é”®æ•°æ®ã€‚</li>
<li>onStop()ï¼šåœ¨æ´»åŠ¨å®Œå…¨ä¸å¯è§çš„æ—¶å€™è°ƒç”¨ã€‚</li>
<li>onDestroy()ï¼šåœ¨æ´»åŠ¨é”€æ¯å‰è°ƒç”¨ã€‚</li>
<li>onRestart()ï¼šåœ¨æ´»åŠ¨ç”±åœæ­¢çŠ¶æ€å˜ä¸ºè¿è¡ŒçŠ¶æ€ä¹‹å‰è°ƒç”¨ï¼Œä¹Ÿå°±æ˜¯æ´»åŠ¨è¢«é‡æ–°å¯åŠ¨äº†ã€‚</li>
</ul>
<p>ä¸Šé¢çš„æ–¹æ³•é™¤äº† onRestra() æ–¹æ³•å¤–ï¼Œä¸¤ä¸¤ç›¸å¯¹ã€‚</p>
<ul>
<li>å®Œæ•´ç”Ÿå­˜å‘¨æœŸã€‚åœ¨ onCreate() æ–¹æ³•ä¸­å®Œæˆåˆå§‹åŒ–æ“ä½œï¼Œåœ¨ onDestroy() æ–¹æ³•ä¸­é‡Šæ”¾å†…å­˜ã€‚</li>
<li>å¯è§ç”Ÿå­˜æœŸã€‚åœ¨ onStrat() æ–¹æ³•ä¸­å¯¹èµ„æºè¿›è¡ŒåŠ è½½ï¼Œåœ¨ onStop() æ–¹æ³•ä¸­å¯¹èµ„æºè¿›è¡Œé‡Šæ”¾ã€‚</li>
<li>å‰å°ç”Ÿå­˜æœŸã€‚onResume() æ–¹æ³•å’Œ onPause() æ–¹æ³•å°±æ˜¯ç”¨æ¥ä¸ç”¨æˆ·æ¥è§¦çš„ã€‚</li>
</ul>
<hr>
<p>å¼€å§‹å®æˆ˜ï¼Œæ–°å»ºä¸€ä¸ª ActivityLifeCycleTest é¡¹ç›®ï¼Œç„¶åæ–°å»ºä¸¤ä¸ªæ´»åŠ¨ï¼Œå®ƒä»¬çš„å¸ƒå±€å¦‚ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- normal_layout --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is a normal activity&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;!-- dialog_layout --&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is a dialog activity&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬åœ¨ AndroidManifest.xml ä¸­ä¿®æ”¹æ´»åŠ¨ï¼ŒæŒ‡å®šå…¶ä¸»é¢˜ä¸ºå¯¹è¯æ¡†æ¨¡å¼ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.DialogLayoutActivity&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:theme=</span><span style="color:#98c379">&#34;@style/Theme.AppCompat.Dialog&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span></code></pre></div><p>æ­¤å¤–ï¼Œæˆ‘ä»¬å†è°ƒæ•´ä¸€ä¸‹ä¸»æ´»åŠ¨çš„å¸ƒå±€ï¼Œæ·»åŠ æŒ‰é’®æ¥å»å¯åŠ¨æ–°çš„æ´»åŠ¨ã€‚è¿™é‡Œçš„ç›´æ¥å±•ç¤ºä¸»æ´»åŠ¨ä¿®æ”¹åçš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.example.activitycycletest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#c678dd">final</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">TAG</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;MainActivity&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button1</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">start_normal_activity</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button2</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">start_dialog_activity</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">button1</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">NormalLayoutActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">button2</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">DialogLayoutActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onStart</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onStart</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#98c379">&#34;onStart&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onResume</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onResume</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#98c379">&#34;onResume&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onPause</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onPause</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#98c379">&#34;onPause&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onStop</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onStop</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#98c379">&#34;onStop&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#98c379">&#34;onDestroy&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onRestart</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onRestart</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#98c379">&#34;onRestart()&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æœ‰æ—¶å€™æ´»åŠ¨åœæ­¢å¤ªä¹…å¯èƒ½å› ä¸ºå†…å­˜ä¸å¤Ÿè€Œè¢«ç³»ç»Ÿå›æ”¶äº†ï¼Œè¿™æ ·ä¼šå¯¼è‡´æŸäº›é‡è¦çš„æ•°æ®ä¼šä¸¢å¤±ï¼Œå› ä¸ºå½“æˆ‘ä»¬å›åˆ°è¯¥æ´»åŠ¨çš„æ—¶å€™ç³»ç»Ÿæ˜¯è°ƒç”¨ onCreate() æ–¹æ³•é‡æ–°åˆ›å»ºäº†æ´»åŠ¨ã€‚</p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå¯ä»¥ä½¿ç”¨ Activity ç±»æä¾›çš„ onSaveInstanceState() å›è°ƒæ–¹æ³•ï¼Œå®ƒå¯ä»¥ä¿è¯æ´»åŠ¨è¢«å›æ”¶å‰ä¸€å®šä¼šè¢«è°ƒç”¨ã€‚è¯¥æ–¹æ³•æºå¸¦äº†ä¸€ä¸ª Bundle ç±»å‹çš„å‚æ•°ï¼Œå®ƒæä¾›äº†ä¸€ç³»åˆ—æ–¹æ³•ç”¨äºä¿æŠ¤æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onSaveInstanceState</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">outState</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onSaveInstanceState</span>(<span style="color:#e06c75">outState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">String</span> <span style="color:#e06c75">tempData</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Something you just typed&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">outState</span>.<span style="color:#e06c75">putString</span>(<span style="color:#98c379">&#34;data_key&#34;</span>, <span style="color:#e06c75">tempData</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬ä¿®æ”¹ onCreate() æ–¹æ³•æ¥æ¢å¤ä¿å­˜çš„æ•°æ®ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">savedInstanceState</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">tempData</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">savedInstanceState</span>.<span style="color:#e06c75">getString</span>(<span style="color:#98c379">&#34;data_key&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#e06c75">TAG</span>, <span style="color:#e06c75">tempData</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>Intent è¿˜å¯ä»¥å’Œ Bundle ç»“åˆæ¥è¿›è¡Œä½¿ç”¨ï¼Œæ¯”å¦‚æŠŠè¦ä¼ é€’çš„æ•°æ®ç»™åˆ° Bundle ç„¶åå†æŠŠ Bundle ç»™åˆ° Intentï¼Œç­‰åˆ°äº†ç›®æ ‡æ´»åŠ¨äº†ä¹‹åå†å–å‡º Bundle ä¸­çš„æ•°æ®ã€‚</p>
<h3 id="æ´»åŠ¨çš„å¯åŠ¨æ¨¡å¼">æ´»åŠ¨çš„å¯åŠ¨æ¨¡å¼</h3>
<p>åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬æ ¹æ®ç‰¹å®šçš„éœ€æ±‚ä¸ºæ¯ä¸ªæ´»åŠ¨æŒ‡å®šæ°å½“çš„å¯åŠ¨æ¨¡å¼ï¼Œåˆ†åˆ«æœ‰ï¼šstandardã€singleTopã€singleTask å’Œ singleInstanceã€‚</p>
<p>æˆ‘ä»¬å¯ä»¥ç»™ <code>&lt;activity&gt;</code> æ ‡ç­¾æŒ‡å®š <code>androod:launchMode</code> æ¥é€‰æ‹©å¯åŠ¨æ¨¡å¼ã€‚</p>
<p><strong>standard</strong>ï¼šä¸ºé»˜è®¤çš„å¯åŠ¨æ¨¡å¼ï¼Œåœ¨è¯¥æ¨¡å¼ä¸‹æ¯å¯åŠ¨ä¸€ä¸ªæ–°æ´»åŠ¨å°±ä¼šåœ¨è¿”å›æ ˆä¸­å…¥æ ˆï¼Œå¹¶å¤„äºæ ˆé¡¶çš„ä½ç½®ã€‚ç„¶è€Œç³»ç»Ÿå¹¶ä¸åœ¨ä¹å…¶æ˜¯å¦ç‹¬ç«‹å­˜åœ¨è¿”å›æ ˆä¸­ï¼Œæ¯æ¬¡å¯åŠ¨ç³»ç»Ÿéƒ½ä¼šåˆ›å»ºè¯¥æ´»åŠ¨çš„ä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p>
<p><strong>singleTop</strong>ï¼šåœ¨å¯åŠ¨æ´»åŠ¨æ—¶ï¼Œç³»ç»Ÿå¦‚æœå‘ç°è¿”å›æ ˆçš„æ ˆé¡¶æ˜¯è¯¥æ´»åŠ¨ï¼Œåˆ™è®¤ä¸ºå¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œå°±ä¸ä¼šæ–°å»ºä¸€ä¸ªæ–°çš„å®ä¾‹äº†ã€‚ä½†å¦‚æœè¯¥æ´»åŠ¨æ²¡æœ‰åœ¨æ ˆé¡¶ï¼Œå°±è¿˜æ˜¯ä¼šåˆ›å»ºæ–°çš„å®ä¾‹ã€‚</p>
<p><strong>singleTask</strong>ï¼šæ¯æ¬¡å¯åŠ¨è¯¥æ´»åŠ¨æ—¶ï¼Œç³»ç»Ÿé¦–å…ˆä¼šåœ¨è¿”å›æ ˆä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨è¯¥æ´»åŠ¨çš„å®ä¾‹ï¼Œå¦‚æœå­˜åœ¨åˆ™ç›´æ¥ä½¿ç”¨è¯¥å®ä¾‹ï¼Œå¹¶å°†è¯¥æ´»åŠ¨ä¹‹ä¸Šçš„æ‰€æœ‰æ´»åŠ¨å…¨éƒ¨å‡ºæ ˆï¼Œå¦åˆ™å°±åˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹ã€‚</p>
<p><strong>singleInstance</strong>ï¼šè¯¥æ¨¡å¼ä¸‹çš„æ´»åŠ¨ä¼šå¯ç”¨ä¸€ä¸ªæ–°çš„è¿”å›æ ˆæ¥ç®¡ç†æ´»åŠ¨ï¼Œè¿™æ ·å°±å¯ä»¥å®ç°æ´»åŠ¨çš„å®ä¾‹å…±äº«ã€‚</p>
<h3 id="æ´»åŠ¨çš„å®è·µ">æ´»åŠ¨çš„å®è·µ</h3>
<p><strong>çŸ¥é“å½“å‰æ˜¯åœ¨å“ªä¸€ä¸ªæ´»åŠ¨</strong>ï¼š</p>
<p>æˆ‘ä»¬åœ¨ AcitivityTest é¡¹ç›®ä¸Šç›´æ¥ new ä¸€ä¸ª BaseActivity ç±»ï¼Œå¹¶ä¸ç”¨æ³¨å†Œï¼Œæˆ‘ä»¬è®©å®ƒç»§æ‰¿ AppcompatActivityï¼Œå¹¶é‡å†™ onCreate() æ–¹æ³•ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">BaseActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;BaseActivity&#34;</span>, <span style="color:#e06c75">getClass</span>().<span style="color:#e06c75">getSimpleName</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä¿®æ”¹ FirstActivityã€SecondActivity å’Œ ThirdActivity çš„ç»§æ‰¿ç»“æ„ï¼Œè®©å®ƒä»¬ç»§æ‰¿ BaseActivityã€‚</p>
<p>è¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡ Logcat çœ‹åˆ°æˆ‘ä»¬çš„æ´»åŠ¨è¾“å‡ºäº†ã€‚</p>
<p><strong>éšæ—¶éšåœ°é€€å‡ºç¨‹åº</strong>ï¼š</p>
<p>æ€è·¯å°±æ˜¯æˆ‘ä»¬è®¾ç½®ä¸€ä¸ªä¸“é—¨çš„é›†åˆç±»å¯¹æ‰€æœ‰æ´»åŠ¨è¿›è¡Œç®¡ç†ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª ActivityCollector ç±»ä½œä¸ºæ´»åŠ¨ç®¡ç†å™¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.example.activitytest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.Activity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ActivityCollector</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Activity</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">activityList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">addActivity</span>(<span style="color:#e06c75">Activity</span> <span style="color:#e06c75">activity</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">activityList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">activity</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">removeActivity</span>(<span style="color:#e06c75">Activity</span> <span style="color:#e06c75">activity</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">activityList</span>.<span style="color:#e06c75">remove</span>(<span style="color:#e06c75">activity</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">finishAll</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e06c75">Activity</span> <span style="color:#e06c75">activity</span> : <span style="color:#e06c75">activityList</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#56b6c2">!</span><span style="color:#e06c75">activity</span>.<span style="color:#e06c75">isFinishing</span>()){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">activity</span>.<span style="color:#e06c75">finish</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ¥ä¿®æ”¹ BaseActivity ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">BaseActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;BaseActivity&#34;</span>, <span style="color:#e06c75">getClass</span>().<span style="color:#e06c75">getSimpleName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">addActivity</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">removeActivity</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å¦‚æœä½ æƒ³ç›´æ¥é€€å‡ºç¨‹åºï¼Œå°±åœ¨é‚£ä¸ªåœ°æ–¹è°ƒç”¨ ActivityCollector.finishAll() æ–¹æ³•å°±å¯ä»¥äº†ã€‚</p>
<p>å½“ç„¶ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨é”€æ¯æ‰€æœ‰æ´»åŠ¨çš„ä»£ç åå†åŠ ä¸Šæ€æ‰å½“å‰è¿›ç¨‹çš„ä»£ç ï¼Œä»¥ä¿è¯ç¨‹åºå®Œå…¨é€€å‡ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">android</span>.<span style="color:#e06c75">os</span>.<span style="color:#e06c75">Process</span>.<span style="color:#e06c75">killProcess</span>(<span style="color:#e06c75">android</span>.<span style="color:#e06c75">os</span>.<span style="color:#e06c75">Process</span>.<span style="color:#e06c75">myPid</span>());
</span></span></code></pre></div><p><strong>å¯åŠ¨æ´»åŠ¨çš„æœ€ä½³å†™æ³•</strong></p>
<p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ SecondAcitvity ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">actionStart</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">String</span> <span style="color:#e06c75">data1</span>, <span style="color:#e06c75">String</span> <span style="color:#e06c75">data2</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">context</span>, <span style="color:#e06c75">SecondActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">putExtra</span>(<span style="color:#98c379">&#34;param1&#34;</span>, <span style="color:#e06c75">data1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">putExtra</span>(<span style="color:#98c379">&#34;param2&#34;</span>, <span style="color:#e06c75">data2</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">context</span>.<span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åï¼Œæˆ‘ä»¬åœ¨å¯åŠ¨çš„æ—¶å€™è°ƒç”¨è¯¥å‡½æ•°å°±å¥½äº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-c" data-lang="c"><span style="display:flex;"><span><span style="color:#e06c75">SecondActivity</span>.<span style="color:#61afef;font-weight:bold">actionStart</span>(<span style="color:#e06c75">FirstActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#98c379">&#34;data1&#34;</span>, <span style="color:#98c379">&#34;data2&#34;</span>);
</span></span></code></pre></div><h2 id="android-è®¾è®¡">Android è®¾è®¡</h2>
<h3 id="å¸¸è§æ§ä»¶ç”¨æ³•">å¸¸è§æ§ä»¶ç”¨æ³•</h3>
<p><strong>TextView</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/text_view&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is TextView&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><ul>
<li>android:layout_width å’Œ android:layout_height ç”¨æ¥è®¾ç½®æ§ä»¶çš„å®½å’Œé«˜ï¼Œé€šå¸¸æœ‰ä¸‰ç§è®¾ç½®ï¼šmatch_parentã€fill_parent å’Œ wrap_contentã€‚</li>
<li>android:textã€android:textSize å’Œ android:textColor åˆ†åˆ«ç”¨æ¥æŒ‡å®šæ–‡æœ¬çš„å†…å®¹ã€æ–‡æœ¬å¤§å°å’Œæ–‡æœ¬é¢œè‰²ã€‚å­—ä½“ç”¨ sp ä½œä¸ºå•ä½ã€‚</li>
<li>android:gravity ç”¨æ¥æŒ‡å®šæ–‡å­—å¯¹é½æ–¹å¼ï¼Œæœ‰ topã€bottomã€leftã€rightã€centerç­‰ç­‰ï¼Œå¯ä»¥ç”¨ â€|â€œ æ¥æŒ‡å®šå¤šä¸ªå€¼ã€‚</li>
</ul>
<p><strong>Button</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is Button&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#7f848e">// ç‚¹å‡»åçš„äº‹åŠ¡é€»è¾‘</span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span></code></pre></div><p><strong>EditText</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;EditText</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/edit_text&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:hint=</span><span style="color:#98c379">&#34;Type something here&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:maxLines=</span><span style="color:#98c379">&#34;2&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>)<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">editText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">edit_text</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClicke</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getId</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">inputText</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">editText</span>.<span style="color:#e06c75">getText</span>().<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">inputText</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>android:hint æŒ‡å®šæç¤ºæ€§æ–‡æœ¬ã€‚</li>
<li>android:maxlines æŒ‡å®šæœ€å¤§è¡Œæ•°ï¼Œå¦‚æœå†…å®¹è¶…å‡ºé™åˆ¶ï¼Œæ–‡æœ¬å°±ä¼šå‘ä¸Šæ»šåŠ¨ã€‚</li>
</ul>
<p><strong>ImageView</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/image_view&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;warp_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:scr=</span><span style="color:#98c379">&#34;@drawable/img_1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>)<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">editText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">edit_text</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">imageView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">image_view</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClicke</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getId</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">imageView</span>.<span style="color:#e06c75">setImageResource</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">img_2</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>ProgressBar</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;ProgerssBar</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/progress_bar&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">style=</span><span style="color:#98c379">&#34;?android:attr/progressBarStyleHorizontal&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:max=</span><span style="color:#98c379">&#34;100&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>)<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">editText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">edit_text</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">imageView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">image_view</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">progressBar</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ProgressBar</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">progress_bar</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClicke</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getId</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">progressBar</span>.<span style="color:#e06c75">getVisibility</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">GONE</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">progressBar</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">VISIBLE</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">progressBar</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">GONE</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClicke</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getId</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">progress</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">progressBar</span>.<span style="color:#e06c75">getProgress</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">progerss</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">progress</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">10</span>;
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">progressBar</span>.<span style="color:#e06c75">setProgress</span>(<span style="color:#e06c75">progress</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><ul>
<li>android:visibility å¯ä»¥æ§åˆ¶æ§ä»¶çš„ç°å®ï¼Œå®ƒæœ‰ä¸‰ä¸ªé€‰é¡¹ï¼švisibleã€invisible å’Œ goneã€‚å¯ä»¥é€šè¿‡ä»£ç  setVisibility() æ–¹æ³•ä¼ å…¥ View.VISIBLEã€View.INVISIBLE å’Œ View.GONEã€‚</li>
<li>style å¯ä»¥å°†åœ†å½¢è¿›åº¦æ¡æ”¹ä¸ºæ°´å¹³è¿›åº¦æ¡ã€‚</li>
<li>android:max ç»™è¿›åº¦æ¡è®¾ç½®æœ€å¤§å€¼ï¼Œç„¶ååœ¨ä»£ç ä¸­åŠ¨æ€åœ°æ›´æ”¹è¿›åº¦æ¡çš„è¿›åº¦ã€‚</li>
</ul>
<p><strong>AlertDialog</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClicke</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getId</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">AlertDialog</span>.<span style="color:#e06c75">Builder</span> <span style="color:#e06c75">dialog</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">AlertDialog</span>.<span style="color:#e06c75">Builder</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dialog</span>.<span style="color:#e06c75">setTitle</span>(<span style="color:#98c379">&#34;This is Dialog&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dialog</span>.<span style="color:#e06c75">setMessage</span>(<span style="color:#98c379">&#34;Something important.&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dialog</span>.<span style="color:#e06c75">setCancelable</span>(<span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dialog</span>.<span style="color:#e06c75">setPositiveButton</span>(<span style="color:#98c379">&#34;ok&#34;</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">DialogInterface</span>.<span style="color:#e06c75">OnClickLisener</span>(){
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">DialogInterface</span> <span style="color:#e06c75">dialog</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">which</span>){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dialog</span>.<span style="color:#e06c75">setNegativeButton</span>(<span style="color:#98c379">&#34;Cancel&#34;</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">DialogInterface</span>.<span style="color:#e06c75">onClickLisener</span>(){
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">DialogInterface</span> <span style="color:#e06c75">dialog</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">which</span>){
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dialog</span>.<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p><strong>ProgressDialog</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClicke</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getId</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ProgressDialog</span> <span style="color:#e06c75">progressDialog</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ProgressDialog</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>)ï¼›
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">progressDialog</span>.<span style="color:#e06c75">setTitle</span>(<span style="color:#98c379">&#34;This is ProgressDialog&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">progressDialog</span>.<span style="color:#e06c75">setMessage</span>(<span style="color:#98c379">&#34;Loading...&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">progressDialog</span>.<span style="color:#e06c75">setCancelable</span>(<span style="color:#e5c07b">true</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">progressDialog</span>.<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å¸¸è§å¸ƒå±€">å¸¸è§å¸ƒå±€</h3>
<p><strong>çº¿æ€§å¸ƒå±€</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;top&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button1&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button2&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;bottom&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button3&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;EditText</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/input_message&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:hint=</span><span style="color:#98c379">&#34;Type something&#34;</span> <span style="color:#e06c75">/&gt;</span>    
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><ul>
<li>android:orientation æŒ‡å®šæ’åˆ—æ–¹å‘ï¼Œæ°´å¹³å°±æ˜¯å‚æ•° verticalï¼Œå‚ç›´å°±æ˜¯å‚æ•° horizontalã€‚</li>
<li>android:layout_gravity æŒ‡å®šæ§ä»¶åœ¨å¸ƒå±€ä¸­çš„å¯¹é½æ–¹å¼ã€‚</li>
<li>android:layout_weight å±æ€§å€¼ä¸º 1ï¼Œè¡¨ç¤ºåœ¨æ°´å¹³æ–¹å‘å®½åº¦çš„å æ¯”ï¼Œå› ä¸ºçº¿æ€§å¸ƒå±€ä¼šå°†æ‰€æœ‰çš„ layout_weight åŠ èµ·æ¥ç„¶åå†æ¯”ä¸Šæ¯ä¸ªç©ºé—´çš„å®½åº¦ï¼Œæœ€ååˆ’åˆ†æ§ä»¶ä½ç½®ã€‚</li>
</ul>
<p><strong>ç›¸å¯¹å¸ƒå±€</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;RelativeLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentLeft=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentTop=</span><span style="color:#98c379">&#34;true&#34;</span>    
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button1&#34;</span> <span style="color:#e06c75">/&gt;</span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentRight=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentTop=</span><span style="color:#98c379">&#34;true&#34;</span>   
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button2&#34;</span> <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_centerParent=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button3&#34;</span> <span style="color:#e06c75">/&gt;</span>     
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button4&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentBottom=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentLeft=</span><span style="color:#98c379">&#34;true&#34;</span>   
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button4&#34;</span> <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button5&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentBottom=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentRight=</span><span style="color:#98c379">&#34;true&#34;</span>   
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button5&#34;</span> <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/RelativeLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;RelativeLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>          <span style="color:#e06c75">android:layout_centerParent=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button3&#34;</span> <span style="color:#e06c75">/&gt;</span>   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_above=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_toLeftOf=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>     
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button1&#34;</span> <span style="color:#e06c75">/&gt;</span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_above=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_toRightOf=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>   
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button2&#34;</span> <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button4&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_below=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_toLeftOf=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>   
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button4&#34;</span> <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button5&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_below=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_toRightOf=</span><span style="color:#98c379">&#34;@id/button3&#34;</span>     
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button5&#34;</span> <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/RelativeLayout&gt;</span>
</span></span></code></pre></div><ul>
<li>android:layout_alignLeft è®©ä¸€ä¸ªæ§ä»¶çš„å·¦è¾¹ç¼˜å’Œå¦ä¸€ä¸ªæ§ä»¶çš„å·¦è¾¹ç¼˜å¯¹é½ã€‚</li>
<li>android:layout_alignRight è®©ä¸€ä¸ªæ§ä»¶çš„å³è¾¹ç¼˜å’Œå¦ä¸€ä¸ªæ§ä»¶çš„å³è¾¹ç¼˜å¯¹é½ã€‚</li>
<li>android:layout_alignTop è®©ä¸€ä¸ªæ§ä»¶çš„ä¸Šè¾¹ç¼˜å’Œå¦ä¸€ä¸ªæ§ä»¶çš„ä¸Šè¾¹ç¼˜å¯¹é½ã€‚</li>
<li>android:layout_alignBottom è®©ä¸€ä¸ªæ§ä»¶çš„ä¸‹è¾¹ç¼˜å’Œå¦ä¸€ä¸ªæ§ä»¶çš„ä¸‹è¾¹ç¼˜å¯¹é½ã€‚</li>
</ul>
<p><strong>å¸§å¸ƒå±€</strong></p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;FrameLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/text_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;right&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is a TextView&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/image_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layoit_gravity=</span><span style="color:#98c379">&#34;left&#34;</span>       
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:src=</span><span style="color:#98c379">&#34;@ipmap/ic_launcher&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/FrameLayout&gt;</span>
</span></span></code></pre></div><p><strong>ç™¾åˆ†æ¯”å¸ƒå±€</strong></p>
<p>åœ¨ build.gradle.kts ä¾èµ–ä¸­æ·»åŠ ç™¾åˆ†æ¯”å¸ƒå±€ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#e06c75">implementation</span> (<span style="color:#98c379">&#34;androidx.percentlayout:percentlayout:1.0.0&#34;</span>)
</span></span></code></pre></div><p>æˆ‘ä»¬ä¿®æ”¹å¸ƒå±€ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;androidx.percentlayout.widget.PercentFrameLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button1&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button 1&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;left|top&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_widthPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_heightPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button2&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button 2&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;right|top&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_widthPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_heightPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button3&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button 3&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;left|bottom&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_widthPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_heightPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button4&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button 4&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;right|bottom&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_widthPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">app:layout_heightPercent=</span><span style="color:#98c379">&#34;50%&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/androidx.percentlayout.widget.PercentFrameLayout&gt;</span>
</span></span></code></pre></div><h3 id="è‡ªå®šä¹‰æ§ä»¶">è‡ªå®šä¹‰æ§ä»¶</h3>
<p>æˆ‘ä»¬æ‰€ä½¿ç”¨çš„æ§ä»¶éƒ½æ˜¯ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ª View çš„ï¼Œè€Œæ‰€æœ‰å¸ƒå±€å‘¢åˆæ˜¯ç›´æ¥æˆ–é—´æ¥ç»§æ‰¿è‡ª ViewGroupçš„ã€‚æ¨¡ä»¿è‹¹æœçš„ title æ ç›®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;@drawable/title_bg&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/title_back&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_margin=</span><span style="color:#98c379">&#34;5dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;@drawable/back_bg&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Back&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:textColor=</span><span style="color:#98c379">&#34;#fff&#34;</span>    <span style="color:#e06c75">/&gt;</span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/title_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span>      
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Title Text&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:textColor=</span><span style="color:#98c379">&#34;#fff&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">adnroid:textSize=</span><span style="color:#98c379">&#34;24sp&#34;</span>      <span style="color:#e06c75">/&gt;</span>   
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/title_edit&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_margin=</span><span style="color:#98c379">&#34;5dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;@drawable/edit_bg&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Edit&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:textColor=</span><span style="color:#98c379">&#34;#fff&#34;</span>    <span style="color:#e06c75">/&gt;</span> 
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;include</span> <span style="color:#e06c75">layout=</span><span style="color:#98c379">&#34;@layout/title&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æœ€åï¼Œæˆ‘ä»¬éœ€è¦å°†ç³»ç»Ÿè‡ªå¸¦çš„æ ‡é¢˜æ éšè—æ‰ï¼Œæˆ‘ä»¬åœ¨ OnCreate() ä¸­åŠ å…¥ä»¥ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">ActionBar</span> <span style="color:#e06c75">actionbar</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getSupportActionBar</span>();
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#e06c75">actionbar</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">actionbar</span>.<span style="color:#e06c75">hide</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä¸Šè¿°å†…å®¹é‡Œï¼Œæˆ‘ä»¬å¼•å…¥äº†å¸ƒå±€ï¼Œä½†æ˜¯å¦‚æœè¦æ›´é«˜æ•ˆåœ°å¤„ç†æ§ä»¶å“åº”äº‹ä»¶ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡è‡ªå®šä¹‰æ§ä»¶çš„æ–¹å¼æ¥è§£å†³ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">TtitleLayout</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">LinearLayout</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">TitleLayout</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">AttributeSet</span> <span style="color:#e06c75">attrs</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>(<span style="color:#e06c75">context</span>, <span style="color:#e06c75">attrs</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å¯ä»¥åŠ¨æ€åœ°åŠ è½½å¸ƒå±€æ–‡ä»¶</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">context</span>).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">title</span>, <span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// æ³¨å†Œç‚¹å‡»äº‹ä»¶</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">titleBack</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">title_back</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">titleEdit</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">title_edit</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">titleBack</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>           <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>           <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>               ((<span style="color:#e06c75">Aticity</span>)<span style="color:#e06c75">getContext</span>).<span style="color:#e06c75">finish</span>();
</span></span><span style="display:flex;"><span>           } 
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">titleEdit</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>           <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>           <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>               <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">getContext</span>(), <span style="color:#98c379">&#34;You clicked Edit button&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>           } 
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;com.example.uicustomviews.TitleLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><h3 id="æœ€å¸¸ç”¨å’Œæœ€éš¾ç”¨çš„æ§ä»¶">æœ€å¸¸ç”¨å’Œæœ€éš¾ç”¨çš„æ§ä»¶</h3>
<p>ListView å¯ä»¥å±•ç¤ºå¤§é‡çš„æ•°æ®ï¼Œè­¬å¦‚QQèŠå¤©è®°å½•è¿™äº›é•¿ä¿¡æ¯ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;ListView</span>
</span></span><span style="display:flex;"><span>              <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/list_view&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>              <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬ç”¨ä¸€ä¸ª data æ•°ç»„æ¥æµ‹è¯•ï¼Œé€šè¿‡é€‚é…å™¨æ¥ä¼ è¾“å®Œæˆã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">=</span> {<span style="color:#98c379">&#34;Apple&#34;</span>, <span style="color:#98c379">&#34;Banna&#34;</span>,<span style="color:#98c379">&#34;Orange&#34;</span>, <span style="color:#98c379">&#34;Cherry&#34;</span>};
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ArrayAdapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">adapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayAdapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">&gt;</span>(
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">android</span>.<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">simple_list_item_1</span>, <span style="color:#e06c75">data</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ListView</span> <span style="color:#e06c75">listView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ListView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">list_view</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">listView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">adapter</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>å½“ç„¶ï¼Œå¦‚æœåªæ˜¯æ˜¾ç¤ºæ–‡æœ¬çš„ ListView å°±å¤ªå•è°ƒäº†ï¼Œæˆ‘ä»¬å¯¹ ListView ç•Œé¢è¿›è¡Œä¸€äº›å®šåˆ¶ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">Fruit</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">imageId</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">Fruit</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">imageId</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">this</span>.<span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">name</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">this</span>.<span style="color:#e06c75">imageId</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">imageId</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getName</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#e06c75">name</span>;
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getImageId</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#e06c75">imageId</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬ä¸º ListView çš„å­é¡¹æŒ‡å®šä¸€ä¸ªæˆ‘ä»¬å®šä¹‰çš„å¸ƒå±€ï¼Œåœ¨ layout ä¸‹æ–°å»º fruit_item.xmlã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/fruit_image&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_marginLeft=</span><span style="color:#98c379">&#34;10dp&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/fruit_name&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">android:layout_marginLeft=</span><span style="color:#98c379">&#34;10dp&#34;</span> <span style="color:#e06c75">/&gt;</span>    
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>åˆ›å»ºä¸€ä¸ªè‡ªå®šä¹‰çš„é€‚é…å™¨ FruitAdapater æ¥è¿›è¡Œæ•°æ®çš„å±•ç¤ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">FruitAdapter</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">ArrayAdapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">resourceId</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">FruitAdapter</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">textViewResourceId</span>, <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">objects</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>(<span style="color:#e06c75">context</span>, <span style="color:#e06c75">textViewResourceId</span>, <span style="color:#e06c75">objects</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">resourceId</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">textViewResourceId</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">getView</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>, <span style="color:#e06c75">View</span> <span style="color:#e06c75">convertView</span>, <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getItem</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">resourceId</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ImageView</span> <span style="color:#e06c75">fruitImage</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_image</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">fruitName</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_name</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">fruitImage</span>.<span style="color:#e06c75">setImageResource</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getImageId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">furitName</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ä¸‹æ¥æˆ‘ä»¬åœ¨ MainActivity ä¸­ä¿®æ”¹ä¸€ä¸‹æˆ‘ä»¬çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">fruitList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">initFruits</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FruitAdapter</span> <span style="color:#e06c75">adapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">FruitAdapter</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">fruit_item</span>, <span style="color:#e06c75">fruitList</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ListView</span> <span style="color:#e06c75">listView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ListView</span>)<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">list_view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">listView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">adapter</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">initFruits</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;</span> <span style="color:#e06c75">50</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">apple</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Fruit</span>(<span style="color:#98c379">&#34;Apple&#34;</span>, <span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">apple_pic</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">apple</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>ListView æœ‰å¾ˆå¤šç»†èŠ‚æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå…¶ä¸­è¿è¡Œæ•ˆç‡å°±æ˜¯å¾ˆé‡è¦çš„ä¸€ç‚¹ã€‚åœ¨ FruitAdapter çš„ getView() æ–¹æ³•ä¸­ï¼Œæ¯æ¬¡éƒ½è®²å¸ƒå±€é‡æ–°åŠ è½½äº†ä¸€éï¼Œå½“ ListView å¿«é€Ÿæ»šåŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šæˆä¸ºæ€§èƒ½çš„ç“¶é¢ˆã€‚</p>
<p>æˆ‘ä»¬å‘ç° getView() æ–¹æ³•ä¸­ï¼Œæœ‰ä¸€ä¸ª convertView å‚æ•°ï¼Œå®ƒç”¨äºå°†ä¹‹å‰åŠ è½½å¥½çš„å¸ƒå±€è¿›è¡Œç¼“å­˜ã€‚æ‰€ä»¥æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ FruitAdapter ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">getView</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>, <span style="color:#e06c75">View</span> <span style="color:#e06c75">convertView</span>, <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getItem</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">convertView</span> <span style="color:#56b6c2">==</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">resourceId</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">convertView</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ImageView</span> <span style="color:#e06c75">fruitImage</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_image</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">fruitName</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_name</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">fruitImage</span>.<span style="color:#e06c75">setImageResource</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getImageId</span>());
</span></span><span style="display:flex;"><span>     <span style="color:#e06c75">furitName</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ç€ï¼Œæˆ‘ä»¬çš„ä»£ç è¿˜æ˜¯å¯ä»¥ä¼˜åŒ–çš„ï¼Œå› ä¸ºæ¯æ¬¡ getView() æ–¹æ³•ä¸­è¿˜æ˜¯ä¼šè°ƒç”¨ View çš„ findViewById() æ–¹æ³•æ¥è·å–ä¸€æ¬¡æ§ä»¶çš„å®ä¾‹ã€‚æˆ‘ä»¬å¯ä»¥å€ŸåŠ© ViewHolder æ¥å¯¹è¿™éƒ¨åˆ†æ€§èƒ½è¿›è¡Œä¼˜åŒ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">getView</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>, <span style="color:#e06c75">View</span> <span style="color:#e06c75">convertView</span>, <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getItem</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">viewHolder</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">convertView</span> <span style="color:#56b6c2">==</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">resourceId</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">viewHolder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ViewHolder</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">viewHolder</span>.<span style="color:#e06c75">fruitImage</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_image</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">viewHolder</span>.<span style="color:#e06c75">furitName</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_name</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">view</span>.<span style="color:#e06c75">setTag</span>(<span style="color:#e06c75">viewHolder</span>);    <span style="color:#7f848e">// å­˜å‚¨ ViewHolder</span>
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">convertView</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">viewHolder</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ViewHolder</span>)<span style="color:#e06c75">view</span>.<span style="color:#e06c75">getTag</span>();        <span style="color:#7f848e">// é‡æ–°è·å– ViewHolder</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">viewHolder</span>.<span style="color:#e06c75">fruitImage</span>.<span style="color:#e06c75">setImageResource</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getImageId</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">viewHodler</span>.<span style="color:#e06c75">fruitName</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">class</span> <span style="color:#e5c07b">ViewHolder</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ImageView</span> <span style="color:#e06c75">fruitImage</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">fruitName</span>;
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>é™¤äº†æ•°æ®çš„å±•ç¤ºï¼ŒListView çš„å­é¡¹è¿˜å¾—æœ‰ç‚¹å‡»çš„äº‹ä»¶ï¼Œè®©æˆ‘ä»¬ä¿®æ”¹ä¸‹ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">initFruits</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">FruitAdapter</span> <span style="color:#e06c75">adapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">FruitAdapter</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">fruit_item</span>, <span style="color:#e06c75">fruitList</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ListView</span> <span style="color:#e06c75">listView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ListView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">list_view</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">listView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">adapter</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">lsitView</span>.<span style="color:#e06c75">setOnItemClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">AdapterView</span>.<span style="color:#e06c75">OnItemClickListener</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onItemClick</span>(<span style="color:#e06c75">AdapterView</span><span style="color:#56b6c2">&lt;?&gt;</span> <span style="color:#e06c75">parent</span>, <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>, <span style="color:#e5c07b">long</span> <span style="color:#e06c75">id</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">fruitList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>(), <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    });
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="æ›´å¼ºå¤§çš„æ»šåŠ¨æ§ä»¶">æ›´å¼ºå¤§çš„æ»šåŠ¨æ§ä»¶</h3>
<p>Android æä¾›äº†ä¸€ä¸ªæ›´åŠ å¼ºå¤§çš„æ»šåŠ¨æ§ä»¶ RecyclerViewã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬éœ€è¦æ·»åŠ ä¾èµ–:</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#e06c75">implementation</span> (<span style="color:#98c379">&#34;androidx.recyclerview:recyclerview:1.1.0&#34;</span>)
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ activity_main.xml çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;androidx.recyclerview.widget.RecyclerView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/recycler_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>åŒæ ·ï¼Œæˆ‘ä»¬ä¹Ÿå‡†å¤‡å¥½ Fruit ç±» å’Œ fruit_item.xml æ–‡ä»¶ã€‚</p>
<p>å†™ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¸º RecyclerView å‡†å¤‡ä¸€ä¸ªé€‚é…å™¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.recyclerviewtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.LayoutInflater</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.ViewGroup</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.ImageView</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.TextView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">FruitAdapter</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">Adapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">FruitAdapter</span>.<span style="color:#e06c75">ViewHolder</span><span style="color:#56b6c2">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">mFruitList</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">static</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ViewHolder</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">ViewHolder</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ImageView</span> <span style="color:#e06c75">fruitImage</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">fruitName</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">ViewHolder</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">super</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitImage</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_image</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitName</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_name</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">FruitAdapter</span>(<span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">fruitList</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">mFruitList</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">fruitList</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#61afef;font-weight:bold">onCreateViewHolder</span>(<span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">viewType</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">parent</span>.<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">fruit_item</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ViewHolder</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">holder</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onBindViewHolder</span>(<span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mFruitList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;F_pos&#34;</span>, <span style="color:#e06c75">String</span>.<span style="color:#e06c75">valueOf</span>(<span style="color:#e06c75">position</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">fruitImage</span>.<span style="color:#e06c75">setImageResource</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getImageId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">fruitName</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getItemCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">mFruitList</span>.<span style="color:#e06c75">size</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ MainActivity çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.recyclerviewtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.LinearLayoutManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">fruitList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// åˆå§‹åŒ–æ•°æ®</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">initFruits</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">RecyclerView</span> <span style="color:#e06c75">recyclerView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">RecyclerView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">recycler_view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LinearLayoutManager</span> <span style="color:#e06c75">linearLayoutManager</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">LinearLayoutManager</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å°† recyclerView æ”¾å…¥çº¿æ€§å¸ƒå±€ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setLayoutManager</span>(<span style="color:#e06c75">linearLayoutManager</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FruitAdapter</span> <span style="color:#e06c75">fruitAdapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">FruitAdapter</span>(<span style="color:#e06c75">fruitList</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å°†é€‚é…å™¨åŠ è½½åˆ° recyclerView ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">fruitAdapter</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">initFruits</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;</span> <span style="color:#e06c75">30</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">apple</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Fruit</span>(<span style="color:#98c379">&#34;Apple&#34;</span>, <span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">ff1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">apple</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">cherry</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Fruit</span>(<span style="color:#98c379">&#34;Cherry &#34;</span>, <span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">aa1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">cherry</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>æˆ‘ä»¬ç”¨ RecyclerView åšæ¨ªå‘æ»šåŠ¨çš„æ•ˆæœã€‚</p>
<p>æˆ‘ä»¬å°† fruit_item çš„å¸ƒå±€è¿›è¡Œä¸€äº›ä¿®æ”¹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;100dp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/fruit_image&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_horizontal&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/fruit_name&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_marginTop=</span><span style="color:#98c379">&#34;10dp&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬å¯¹ MainActivity è¿›è¡Œä¸€ç‚¹å°ä¿®æ”¹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.recyclerviewtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.LinearLayoutManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">fruitList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// åˆå§‹åŒ–æ•°æ®</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">initFruits</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">RecyclerView</span> <span style="color:#e06c75">recyclerView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">RecyclerView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">recycler_view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LinearLayoutManager</span> <span style="color:#e06c75">linearLayoutManager</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">LinearLayoutManager</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// è®¾ç½®ä¸ºæ°´å¹³</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">linearLayoutManager</span>.<span style="color:#e06c75">setOrientation</span>(<span style="color:#e06c75">LinearLayoutManager</span>.<span style="color:#e06c75">HORIZONTAL</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å°† recyclerView æ”¾å…¥çº¿æ€§å¸ƒå±€ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setLayoutManager</span>(<span style="color:#e06c75">linearLayoutManager</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FruitAdapter</span> <span style="color:#e06c75">fruitAdapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">FruitAdapter</span>(<span style="color:#e06c75">fruitList</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å°†é€‚é…å™¨åŠ è½½åˆ° recyclerView ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">fruitAdapter</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">initFruits</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;</span> <span style="color:#e06c75">30</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">apple</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Fruit</span>(<span style="color:#98c379">&#34;Apple&#34;</span>, <span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">ff1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">apple</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>ä¹‹æ‰€ä»¥ RecyclerView èƒ½å¤Ÿè½»æ˜“åœ°å®Œæˆè¿™äº›ä»»åŠ¡ï¼Œä¸»è¦è¿˜æ˜¯å¾—ç›Šäº LayoutManager ï¼Œå®ƒæä¾›äº†ä¸€å¥—å¯æ‹“å±•çš„å¸ƒå±€æ’åˆ—æ¥å£ã€‚</p>
<p>é‚£ä¹ˆé™¤äº† LinearLayoutManager ä¹‹å¤–ï¼ŒRecyclerView è¿˜ç»™æˆ‘ä»¬æä¾›äº† GridLayoutManager å’Œ StaggeredGridLayoutManager è¿™ä¸¤ç§å†…ç½®çš„å¸ƒå±€æ’åˆ—æ–¹å¼ã€‚GridLayoutManager ç”¨äºå®ç°ç½‘æ ¼å¸ƒå±€ï¼ŒStaggeredGridLayoutManager ç”¨äºå®ç°ç€‘å¸ƒæµå¸ƒå±€ã€‚</p>
<p>æˆ‘ä»¬è¿™é‡Œçœ‹ä¸€ä¸‹ç€‘å¸ƒæµå¸ƒå±€æ˜¯æ€ä¹ˆåšçš„ã€‚</p>
<p>é¦–å…ˆï¼Œæˆ‘ä»¬è¿˜æ˜¯ä¿®æ”¹ä¸€ä¸‹ fruit_item.xml ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>    
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_margin=</span><span style="color:#98c379">&#34;5dp&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/fruit_image&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_horizontal&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/fruit_name&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;left&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_marginTop=</span><span style="color:#98c379">&#34;10dp&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æ¥ç€ä¿®æ”¹ MainActivity ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.recyclerviewtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.LinearLayoutManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.StaggeredGridLayoutManager</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.Random</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">fruitList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// åˆå§‹åŒ–æ•°æ®</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">initFruits</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">RecyclerView</span> <span style="color:#e06c75">recyclerView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">RecyclerView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">recycler_view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">StaggeredGridLayoutManager</span> <span style="color:#e06c75">staggeredGridLayoutManager</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">StaggeredGridLayoutManager</span>(<span style="color:#e06c75">3</span>, <span style="color:#e06c75">StaggeredGridLayoutManager</span>.<span style="color:#e06c75">VERTICAL</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å°† recyclerView æ”¾å…¥ç€‘å¸ƒå¸ƒå±€ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setLayoutManager</span>(<span style="color:#e06c75">staggeredGridLayoutManager</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FruitAdapter</span> <span style="color:#e06c75">fruitAdapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">FruitAdapter</span>(<span style="color:#e06c75">fruitList</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å°†é€‚é…å™¨åŠ è½½åˆ° recyclerView ä¸­</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">fruitAdapter</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">initFruits</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;</span> <span style="color:#e06c75">30</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">apple</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Fruit</span>(<span style="color:#e06c75">getRandomLengthName</span>(<span style="color:#98c379">&#34;Apple&#34;</span>), <span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">ff1</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">apple</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getRandomLengthName</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Random</span> <span style="color:#e06c75">random</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Random</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">length</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">random</span>.<span style="color:#e06c75">nextInt</span>(<span style="color:#e06c75">20</span>)<span style="color:#56b6c2">+</span><span style="color:#e06c75">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">StringBuilder</span> <span style="color:#e06c75">builder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">StringBuilder</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;</span> <span style="color:#e06c75">length</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">append</span>(<span style="color:#e06c75">name</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜è¦ç»™ RecyclerView è®¾ç½®ç‚¹å‡»äº‹ä»¶ã€‚ä½†æ˜¯ RecyclerView å¹¶æ²¡æœ‰æä¾›ç±»ä¼¼äº setOnItemClickListener() è¿™æ ·æ³¨å†Œç›‘å¬å™¨æ–¹æ³•ï¼Œéœ€è¦æˆ‘ä»¬è‡ªå·±ç»™å­é¡¹å…·ä½“çš„ View å»æ³¨å†Œç‚¹å‡»äº‹ä»¶ã€‚</p>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ FruitAdapter ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.recyclerviewtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.LayoutInflater</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.ViewGroup</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.ImageView</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.TextView</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">FruitAdapter</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">Adapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">FruitAdapter</span>.<span style="color:#e06c75">ViewHolder</span><span style="color:#56b6c2">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">mFruitList</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">static</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ViewHolder</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">ViewHolder</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">fruitView</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ImageView</span> <span style="color:#e06c75">fruitImage</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">fruitName</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">ViewHolder</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">super</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitView</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitImage</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ImageView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_image</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">fruitName</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">fruit_name</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">FruitAdapter</span>(<span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Fruit</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">fruitList</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">mFruitList</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">fruitList</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#61afef;font-weight:bold">onCreateViewHolder</span>(<span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">viewType</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">parent</span>.<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">fruit_item</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">final</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ViewHolder</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">fruitView</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">getAdapterPosition</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mFruitList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getContext</span>(), <span style="color:#98c379">&#34;you clicked view&#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>(), <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">fruitImage</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>(){
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">getAdapterPosition</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mFruitList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">v</span>.<span style="color:#e06c75">getContext</span>(), <span style="color:#98c379">&#34;you clicked image&#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>(), <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">holder</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onBindViewHolder</span>(<span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Fruit</span> <span style="color:#e06c75">fruit</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mFruitList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;F_pos&#34;</span>, <span style="color:#e06c75">String</span>.<span style="color:#e06c75">valueOf</span>(<span style="color:#e06c75">position</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">fruitImage</span>.<span style="color:#e06c75">setImageResource</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getImageId</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">fruitName</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">fruit</span>.<span style="color:#e06c75">getName</span>());
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getItemCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">mFruitList</span>.<span style="color:#e06c75">size</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="ç•Œé¢å®æˆ˜-ç®€å•èŠå¤©ç•Œé¢">ç•Œé¢å®æˆ˜-ç®€å•èŠå¤©ç•Œé¢</h3>
<p>æˆ‘ä»¬åˆ›å»º UIBaseProject é¡¹ç›®æ¥å¼€å§‹æˆ‘ä»¬çš„å®è·µã€‚</p>
<p>å¼€å§‹ä¹‹å‰ï¼Œæˆ‘ä»¬å­¦ä¹ ä¸€ä¸‹æ€ä¹ˆåˆ¶ä½œ Nine-Patch å›¾ç‰‡ã€‚å®ƒæ˜¯ä¸€ç§è¢«å¤„ç†è¿‡çš„ png å›¾ç‰‡ï¼Œèƒ½å¤ŸæŒ‡å®šå“ªäº›åŒºåŸŸå¯ä»¥è¢«æ‹‰ä¼¸ã€å“ªäº›åŒºåŸŸä¸å¯ä»¥ã€‚</p>
<p>ç°åœ¨æˆ‘ä»¬æœ‰ä¸€å¼ å›¾ç‰‡æ˜¯ message_left.png</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/03/30/Al8hTovyBLqNHSD.png" >
		<img src="https://s2.loli.net/2024/03/30/Al8hTovyBLqNHSD.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<p>æˆ‘ä»¬å°†å›¾ç‰‡æ”¾å…¥ drawable æ–‡ä»¶ä¸­ï¼Œç„¶åå°†å›¾ç‰‡åç¼€æ”¹ä¸º <code>.9.png</code>ï¼Œç‚¹å‡»åè¿›å…¥å›¾ç‰‡åˆ¶ä½œè§†å›¾ã€‚</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/03/30/fyiNVZlp6HTdYOj.png" >
		<img src="https://s2.loli.net/2024/03/30/fyiNVZlp6HTdYOj.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<p>ç„¶åæˆ‘ä»¬ç»™å›¾åƒå››å‘¨ç”»ä¸Šå°é»‘è¾¹æ¥è®¾ç½®å¯ä»¥æ‹–æ‹½å»¶ä¼¸åˆ°åœ°æ–¹ã€‚</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/03/30/HRlIqsFGdrvogNi.png" >
		<img src="https://s2.loli.net/2024/03/30/HRlIqsFGdrvogNi.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<p>æˆ‘ä»¬å°†å›¾ç‰‡åè½¬ï¼Œç”¨åŒæ ·çš„æ–¹æ³•å¾—åˆ° message_right.9.pngã€‚</p>
<hr>
<p>å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹ç¼–å†™äº†ã€‚</p>
<p>é¦–å…ˆè¿˜æ˜¯å¯¼å…¥ recyclerview çš„ä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#e06c75">implementation</span> (<span style="color:#98c379">&#34;androidx.recyclerview:recyclerview:1.1.0&#34;</span>)
</span></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹ä¸»ç•Œé¢ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;#d8e0e8&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;androidx.recyclerview.widget.RecyclerView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/msg_recycler_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;EditText</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/input_text&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:hint=</span><span style="color:#98c379">&#34;Type something here&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:maxLines=</span><span style="color:#98c379">&#34;2&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/send&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Send&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬ç”¨ä¸€ä¸ª EditText æ¥ç»™ç”¨æˆ·è¿›è¡Œè¾“å…¥ï¼ŒButton æ¥å‘é€ä¿¡æ¯ï¼Œè€Œ RecyclerView å°±æ˜¯ç”¨æ¥æ˜¾ç¤ºèŠå¤©çš„ä¿¡æ¯å†…å®¹ã€‚</p>
<p>ç„¶åï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸‹ Msg å®ä½“ç±»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.uibasepratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">Msg</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#c678dd">final</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">TYPE_RECEIVED</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#c678dd">final</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">TYPE_SENT</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">1</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">content</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">type</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">Msg</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">content</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">type</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">content</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">content</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">type</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">type</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getContent</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">content</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getType</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">type</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å…¶ä¸­ï¼Œtype è¡¨ç¤ºæ¶ˆæ¯éƒ½ç±»å‹ï¼ŒTYPE_RECEIVED è¡¨ç¤ºè¿™æ˜¯ä¸€æ¡æ”¶åˆ°çš„ä¿¡æ¯ï¼ŒTYPE_SENT è¡¨ç¤ºè¿™æ˜¯ä¸€æ¡å‘å‡ºçš„æ¶ˆæ¯ã€‚</p>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬å†™ä¸€ä¸‹ RecyclerView å­é¡¹çš„å¸ƒå±€ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/left_layout&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;left&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;@drawable/message_left&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/left_msg&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_margin=</span><span style="color:#98c379">&#34;10dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:textColor=</span><span style="color:#98c379">&#34;#fff&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/right_layout&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;right&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;@drawable/message_right&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/right_msg&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_margin=</span><span style="color:#98c379">&#34;10dp&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åˆ›å»º RecycleView çš„é€‚é…å™¨ï¼Œæ–°å»ºç±» MsgAdapterï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.uibasepratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.LayoutInflater</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.ViewGroup</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.LinearLayout</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.TextView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MsgAdapter</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">Adapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">MsgAdapter</span>.<span style="color:#e06c75">ViewHolder</span><span style="color:#56b6c2">&gt;</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Msg</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">mMsgList</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">static</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ViewHolder</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">ViewHolder</span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LinearLayout</span> <span style="color:#e06c75">leftLayout</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LinearLayout</span> <span style="color:#e06c75">rightLayout</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">leftMsg</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">rightMsg</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">ViewHolder</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">super</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">leftLayout</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">LinearLayout</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">left_layout</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">rightLayout</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">LinearLayout</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">right_layout</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">leftMsg</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">left_msg</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">rightMsg</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">right_msg</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">MsgAdapter</span>(<span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Msg</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">msgList</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">mMsgList</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">msgList</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@NonNull</span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#61afef;font-weight:bold">onCreateViewHolder</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">viewType</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">parent</span>.<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">msg_item</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ViewHolder</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onBindViewHolder</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Msg</span> <span style="color:#e06c75">msg</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mMsgList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">msg</span>.<span style="color:#e06c75">getType</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">Msg</span>.<span style="color:#e06c75">TYPE_RECEIVED</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#7f848e">// å¦‚æœæ˜¯æ”¶åˆ°æ¶ˆæ¯å°±æ˜¾ç¤ºå·¦è¾¹å¸ƒå±€çš„ä¿¡æ¯ï¼Œå°†å³è¾¹å¸ƒå±€ä¿¡æ¯éšè—</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">leftLayout</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">VISIBLE</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">rightLayout</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">GONE</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">leftMsg</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">msg</span>.<span style="color:#e06c75">getContent</span>());
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">else</span> <span style="color:#c678dd">if</span> (<span style="color:#e06c75">msg</span>.<span style="color:#e06c75">getType</span>() <span style="color:#56b6c2">==</span> <span style="color:#e06c75">Msg</span>.<span style="color:#e06c75">TYPE_SENT</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#7f848e">// å¦‚æœæ˜¯å‘å‡ºæ¶ˆæ¯å°±æ˜¾ç¤ºå³è¾¹å¸ƒå±€çš„ä¿¡æ¯ï¼Œå°†å·¦è¾¹å¸ƒå±€ä¿¡æ¯éšè—</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">rightLayout</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">VISIBLE</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">leftLayout</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">GONE</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">rightMsg</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">msg</span>.<span style="color:#e06c75">getContent</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getItemCount</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">mMsgList</span>.<span style="color:#e06c75">size</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æœ€åæˆ‘ä»¬åœ¨ MainAcitvity å°†æˆ‘ä»¬çš„ä»£ç å†™ä¸Šï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.uibasepratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.LinearLayoutManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.EditText</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Msg</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">msgList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">EditText</span> <span style="color:#e06c75">inputText</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">Button</span> <span style="color:#e06c75">send</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">RecyclerView</span> <span style="color:#e06c75">msgRecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">MsgAdapter</span> <span style="color:#e06c75">adapter</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// åˆå§‹åŒ–æ•°æ®å’Œæ§ä»¶ç»‘å®š</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">initMsgs</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">inputText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">input_text</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">send</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">send</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">msgRecyclerView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">RecyclerView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">msg_recycler_view</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// çº¿æ€§ç®¡ç†å™¨å’Œé€‚é…å™¨</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LinearLayoutManager</span> <span style="color:#e06c75">layoutManager</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">LinearLayoutManager</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">msgRecyclerView</span>.<span style="color:#e06c75">setLayoutManager</span>(<span style="color:#e06c75">layoutManager</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">adapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">MsgAdapter</span>(<span style="color:#e06c75">msgList</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">msgRecyclerView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">adapter</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// è®¾ç½®ç‚¹å‡»äº‹ä»¶</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">send</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">String</span> <span style="color:#e06c75">content</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">inputText</span>.<span style="color:#e06c75">getText</span>().<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">if</span> (<span style="color:#56b6c2">!</span><span style="color:#98c379">&#34;&#34;</span>.<span style="color:#e06c75">equals</span>(<span style="color:#e06c75">content</span>)){
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">Msg</span> <span style="color:#e06c75">msg</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Msg</span>(<span style="color:#e06c75">content</span>, <span style="color:#e06c75">Msg</span>.<span style="color:#e06c75">TYPE_SENT</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">msgList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">msg</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#7f848e">// æœ‰æ–°ä¿¡æ¯çš„æ—¶å€™åˆ·æ–°</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">adapter</span>.<span style="color:#e06c75">notifyItemInserted</span>(<span style="color:#e06c75">msgList</span>.<span style="color:#e06c75">size</span>() <span style="color:#56b6c2">-</span> <span style="color:#e06c75">1</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#7f848e">// å®šä½åˆ°æœ€åä¸€è¡Œ</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">msgRecyclerView</span>.<span style="color:#e06c75">scrollToPosition</span>(<span style="color:#e06c75">msgList</span>.<span style="color:#e06c75">size</span>() <span style="color:#56b6c2">-</span> <span style="color:#e06c75">1</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#7f848e">// æ¸…ç©ºè¾“å…¥ç‹‚å†…å®¹</span>
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">inputText</span>.<span style="color:#e06c75">setText</span>(<span style="color:#98c379">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">initMsgs</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Msg</span> <span style="color:#e06c75">msg1</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Msg</span>(<span style="color:#98c379">&#34;Hello man.&#34;</span>, <span style="color:#e06c75">Msg</span>.<span style="color:#e06c75">TYPE_RECEIVED</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">msgList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">msg1</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Msg</span> <span style="color:#e06c75">msg2</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Msg</span>(<span style="color:#98c379">&#34;Hello.You Good?&#34;</span>, <span style="color:#e06c75">Msg</span>.<span style="color:#e06c75">TYPE_SENT</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">msgList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">msg2</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Msg</span> <span style="color:#e06c75">msg3</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Msg</span>(<span style="color:#98c379">&#34;This is Tom. Nice talking to you!&#34;</span>, <span style="color:#e06c75">Msg</span>.<span style="color:#e06c75">TYPE_RECEIVED</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">msgList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">msg3</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><img src="https://s2.loli.net/2024/03/30/eNXR3bfKTr46nQ8.png" widght="200px" height="500px"/>
<h2 id="android-ç¢ç‰‡">Android ç¢ç‰‡</h2>
<p>ç¢ç‰‡ï¼ˆFragmentï¼‰æ˜¯ä¸€ç§å¯ä»¥åµŒå…¥åœ¨æ´»åŠ¨å½“ä¸­çš„ UI ç‰‡æ®µï¼Œå®ƒèƒ½è®©ç¨‹åºæ›´åŠ åˆç†å’Œå……åˆ†åœ°åˆ©ç”¨å¤§å±å¹•çš„ç©ºé—´ï¼Œå› ä¸ºåœ¨å¹³æ¿ä¸Šåº”ç”¨å¾—éå¸¸å¹¿æ³›ã€‚</p>
<h3 id="ç¢ç‰‡çš„ä½¿ç”¨">ç¢ç‰‡çš„ä½¿ç”¨</h3>
<p>æˆ‘ä»¬ä½¿ç”¨å¹³æ¿æ¨¡æ‹Ÿå™¨ï¼Œåˆ›å»ºä¸€ä¸ª FragmentTest é¡¹ç›®ã€‚</p>
<p>ç„¶åæ–°å»ºä¸€ä¸ªå·¦ä¾§ç¢ç‰‡å¸ƒå±€ left_fragment.xmlã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Button&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>å†åˆ›å»ºä¸€ä¸ªå³ä¾§ç¢ç‰‡å¸ƒå±€ right_fragment.xml ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;#00ff00&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;20sp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is right fragment&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬åˆ†åˆ«åˆ›å»ºä¸€ä¸ª LeftFragment ç±» å’Œ RightFragmentç±»ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// LeftFragment</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">LeftFragment</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">Fragment</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">onCreateView</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">LayoutInflater</span> <span style="color:#e06c75">inflater</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">container</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">inflater</span>.<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">left_fragement</span>, <span style="color:#e06c75">container</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#7f848e">// RightFragment</span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">RightFragment</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">Fragment</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">onCreateView</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">LayoutInflater</span> <span style="color:#e06c75">inflater</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">container</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">inflater</span>.<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">right_fragement</span>, <span style="color:#e06c75">container</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹ activity_main.xml ä¸­çš„ä»£ç ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/left_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.LeftFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/right_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.RightFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>å½“ç„¶ç¢ç‰‡çš„å¼ºå¤§ä¹‹å¤„åœ¨äºå®ƒèƒ½å¤Ÿåœ¨ç¨‹åºè¿è¡Œæ—¶åŠ¨æ€åœ°æ·»åŠ åˆ°æ´»åŠ¨å½“ä¸­ï¼Œæˆ‘ä»¬æ–°å»º another_right_fragment.xml ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;#ffff00&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;20sp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is another right fragment&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ activity_main.xml ä¸­çš„å³ç¢ç‰‡ä¸ºå¸ƒå±€ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;FrameLayout</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/right_fragment&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/FrameLayout&gt;</span>
</span></span></code></pre></div><p>åœ¨ä»£ç ä¸­ï¼Œæˆ‘ä»¬ç”¨æŒ‰é’®æ¥æ·»åŠ ç¢ç‰‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.fragementtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.fragment.app.Fragment</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.fragment.app.FragmentManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.fragment.app.FragmentTransaction</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">replaceFragment</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">RightFragment</span>());
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">replaceFragment</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">AnotherRightFragment</span>());
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">replaceFragment</span>(<span style="color:#e06c75">Fragment</span> <span style="color:#e06c75">fragment</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FragmentManager</span> <span style="color:#e06c75">fragmentManager</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getSupportFragmentManager</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FragmentTransaction</span> <span style="color:#e06c75">transaction</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">fragmentManager</span>.<span style="color:#e06c75">beginTransaction</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">transaction</span>.<span style="color:#e06c75">replace</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">right_layout</span>, <span style="color:#e06c75">fragment</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">transaction</span>.<span style="color:#e06c75">commit</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>å…¶å®æˆ‘ä»¬å‘ç°ï¼ŒåŠ¨æ€æ·»åŠ ç¢ç‰‡çš„æ­¥éª¤å°±æ˜¯ï¼š</p>
<ul>
<li>ï¼ˆ1ï¼‰åˆ›å»ºå¾…æ·»åŠ çš„ç¢ç‰‡å®ä¾‹ã€‚</li>
<li>ï¼ˆ2ï¼‰è·å– FragementManagerï¼Œåœ¨æ´»åŠ¨ä¸­å¯ä»¥è°ƒç”¨ getSupportFragmentManager() æ–¹æ³•ã€‚</li>
<li>ï¼ˆ3ï¼‰å¼€å¯ä¸€ä¸ªäº‹åŠ¡ï¼Œè°ƒç”¨ beginTransaction() æ–¹æ³•å¼€å¯ã€‚</li>
<li>ï¼ˆ4ï¼‰å‘å®¹å™¨å†…æ·»åŠ æˆ–æ›¿æ¢ç¢ç‰‡ï¼Œä¸€èˆ¬ä½¿ç”¨ replace() æ–¹æ³•å®ç°ï¼Œéœ€è¦ä¼ å…¥å®¹å™¨çš„ id å’Œå¾…æ·»åŠ çš„ç¢ç‰‡å®ä¾‹ã€‚</li>
<li>ï¼ˆ5ï¼‰æäº¤äº‹åŠ¡ï¼Œè°ƒç”¨ commite() æ–¹æ³•æ¥å®Œæˆã€‚</li>
</ul>
<hr>
<p>FragmentTransaction æä¾›äº†ä¸€ä¸ª addToBackStack() æ–¹æ³•ï¼Œç”¨äºå°†ä¸€ä¸ªäº‹åŠ¡æ·»åŠ åˆ°è¿”å›æ ˆä¸­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">replaceFragment</span>(<span style="color:#e06c75">Fragment</span> <span style="color:#e06c75">fragment</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">FragmentManager</span> <span style="color:#e06c75">fragmentManager</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getSupportFragmentManager</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">FragmentTransaction</span> <span style="color:#e06c75">transaction</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">fragmentManager</span>.<span style="color:#e06c75">beginTransaction</span>();
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">transaction</span>.<span style="color:#e06c75">replace</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">right_layout</span>, <span style="color:#e06c75">fragment</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">transaction</span>.<span style="color:#e06c75">addToBackStack</span>(<span style="color:#e5c07b">null</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">transaction</span>.<span style="color:#e06c75">commit</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>FragmentManager æä¾›äº†ä¸€ä¸ªç±»ä¼¼äº findViewById() çš„æ–¹æ³•ï¼Œä¸“é—¨ç”¨äºä»å¸ƒå±€æ–‡ä»¶ä¸­è·å–ç¢ç‰‡çš„å®ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">RightFragment</span> <span style="color:#e06c75">rightFragment</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">RightFragment</span>) <span style="color:#e06c75">getFragmentManager</span>().<span style="color:#e06c75">findFragmentById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">right_fragment</span>);
</span></span></code></pre></div><p>æ­¤å¤–ï¼Œç¢ç‰‡ä¹Ÿå¯ä»¥è°ƒç”¨æ´»åŠ¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">MainActivity</span> <span style="color:#e06c75">activity</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">MainActivity</span>) <span style="color:#e06c75">getActivity</span>();
</span></span></code></pre></div><h3 id="ç¢ç‰‡çš„ç”Ÿå‘½å‘¨æœŸ">ç¢ç‰‡çš„ç”Ÿå‘½å‘¨æœŸ</h3>
<p><strong>è¿è¡ŒçŠ¶æ€</strong>ï¼šå½“ä¸€ä¸ªç¢ç‰‡æ˜¯å¯è§çš„ï¼Œå¹¶ä¸”å®ƒæ‰€å…³è”çš„æ´»åŠ¨æ­£å¤„äºè¿è¡ŒçŠ¶æ€æ—¶ï¼Œè¯¥ç¢ç‰‡ä¹Ÿå¤„äºè¿è¡ŒçŠ¶æ€ã€‚</p>
<p><strong>æš‚åœçŠ¶æ€</strong>ï¼šå½“æ´»åŠ¨è¿›å…¥æš‚åœçŠ¶æ€ï¼Œä¸å®ƒå…³è”çš„å¯è§ç¢ç‰‡å°±ä¼šè¿›å…¥åˆ°æš‚åœçŠ¶æ€ã€‚</p>
<p><strong>åœæ­¢çŠ¶æ€</strong>ï¼šå½“æ´»åŠ¨è¿›å…¥åœæ­¢çŠ¶æ€æ—¶ï¼Œä¸ä»–å…³è”çš„ç¢ç‰‡ä¼šè¿›å…¥åˆ°åœæ­¢çŠ¶æ€æˆ–è€…æ˜¯ä»æ´»åŠ¨ä¸­ç§»é™¤ã€‚</p>
<p><strong>é”€æ¯çŠ¶æ€</strong>ï¼šæ´»åŠ¨è¢«é”€æ¯æ—¶ï¼Œä¸å®ƒå…³è”çš„ç¢ç‰‡ä¹Ÿå°±è¿›å…¥åˆ°é”€æ¯çŠ¶æ€ã€‚</p>
<ul>
<li>onAttach()ã€‚å½“å‰ç¢ç‰‡å’Œæ´»åŠ¨å»ºç«‹å…³è”çš„æ—¶å€™è°ƒç”¨ã€‚</li>
<li>onCreateView()ã€‚ä¸ºç¢ç‰‡åˆ›å»ºè§†å›¾æ—¶è°ƒç”¨ã€‚</li>
<li>onActivityCreated()ã€‚ç¡®ä¿ä¸ç¢ç‰‡ç›¸å…³è”çš„æ´»åŠ¨ä¸€å®šå·²ç»åˆ›å»ºå®Œæ¯•çš„æ—¶å€™è°ƒç”¨ã€‚</li>
<li>onDestoryView()ã€‚å½“ä¸ç¢ç‰‡å…³è”çš„è§†å›¾è¢«ç§»é™¤çš„æ—¶å€™è°ƒç”¨ã€‚</li>
<li>onDetach()ã€‚å½“ç¢ç‰‡å’Œæ´»åŠ¨è§£é™¤å…³è”çš„æ—¶å€™è°ƒç”¨ã€‚</li>
</ul>
<p>æ³¨æ„ï¼Œåœ¨æ–°ç‰ˆæœ¬ä¸­ onActivityCreated() æ–¹æ³•è¢«å¼ƒç”¨ï¼Œåº”è¯¥ä½¿ç”¨ onViewCreated() æ–¹æ³•æ›¿ä»£ã€‚</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/04/05/myoJBH2lVS1NG8u.png" >
		<img src="https://s2.loli.net/2024/04/05/myoJBH2lVS1NG8u.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<h3 id="åŠ¨æ€åŠ è½½å¸ƒå±€çš„æŠ€å·§">åŠ¨æ€åŠ è½½å¸ƒå±€çš„æŠ€å·§</h3>
<p><strong>ä½¿ç”¨é™å®šç¬¦ï¼ˆQualifiersï¼‰</strong> æ¥åˆ¤æ–­ç¨‹åºæ˜¯ä½¿ç”¨åŒé¡µæ¨¡å¼è¿˜æ˜¯å•é¡µæ¨¡å¼ã€‚</p>
<p>æˆ‘ä»¬ä¿®æ”¹ activity_main.xml ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/left_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.LeftFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>       <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬æ–°å»º layout-large æ–‡ä»¶å¤¹ï¼Œåœ¨é‡Œé¢æ–°å»ºä¸€ä¸ªå¸ƒå±€ï¼Œä¹Ÿå« activity_main.xml ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/left_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.LeftFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/right_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.RightFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;3&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>è¿™æ ·ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ‰‹æœºå¯åŠ¨è¿™ä¸ªåº”ç”¨å°±åªä¼šæ˜¾ç¤ºå·¦è¾¹çš„ç¢ç‰‡ï¼Œè€Œåœ¨ä½¿ç”¨å¹³æ¿çš„æ—¶å€™å°±ä¼šæ˜¾ç¤ºå³è¾¹çš„ç¢ç‰‡ã€‚</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/04/02/u6BxFYAkQoSnIN1.png" >
		<img src="https://s2.loli.net/2024/04/02/u6BxFYAkQoSnIN1.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<p>å½“ç„¶æˆ‘ä»¬å¯ä»¥ç”¨æœ€å°å®½åº¦é™å®šç¬¦æ¥æŒ‡å®šå±å¹•å®½åº¦çš„ä¸´ç•Œç‚¹ï¼Œå¦‚æœå±å¹•å¤§äºè¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆè®¾å¤‡å°±åŠ è½½è¾ƒå¤§çš„å¸ƒå±€ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª layout-sw600dp æ–‡ä»¶å¤¹ï¼Œç„¶ååœ¨è¿™ä¸ªæ–‡ä»¶å¤¹ä¸‹æ–°å»º activity_main.xml å¸ƒå±€ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/left_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.LeftFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/right_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementtest.RightFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;3&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p><figure 
	>
	<a href="https://s2.loli.net/2024/04/02/uFokcIbBN7EPWvj.png" >
		<img src="https://s2.loli.net/2024/04/02/uFokcIbBN7EPWvj.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<h3 id="ç¢ç‰‡å®æˆ˜-ç®€æ˜“çš„æ–°é—»åº”ç”¨">ç¢ç‰‡å®æˆ˜-ç®€æ˜“çš„æ–°é—»åº”ç”¨</h3>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®å« FragmentBestPratice ï¼Œæˆ‘ä»¬åœ¨è¿™ä¸ªé¡¹ç›®ä¸Šå®Œæˆæˆ‘ä»¬çš„å®è·µã€‚</p>
<p>æˆ‘ä»¬çš„é¡¹ç›®æ­¥éª¤å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š</p>
<ul>
<li>1.å‡†å¤‡æ–°é—»å†…å®¹çš„ç¢ç‰‡å’Œç¢ç‰‡æ¸²æŸ“ï¼›</li>
<li>2.å‡†å¤‡æ–°é—»åˆ—è¡¨çš„ç¢ç‰‡å’Œæ¸²æŸ“ï¼›</li>
<li>3.å‡†å¤‡ä½åˆ†è¾¨ç‡ä¸»ç•Œé¢å’Œé«˜åˆ†è¾¨ç‡ä¸»ç•Œé¢ã€‚</li>
</ul>
<p>è¿™é‡Œæˆ‘ä»¬è¦ç”¨åˆ° RecyclerViewï¼Œæ‰€ä»¥æˆ‘ä»¬å…ˆå¼•å…¥ä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#e06c75">implementation</span> (<span style="color:#98c379">&#34;androidx.recyclerview:recyclerview:1.1.0&#34;</span>)
</span></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬å‡†å¤‡ä¸€ä¸ª New å®ä½“ç±»æ¥å­˜æ”¾æ–°é—»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.fragementbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">News</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">title</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">content</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setTitle</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">title</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">title</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">title</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getContent</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">content</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setContent</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">content</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">content</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">content</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p><strong>å‡†å¤‡æ–°é—»å†…å®¹çš„å¸ƒå±€</strong></p>
<p>ä¸ºäº†å¤„ç†è¿™ä¸ªå†…å®¹ï¼Œæˆ‘ä»¬éœ€è¦æŠŠæ–°é—»å†…å®¹æ”¾å…¥ Fragment ä¸­ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿™é‡Œå†™ä¸€ä¸ª  new_content_frag.xml ç”¨æ¥å±•ç¤ºæ–°é—»çš„å†…å®¹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;RelativeLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/visibility_layout&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:visibility=</span><span style="color:#98c379">&#34;invisible&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_title&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:gravity=</span><span style="color:#98c379">&#34;center&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:padding=</span><span style="color:#98c379">&#34;10dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;20sp&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;View</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;1dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;#000&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:padding=</span><span style="color:#98c379">&#34;15dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;18sp&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;View</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;1dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_alignParentLeft=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:background=</span><span style="color:#98c379">&#34;#000&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/RelativeLayout&gt;</span>
</span></span></code></pre></div><p>ç„¶åï¼Œæˆ‘ä»¬å†æ–°å»ºä¸€ä¸ª NewsContentFragment æ¥æ¸²æŸ“æˆ‘ä»¬çš„æ–°é—»å†…å®¹ç¢ç‰‡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.fragementbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.LayoutInflater</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.ViewGroup</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.TextView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.Nullable</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.fragment.app.Fragment</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">NewsContentFragment</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">Fragment</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">onCreateView</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">LayoutInflater</span> <span style="color:#e06c75">inflater</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">container</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">inflater</span>.<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">news_content_frag</span>, <span style="color:#e06c75">container</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">refresh</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">newsTitle</span>, <span style="color:#e06c75">String</span> <span style="color:#e06c75">newsContent</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">visibilityLayout</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">visibility_layout</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">visibilityLayout</span>.<span style="color:#e06c75">setVisibility</span>(<span style="color:#e06c75">View</span>.<span style="color:#e06c75">VISIBLE</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">newsTitleText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_title</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">newsContentText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_content</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">newsTitleText</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">newsTitle</span>);       <span style="color:#7f848e">// åˆ·æ–°æ–°é—»æ ‡é¢˜</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">newsContentText</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">newsContent</span>);   <span style="color:#7f848e">// åˆ·æ–°æ–°é—»å†…å®¹</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬å†å†™ä¸€ä¸ª news_content.xml ç”¨æ¥å¼•å…¥æˆ‘ä»¬å†™çš„ news_content_frag.xml å†…å®¹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.NewsContentActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_content_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementbestpratice.NewsContentFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>ä¹‹åï¼Œæˆ‘ä»¬å†™ä¸€ä¸ª Fragment çš„å¯åŠ¨å°±å¥½äº†ï¼Œæˆ‘ä»¬å†™åœ¨ NewsContentActivity.java ä¸­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.fragementbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">NewsContentActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">actionStart</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">String</span> <span style="color:#e06c75">newsTitle</span>, <span style="color:#e06c75">String</span> <span style="color:#e06c75">newsContent</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">context</span>, <span style="color:#e06c75">NewsContentActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">putExtra</span>(<span style="color:#98c379">&#34;news_title&#34;</span>, <span style="color:#e06c75">newsTitle</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">putExtra</span>(<span style="color:#98c379">&#34;news_content&#34;</span>, <span style="color:#e06c75">newsContent</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">context</span>.<span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">news_content</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">newsTitle</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getIntent</span>().<span style="color:#e06c75">getStringExtra</span>(<span style="color:#98c379">&#34;news_title&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">newsContent</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getIntent</span>().<span style="color:#e06c75">getStringExtra</span>(<span style="color:#98c379">&#34;news_content&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">NewsContentFragment</span> <span style="color:#e06c75">newsContentFragment</span> <span style="color:#56b6c2">=</span>(<span style="color:#e06c75">NewsContentFragment</span>) <span style="color:#e06c75">getSupportFragmentManager</span>().<span style="color:#e06c75">findFragmentById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_content_fragment</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">newsContentFragment</span>.<span style="color:#e06c75">refresh</span>(<span style="color:#e06c75">newsTitle</span>, <span style="color:#e06c75">newsContent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p><strong>å‡†å¤‡æ–°é—»åˆ—è¡¨</strong></p>
<p>è¿™é‡Œæˆ‘ä»¬è¦ç”¨åˆ° RecyclerView æ‰€ä»¥æˆ‘ä»¬ä¸€å®šå†™çš„æ˜¯ news_title_frag.xml å’Œ news_title_item.xmlï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;androidx.recyclerview.widget.RecyclerView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_title_recycler_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;TextView</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_title&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:singleLine=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:ellipsize=</span><span style="color:#98c379">&#34;end&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:paddingLeft=</span><span style="color:#98c379">&#34;10dp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:paddingRight=</span><span style="color:#98c379">&#34;10dp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:paddingTop=</span><span style="color:#98c379">&#34;15dp&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:paddingBottom=</span><span style="color:#98c379">&#34;15dp&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><p>å¥½äº†ï¼Œæˆ‘ä»¬æ¥ä¸‹æ¥å°±è¦å‡†å¤‡ NewsTitleFragment äº†ï¼Œå› ä¸ºè¦å¯åŠ¨ RecyclerView æ‰€ä»¥æˆ‘ä»¬è¿˜è¦å†™çš„å°±æ˜¯ Adapter ä½†æ˜¯æˆ‘ä»¬å¯ä»¥å†™å…¥ NewsTitleFragment ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬è¿˜å¯ä»¥åˆ¤æ–­æ˜¯åŒé¡µæ˜¾ç¤ºè¿˜æ˜¯å•é¡µæ˜¾ç¤ºï¼Œç„¶åå°†æ•°æ®åˆ·æ–°è¿›å»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.fragementbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.LayoutInflater</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.ViewGroup</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.TextView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.Nullable</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.fragment.app.Fragment</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.LinearLayoutManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.recyclerview.widget.RecyclerView</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.Random</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">NewsTitleFragment</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">Fragment</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">isTwoPane</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">class</span> <span style="color:#e5c07b">NewsAdapter</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">Adapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">NewsAdapter</span>.<span style="color:#e06c75">ViewHolder</span><span style="color:#56b6c2">&gt;</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">News</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">mNewsList</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ViewHolder</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">RecyclerView</span>.<span style="color:#e06c75">ViewHolder</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">TextView</span> <span style="color:#e06c75">newsTitleText</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">ViewHolder</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">super</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">newsTitleText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">TextView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_title</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">NewsAdapter</span> (<span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">News</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">newsList</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">mNewsList</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">newsList</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@NonNull</span>
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#61afef;font-weight:bold">onCreateViewHolder</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">viewType</span>) {
</span></span><span style="display:flex;"><span>           <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LayoutInflater</span>.<span style="color:#e06c75">from</span>(<span style="color:#e06c75">parent</span>.<span style="color:#e06c75">getContext</span>()).<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">news_title_item</span>, <span style="color:#e06c75">parent</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>           <span style="color:#c678dd">final</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ViewHolder</span>(<span style="color:#e06c75">view</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">view</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>                <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">News</span> <span style="color:#e06c75">news</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mNewsList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">holder</span>.<span style="color:#e06c75">getAdapterPosition</span>());
</span></span><span style="display:flex;"><span>                    <span style="color:#c678dd">if</span> (<span style="color:#e06c75">isTwoPane</span>){
</span></span><span style="display:flex;"><span>                        <span style="color:#7f848e">// å¦‚æœæ˜¯åŒé¡µæ¨¡å¼å°±åˆ·æ–° NewsContentFragment ä¸­çš„å†…å®¹</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#e06c75">NewsContentFragment</span> <span style="color:#e06c75">newsContentFragment</span> <span style="color:#56b6c2">=</span>
</span></span><span style="display:flex;"><span>                                (<span style="color:#e06c75">NewsContentFragment</span>) <span style="color:#e06c75">getChildFragmentManager</span>().
</span></span><span style="display:flex;"><span>                                        <span style="color:#e06c75">findFragmentById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_content_fragment</span>);
</span></span><span style="display:flex;"><span>                        <span style="color:#e06c75">newsContentFragment</span>.<span style="color:#e06c75">refresh</span>(<span style="color:#e06c75">news</span>.<span style="color:#e06c75">getTitle</span>(), <span style="color:#e06c75">news</span>.<span style="color:#e06c75">getContent</span>());
</span></span><span style="display:flex;"><span>                    } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>                        <span style="color:#7f848e">// å¦‚æœæ˜¯åŒé¡µæ¨¡å¼å°±å¯åŠ¨ NewsContentActivity</span>
</span></span><span style="display:flex;"><span>                        <span style="color:#e06c75">NewsContentActivity</span>.<span style="color:#e06c75">actionStart</span>(<span style="color:#e06c75">getActivity</span>(), <span style="color:#e06c75">news</span>.<span style="color:#e06c75">getTitle</span>(), <span style="color:#e06c75">news</span>.<span style="color:#e06c75">getContent</span>());
</span></span><span style="display:flex;"><span>                    }
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">return</span> <span style="color:#e06c75">holder</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onBindViewHolder</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">ViewHolder</span> <span style="color:#e06c75">holder</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">position</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">News</span> <span style="color:#e06c75">news</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">mNewsList</span>.<span style="color:#e06c75">get</span>(<span style="color:#e06c75">position</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">holder</span>.<span style="color:#e06c75">newsTitleText</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">news</span>.<span style="color:#e06c75">getTitle</span>());
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getItemCount</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">return</span> <span style="color:#e06c75">mNewsList</span>.<span style="color:#e06c75">size</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Nullable</span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">View</span> <span style="color:#61afef;font-weight:bold">onCreateView</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">LayoutInflater</span> <span style="color:#e06c75">inflater</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">ViewGroup</span> <span style="color:#e06c75">container</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">inflater</span>.<span style="color:#e06c75">inflate</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">news_title_frag</span>, <span style="color:#e06c75">container</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// ç»‘å®š RecyclerView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">RecyclerView</span> <span style="color:#e06c75">recyclerView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">RecyclerView</span>) <span style="color:#e06c75">view</span>.<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_title_recycler_view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">LinearLayoutManager</span> <span style="color:#e06c75">layoutManager</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">LinearLayoutManager</span>(<span style="color:#e06c75">getActivity</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setLayoutManager</span>(<span style="color:#e06c75">layoutManager</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">NewsAdapter</span> <span style="color:#e06c75">newsAdapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NewsAdapter</span>(<span style="color:#e06c75">getNews</span>());
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">recyclerView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">newsAdapter</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">view</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">News</span><span style="color:#56b6c2">&gt;</span> <span style="color:#61afef;font-weight:bold">getNews</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">News</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">newsList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">1</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;=</span> <span style="color:#e06c75">50</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">News</span> <span style="color:#e06c75">news</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">News</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">news</span>.<span style="color:#e06c75">setTitle</span>(<span style="color:#98c379">&#34;This is news title&#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">i</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">news</span>.<span style="color:#e06c75">setContent</span>(<span style="color:#e06c75">getRandomLengthContent</span>(<span style="color:#98c379">&#34;This is news content&#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">+</span> <span style="color:#98c379">&#34;.&#34;</span>));
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">newsList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">news</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">newsList</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getRandomLengthContent</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">content</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Random</span> <span style="color:#e06c75">random</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Random</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">length</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">random</span>.<span style="color:#e06c75">nextInt</span>(<span style="color:#e06c75">20</span>) <span style="color:#56b6c2">+</span> <span style="color:#e06c75">1</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">StringBuilder</span> <span style="color:#e06c75">builder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">StringBuilder</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e5c07b">int</span> <span style="color:#e06c75">i</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">0</span>; <span style="color:#e06c75">i</span> <span style="color:#56b6c2">&lt;</span> <span style="color:#e06c75">length</span>; <span style="color:#e06c75">i</span><span style="color:#56b6c2">++</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">append</span>(<span style="color:#e06c75">content</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onViewCreated</span>(<span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">View</span> <span style="color:#e06c75">view</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">getActivity</span>().<span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">news_content_layout</span>) <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">isTwoPane</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">true</span>;
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">isTwoPane</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">false</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p><strong>å‡†å¤‡å•é¡µå’ŒåŒé¡µçš„å¸ƒå±€</strong></p>
<p>æˆ‘ä»¬è¦ä¿®æ”¹ activity_main.xml ä¸­çš„å†…å®¹ï¼Œæ­¤å¤–æˆ‘ä»¬è¿˜æ–°å»ºä¸€ä¸ª layput-sw600p æ–‡ä»¶å¤¹ä¸­ï¼Œåœ¨é‡Œé¢å†™ activity_main.xml æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶åœ¨åˆ†è¾¨ç‡å¤§äºå€¼çš„æ—¶å€™åº”ç”¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;FrameLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_title_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementbestpratice.NewsTitleFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/FrameLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_title_fragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementbestpratice.NewsTitleFragment&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;FrameLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_content_layout&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;3&#34;</span> <span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;fragment</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/news_content_fragment&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.yikuanzz.fragementbestpratice.NewsContentFragment&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/FrameLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><hr>
<p>æ‰€ä»¥ï¼Œæœ€åæˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ•´ä¸ªé¡¹ç›®çš„å¯åŠ¨ï¼š</p>
<ul>
<li>1.é¡¹ç›®åˆ¤æ–­è®¾å¤‡çš„åˆ†è¾¨ç‡å¯åŠ¨ä¸åŒçš„ activity_main.xmlï¼›</li>
<li>2.å¯¹åº” acivity_main.xml ä¸­çš„ Fragment å¯åŠ¨ï¼›</li>
<li>3.NewsTitleFragment å¯åŠ¨å¹¶åˆ¤æ–­å•åŒæ¨¡å¼ï¼›</li>
<li>4.Adapter æ ¹æ®å•åŒé¡µæ¨¡å¼æ¸²æŸ“ç‚¹å‡»äº‹ä»¶çš„å¸ƒå±€ã€‚</li>
</ul>
<h2 id="android-å¹¿æ’­">Android å¹¿æ’­</h2>
<p>Android å¹¿æ’­ä¸»è¦åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><strong>æ ‡å‡†å¹¿æ’­ï¼ˆNormal broadcastï¼‰</strong>ï¼šå®Œå…¨å¼‚æ­¥æ‰§è¡Œçš„å¹¿æ’­ï¼Œåœ¨å¹¿æ’­å‘å‡ºåï¼Œæ‰€æœ‰çš„å¹¿æ’­æ¥æ”¶å™¨å‡ ä¹ä¼šåœ¨åŒä¸€æ—¶é—´å†…æ¥æ”¶åˆ°è¿™æ¡å¹¿æ’­æ¶ˆæ¯ã€‚</li>
<li><strong>æœ‰åºå¹¿æ’­ï¼ˆOrdered broadcastï¼‰</strong>ï¼šåŒæ­¥æ‰§è¡Œçš„å¹¿æ’­ï¼Œåœ¨å¹¿æ’­å‘å‡ºååŒä¸€æ—¶é—´åªä¼šæœ‰ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨èƒ½å¤Ÿæ”¶åˆ°è¿™æ¡å¹¿æ’­æ¶ˆæ¯ï¼Œåªæœ‰å½“è¿™ä¸ªå¹¿æ’­æ¥æ”¶å™¨å¤„ç†å®Œæ¯•åæ‰ä¼šä¼ ç»™ä¸‹ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨ã€‚</li>
</ul>
<h3 id="åŠ¨æ€æ³¨å†Œç›‘å¬ç½‘ç»œå˜åŒ–">åŠ¨æ€æ³¨å†Œç›‘å¬ç½‘ç»œå˜åŒ–</h3>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª BroadCastTest é¡¹ç›®ï¼Œä¿®æ”¹ MainActivity ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcasttest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.BroadcastReceiver</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.IntentFilter</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.net.ConnectivityManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.net.NetworkInfo</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">IntentFilter</span> <span style="color:#e06c75">intentFilter</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">NetworkChangeReceiver</span> <span style="color:#e06c75">networkChangeReceiver</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intentFilter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">IntentFilter</span>();      <span style="color:#7f848e">// è®¾ç½®ç›‘å¬çš„å¹¿æ’­ç±»å‹</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intentFilter</span>.<span style="color:#e06c75">addAction</span>(<span style="color:#98c379">&#34;android.net.conn.CONNECTIVITY_CHANGE&#34;</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">networkChangeReceiver</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NetworkChangeReceiver</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">registerReceiver</span>(<span style="color:#e06c75">networkChangeReceiver</span>, <span style="color:#e06c75">intentFilter</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();      <span style="color:#7f848e">// å–æ¶ˆåŠ¨æ€æ³¨å†Œ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">unregisterReceiver</span>(<span style="color:#e06c75">networkChangeReceiver</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">class</span> <span style="color:#e5c07b">NetworkChangeReceiver</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BroadcastReceiver</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#7f848e">// è·å–ç³»ç»Ÿç½‘ç»œè¿æ¥æœåŠ¡</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">ConnectivityManager</span> <span style="color:#e06c75">connectivityManager</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ConnectivityManager</span>) <span style="color:#e06c75">getSystemService</span>(<span style="color:#e06c75">Context</span>.<span style="color:#e06c75">CONNECTIVITY_SERVICE</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">NetworkInfo</span> <span style="color:#e06c75">networkInfo</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">connectivityManager</span>.<span style="color:#e06c75">getActiveNetworkInfo</span>();
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#e06c75">networkInfo</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span> <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#e06c75">networkInfo</span>.<span style="color:#e06c75">isAvailable</span>()){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>, <span style="color:#98c379">&#34;network is availabel&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>            } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>, <span style="color:#98c379">&#34;network is unavailable&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>éœ€è¦é¢å¤–è¯´æ˜çš„æ˜¯ï¼ŒAndroid ä¸ºäº†ä¿æŠ¤ç”¨æˆ·è®¾å¤‡çš„å®‰å…¨å’Œéšç§ï¼Œå¦‚æœæˆ‘ä»¬è¦è¿›è¡Œä¸€äº›æ“ä½œéœ€è¦åœ¨ AndroidManifest.xml æ–‡ä»¶ä¸­å£°æ˜æƒé™ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;uses-permission</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.permission.ACCESS_NETWORK_STATE&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><h3 id="é™æ€æ³¨å†Œå®ç°å¼€æœºå¯åŠ¨">é™æ€æ³¨å†Œå®ç°å¼€æœºå¯åŠ¨</h3>
<p>é™æ€æ³¨å†Œå¯ä»¥åœ¨ç¨‹åºä¸ºå¯åŠ¨ä¹‹å‰æ¥æ”¶å¹¿æ’­ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª Broadcast Receiver å« BootCompleteReceiverï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcasttest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.BroadcastReceiver</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">BootCompleteReceiver</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BroadcastReceiver</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// TODO: This method is called when the BroadcastReceiver is receiving</span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// an Intent broadcast.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// throw new UnsupportedOperationException(&#34;Not yet implemented&#34;);</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>, <span style="color:#98c379">&#34;Boot Complete&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ AndroidManifest.xml æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;receiver</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.BootCompleteReceiver&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:enabled=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.action.BOOT_COMPLETED&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/receiver&gt;</span>
</span></span></code></pre></div><p>è¿™æ ·æˆ‘ä»¬å¼€æœºçš„æ—¶å€™å°±å¯ä»¥æ”¶åˆ°å¹¿æ’­äº†ã€‚</p>
<h3 id="è‡ªå®šä¹‰å¹¿æ’­">è‡ªå®šä¹‰å¹¿æ’­</h3>
<p><strong>æ ‡å‡†å¹¿æ’­</strong></p>
<p>æˆ‘ä»¬é™æ€æ³¨å†Œä¸€ä¸ª MyBroadcastReceiverï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcasttest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.BroadcastReceiver</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MyBroadcastReceiver</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BroadcastReceiver</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// TODO: This method is called when the BroadcastReceiver is receiving</span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// an Intent broadcast.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// throw new UnsupportedOperationException(&#34;Not yet implemented&#34;);</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>., <span style="color:#98c379">&#34;received in MyBroadcastReceiver&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬è®©å®ƒæ¥æ”¶ä¸€æ¡ <code>com.example.broadcasttest.MY_BROADCAST</code> å¹¿æ’­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;receiver</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.MyBroadcastReceiver&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:enabled=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.example.broadcasttest.MY_BROADCAST&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/receiver&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬åœ¨ä¸»æ´»åŠ¨çš„å¸ƒå±€ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/button&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>ç„¶ååœ¨ä¸»æ´»åŠ¨ä¸­è®¾ç½®ç›‘å¬å™¨é€šè¿‡æŒ‰é’®å‘é€å¹¿æ’­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#98c379">&#34;com.example.broadcasttest.MY_BROADCAST&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">sendBroadcast</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><hr>
<p><strong>æœ‰åºå¹¿æ’­</strong></p>
<p>æˆ‘ä»¬éªŒè¯ä¸€ä¸‹å…¶å®ƒåº”ç”¨ç¨‹åºä¹Ÿæ˜¯èƒ½æ¥æ”¶åˆ°å¹¿æ’­ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œç„¶åå®šä¹‰ AnotherBroadcastReceiverï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcasttest2</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.BroadcastReceiver</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">AnotherBroadcastReceiver</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BroadcastReceiver</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// TODO: This method is called when the BroadcastReceiver is receiving</span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// an Intent broadcast.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// throw new UnsupportedOperationException(&#34;Not yet implemented&#34;)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>, <span style="color:#98c379">&#34;received in AnotherBroadcastReceiver&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æˆ‘ä»¬è®©å®ƒæ¥æ”¶ä¸€æ¡ <code>com.example.broadcasttest.MY_BROADCAST</code> å¹¿æ’­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;receiver</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.AnotherBroadcastReceiver&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:enabled=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.example.broadcasttest.MY_BROADCAST&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/receiver&gt;</span>
</span></span></code></pre></div><p>ç°åœ¨æˆ‘ä»¬å¯åŠ¨è¿™ä¸ªé¡¹ç›®åï¼Œç‚¹å‡»ä¸Šä¸ªé¡¹ç›®çš„å¹¿æ’­å‘é€æŒ‰é’®ï¼Œä¼šå‘ç°ä¸¤ä¸ªç¨‹åºéƒ½èƒ½æ”¶åˆ°å¹¿æ’­ã€‚å½“ç„¶ï¼Œå¦‚æœè¦å‘é€æœ‰åºå¹¿æ’­ï¼Œæˆ‘ä»¬è¿˜è¦ä¿®æ”¹ä¸€ä¸‹ MainActivity çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#98c379">&#34;com.example.broadcasttest.MY_BROADCAST&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">sendOrderedBroadcast</span>(<span style="color:#e06c75">intent</span>, <span style="color:#e5c07b">null</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>});
</span></span></code></pre></div><p>æˆ‘ä»¬å¯ä»¥åœ¨ AndroiManifest.xml ä¸­è®¾ç½®å¹¿æ’­æ¥æ”¶ä¼˜å…ˆçº§ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;intent-filter</span> <span style="color:#e06c75">android:priority=</span><span style="color:#98c379">&#34;100&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;com.example.broadcasttest.MY_BROADCAST&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span></code></pre></div><p>ç„¶åå¯ä»¥åœ¨å¹¿æ’­æ¥æ”¶å™¨ä¸­æˆªæ–­å¹¿æ’­ï¼Œä¸è®©å¹¿æ’­ç»§ç»­ä¼ æ’­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>, <span style="color:#98c379">&#34;received in MyBroadcastReceiver&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">abortBroadcast</span>();
</span></span><span style="display:flex;"><span>    }
</span></span></code></pre></div><h3 id="æœ¬åœ°å¹¿æ’­">æœ¬åœ°å¹¿æ’­</h3>
<p>æœ¬åœ°å¹¿æ’­å°±æ˜¯åªåœ¨ç¨‹åºä¸­ä¼ æ’­çš„å¹¿æ’­æœºåˆ¶ã€‚</p>
<p>ä¸»è¦å°±æ˜¯ç”¨ LocalBroadcastManager æ¥å¯¹å¹¿æ’­è¿›è¡Œç®¡ç†ã€‚</p>
<p>æˆ‘ä»¬ä¿®æ”¹ MainAcitvity.java ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcasttest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.localbroadcastmanager.content.LocalBroadcastManager</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.BroadcastReceiver</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.IntentFilter</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.net.ConnectivityManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.net.NetworkInfo</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">IntentFilter</span> <span style="color:#e06c75">intentFilter</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">LocalReceiver</span> <span style="color:#e06c75">localReceiver</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">LocalBroadcastManager</span> <span style="color:#e06c75">localBroadcastManager</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">localBroadcastManager</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LocalBroadcastManager</span>.<span style="color:#e06c75">getInstance</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">button</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">button</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">button</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#98c379">&#34;com.example.brocasttest.LOCAL_BROADCAST&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">localBroadcastManager</span>.<span style="color:#e06c75">sendBroadcast</span>(<span style="color:#e06c75">intent</span>);    <span style="color:#7f848e">// å‘é€æœ¬åœ°å¹¿æ’­</span>
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intentFilter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">IntentFilter</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intentFilter</span>.<span style="color:#e06c75">addAction</span>(<span style="color:#98c379">&#34;com.example.brocasttest.LOCAL_BROADCAST&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">localReceiver</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">LocalReceiver</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">localBroadcastManager</span>.<span style="color:#e06c75">registerReceiver</span>(<span style="color:#e06c75">localReceiver</span>, <span style="color:#e06c75">intentFilter</span>);    <span style="color:#7f848e">// æ³¨å†Œç›‘å¬å™¨</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();      <span style="color:#7f848e">// å–æ¶ˆåŠ¨æ€æ³¨å†Œ</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">localBroadcastManager</span>.<span style="color:#e06c75">unregisterReceiver</span>(<span style="color:#e06c75">localReceiver</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">class</span> <span style="color:#e5c07b">LocalReceiver</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BroadcastReceiver</span>{
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">context</span>, <span style="color:#98c379">&#34;received local broadcast&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="å¹¿æ’­å®æˆ˜-å¼ºåˆ¶ä¸‹çº¿">å¹¿æ’­å®æˆ˜-å¼ºåˆ¶ä¸‹çº¿</h3>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª BroadcastBestPractice é¡¹ç›®ã€‚</p>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ª ActivityCollector ç±»ç”¨äºç®¡ç†æ‰€æœ‰çš„æ´»åŠ¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcastbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.Activity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ActivityCollector</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Activity</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">activityList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">addActivity</span>(<span style="color:#e06c75">Activity</span> <span style="color:#e06c75">activity</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">activityList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">activity</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">removeActivity</span>(<span style="color:#e06c75">Activity</span> <span style="color:#e06c75">activity</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">activityList</span>.<span style="color:#e06c75">remove</span>(<span style="color:#e06c75">activity</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">finishAll</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">for</span> (<span style="color:#e06c75">Activity</span> <span style="color:#e06c75">activity</span> : <span style="color:#e06c75">activityList</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#56b6c2">!</span><span style="color:#e06c75">activity</span>.<span style="color:#e06c75">isFinishing</span>()){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">activity</span>.<span style="color:#e06c75">finish</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶ååˆ›å»º BaseActivity ç±»ä½œä¸ºæ‰€æœ‰æ´»åŠ¨çš„çˆ¶ç±»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcastbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.PersistableBundle</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.Nullable</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">BaseActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">PersistableBundle</span> <span style="color:#e06c75">persistentState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>, <span style="color:#e06c75">persistentState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">addActivity</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">removeActivity</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ–°å»ºä¸€ä¸ªç™»å½•ç•Œé¢çš„æ´»åŠ¨ LoginActivity æˆ‘ä»¬ç¼–è¾‘å®ƒçš„å¸ƒå±€æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.LoginActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;60dp&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;90dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;18sp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Account: &#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;EditText</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/account&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;LinearLayout</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;60dp&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;90dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;18sp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Password: &#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;EditText</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/password&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;0dp&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_weight=</span><span style="color:#98c379">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_vertical&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/login&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;60dp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Login&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬ä¿®æ”¹ LoginActivity ä¸­ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcastbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.EditText</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">LoginActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BaseActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">EditText</span> <span style="color:#e06c75">accountText</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">EditText</span> <span style="color:#e06c75">passwordText</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">Button</span> <span style="color:#e06c75">login</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_login</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// ç»‘å®šç»„ä»¶</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">accountText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">account</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">passwordText</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">password</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">login</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">login</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">login</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#7f848e">// å®ç°ç™»å½•</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">String</span> <span style="color:#e06c75">account</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">accountText</span>.<span style="color:#e06c75">getText</span>().<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">String</span> <span style="color:#e06c75">password</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">passwordText</span>.<span style="color:#e06c75">getText</span>().<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">if</span> (<span style="color:#e06c75">account</span>.<span style="color:#e06c75">equals</span>(<span style="color:#98c379">&#34;admin&#34;</span>) <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#e06c75">password</span>.<span style="color:#e06c75">equals</span>(<span style="color:#98c379">&#34;123456&#34;</span>)){
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">LoginActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>                } <span style="color:#c678dd">else</span> {
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">LoginActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#98c379">&#34;account or passsword is invalid&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬åœ¨ä¸»æ´»åŠ¨çš„å¸ƒå±€ä¸­æ·»åŠ ä¸€ä¸ªæŒ‰é’®ç”¨æ¥è§¦å‘ä¸‹çº¿åŠŸèƒ½ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/force_offline&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æ¥ç€æˆ‘ä»¬ä¿®æ”¹ä¸»æ´»åŠ¨çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcastbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BaseActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">forceOffline</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">force_offline</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">forceOffline</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#98c379">&#34;com.example.broadcastbestpratice.FORCE_OFFLINE&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">sendBroadcast</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åªè¦åœ¨ BaseActivity ä¸­æ·»åŠ ä¸€ä¸ªå¹¿æ’­æ¥æ”¶å™¨å°±å¯ä»¥äº†ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.broadcastbestpratice</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.BroadcastReceiver</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.DialogInterface</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.IntentFilter</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.PersistableBundle</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.Nullable</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AlertDialog</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">BaseActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">ForceOffLineReceiver</span> <span style="color:#e06c75">receiver</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>, <span style="color:#61afef">@Nullable</span> <span style="color:#e06c75">PersistableBundle</span> <span style="color:#e06c75">persistentState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>, <span style="color:#e06c75">persistentState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">addActivity</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onResume</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onResume</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">IntentFilter</span> <span style="color:#e06c75">intentFilter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">IntentFilter</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">intentFilter</span>.<span style="color:#e06c75">addAction</span>(<span style="color:#98c379">&#34;com.example.broadcastbestpratice.FORCE_OFFLINE&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">receiver</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ForceOffLineReceiver</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">registerReceiver</span>(<span style="color:#e06c75">receiver</span>, <span style="color:#e06c75">intentFilter</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onPause</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onPause</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">receiver</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">unregisterReceiver</span>(<span style="color:#e06c75">receiver</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">receiver</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">removeActivity</span>(<span style="color:#c678dd">this</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">class</span> <span style="color:#e5c07b">ForceOffLineReceiver</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">BroadcastReceiver</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onReceive</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">AlertDialog</span>.<span style="color:#e06c75">Builder</span> <span style="color:#e06c75">builder</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">AlertDialog</span>.<span style="color:#e06c75">Builder</span>(<span style="color:#e06c75">context</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">setTitle</span>(<span style="color:#98c379">&#34;Warning&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">setMessage</span>(<span style="color:#98c379">&#34;You are forced to be offline. Please try to login again.&#34;</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">setCancelable</span>(<span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">setPositiveButton</span>(<span style="color:#98c379">&#34;OK&#34;</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">DialogInterface</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>                <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">DialogInterface</span> <span style="color:#e06c75">dialog</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">which</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">ActivityCollector</span>.<span style="color:#e06c75">finishAll</span>();
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">context</span>, <span style="color:#e06c75">LoginActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">context</span>.<span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            });
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">builder</span>.<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ä¹‹åæˆ‘ä»¬å†ä¿®æ”¹ä¸€ä¸‹ AndroidManifest.xml è®©ç™»å½•ç•Œé¢ä½œä¸ºå¯åŠ¨æ´»åŠ¨ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span>       <span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.LoginActivity&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">&lt;intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">&lt;action</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.action.MAIN&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">&lt;category</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.intent.category.LAUNCHER&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">&lt;/intent-filter&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;activity</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">android:exported=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">&lt;/activity&gt;</span>
</span></span></code></pre></div><h2 id="android-å­˜å‚¨">Android å­˜å‚¨</h2>
<h3 id="æ–‡ä»¶å­˜å‚¨">æ–‡ä»¶å­˜å‚¨</h3>
<p>æ–‡ä»¶å­˜å‚¨å°±æ˜¯ä¸å¯¹å­˜å‚¨å†…å®¹åšä»»ä½•ä¸ªæ ¼å¼åŒ–å¤„ç†ã€‚</p>
<p>Context ç±»æä¾›äº† openFileOutput() æ–¹æ³•ï¼Œå¯ä»¥ç”¨äºå°†æ•°æ®å­˜å‚¨åˆ°æŒ‡å®šæ–‡ä»¶ä¸­ï¼š</p>
<ul>
<li>å‚æ•°ä¸€ï¼šæ–‡ä»¶åï¼Œæ‰€æœ‰æ–‡ä»¶é»˜è®¤æ”¾åœ¨ <code>/data/data/&lt;packagename&gt;/files/</code> ç›®å½•ä¸‹ã€‚</li>
<li>å‚æ•°äºŒï¼šæ–‡ä»¶æ“ä½œæ¨¡å¼ï¼ŒMODE_PRIVATE å’Œ MODE_APPENDã€‚
<ul>
<li>MODE_PRIVATE å†™å…¥æ—¶è¦†ç›–ã€‚</li>
<li>MODE_APPEND è¿½åŠ å†…å®¹ã€‚</li>
</ul>
</li>
</ul>
<p>è¯¥æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª FileOutputStream å¯¹è±¡ã€‚</p>
<p>æˆ‘ä»¬çœ‹ä¸€ä¸‹å®ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">save</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">String</span> <span style="color:#e06c75">data</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;Data to save&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">FileOutputStream</span> <span style="color:#e06c75">out</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">BufferedWriter</span> <span style="color:#e06c75">writer</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">try</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">out</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">openFileOutput</span>(<span style="color:#98c379">&#34;data&#34;</span>, <span style="color:#e06c75">Context</span>.<span style="color:#e06c75">MODE_PRIVATE</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">writer</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">BufferedWriter</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">OutputStreamWriter</span>(<span style="color:#e06c75">out</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">writer</span>.<span style="color:#e06c75">write</span>(<span style="color:#e06c75">data</span>);
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">finally</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">try</span> {
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#e06c75">writer</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">writer</span>.<span style="color:#e06c75">close</span>();
</span></span><span style="display:flex;"><span>            } 
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>æ¥ä¸‹æ¥åšä¸ªä¾‹å­ï¼Œåˆ›å»º FilePerisistenceTest é¡¹ç›®ï¼Œä¿®æ”¹ä¸»æ´»åŠ¨å¸ƒå±€çš„ä»£ç ï¼Œæ·»åŠ ä¸€ä¸ªè¾“å…¥æ¡†ï¼Œæˆ‘ä»¬æƒ³è®©è¾“å…¥æ¡†çš„æ•°æ®ä¿å­˜ä¸‹æ¥ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;EditText</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/edit&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:hint=</span><span style="color:#98c379">&#34;Type something here.&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.filepersistencetest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.EditText</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.io.BufferedWriter</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.io.FileOutputStream</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.io.IOException</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.io.OutputStreamWriter</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">EditText</span> <span style="color:#e06c75">edit</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">edit</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">EditText</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">edit</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onDestroy</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onDestroy</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">inputText</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">edit</span>.<span style="color:#e06c75">getText</span>().<span style="color:#e06c75">toString</span>();
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">save</span>(<span style="color:#e06c75">inputText</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">save</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">inputText</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">FileOutputStream</span> <span style="color:#e06c75">out</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">BufferedWriter</span> <span style="color:#e06c75">writer</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">try</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">out</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">openFileOutput</span>(<span style="color:#98c379">&#34;data&#34;</span>, <span style="color:#e06c75">Context</span>.<span style="color:#e06c75">MODE_PRIVATE</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">writer</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">BufferedWriter</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">OutputStreamWriter</span>(<span style="color:#e06c75">out</span>));
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">writer</span>.<span style="color:#e06c75">write</span>(<span style="color:#e06c75">inputText</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">finally</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">try</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">if</span> (<span style="color:#e06c75">writer</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">writer</span>.<span style="color:#e06c75">close</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>              <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>é‚£ä¹ˆï¼Œæˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­å°±å®Œæˆäº†æ•°æ®çš„å†™å…¥ï¼Œç°åœ¨æˆ‘ä»¬å†åšä¸€ä¸ªè¯»å–çš„ä¾‹å­ã€‚</p>
<p>æˆ‘ä»¬ä¼šç”¨åˆ° openFileInput() æ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">load</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">FileInputStream</span> <span style="color:#e06c75">in</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">BufferedReader</span> <span style="color:#e06c75">reader</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">StringBuilder</span> <span style="color:#e06c75">content</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">StringBuilder</span>();
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">try</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">int</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">openFileInput</span>(<span style="color:#98c379">&#34;data&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">reader</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">BufferedReader</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">InputStreamReader</span>(<span style="color:#e06c75">in</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">line</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;&#34;</span>;
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">while</span> ((<span style="color:#e06c75">line</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">reader</span>.<span style="color:#e06c75">readLine</span>()) <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">content</span>.<span style="color:#e06c75">append</span>(<span style="color:#e06c75">line</span>);
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">finally</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">reader</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">try</span>{
</span></span><span style="display:flex;"><span>             	<span style="color:#e06c75">reader</span>.<span style="color:#e06c75">close</span>();               
</span></span><span style="display:flex;"><span>            } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">IOException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">String</span> <span style="color:#e06c75">inputText</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">load</span>();
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#56b6c2">!</span><span style="color:#e06c75">TextUtils</span>.<span style="color:#e06c75">isEmpty</span>(<span style="color:#e06c75">inputText</span>)){
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">edit</span>.<span style="color:#e06c75">setText</span>(<span style="color:#e06c75">inputText</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">edit</span>.<span style="color:#e06c75">setSelection</span>(<span style="color:#e06c75">inputText</span>.<span style="color:#e06c75">length</span>());
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#c678dd">this</span>, <span style="color:#98c379">&#34;Restoring succeeded&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="sharedpreference-å­˜å‚¨">SharedPreference å­˜å‚¨</h3>
<p>SharedPreference æ˜¯ä½¿ç”¨é”®å€¼å¯¹çš„æ–¹å¼æ¥å­˜å‚¨æ•°æ®çš„ã€‚</p>
<p><strong>Context ç±»ä¸­çš„ getSharedPreferences() æ–¹æ³•</strong></p>
<ul>
<li>å‚æ•°ä¸€ï¼šæ–‡ä»¶åï¼Œæ”¾åœ¨ <code>/data/data/&lt;package name&gt;/shared_prefs/</code> ç›®å½•ä¸‹ã€‚</li>
<li>å‚æ•°äºŒï¼šæŒ‡å®šæ“ä½œæ¨¡å¼ï¼Œåªæœ‰ MODE_PRIVATEã€‚</li>
</ul>
<p><strong>Activity ç±»ä¸­ gerPreferences() æ–¹æ³•</strong></p>
<ul>
<li>åªæ¥æ”¶æ“ä½œæ¨¡å¼å‚æ•°ï¼Œå®ƒè‡ªåŠ¨å°†å½“å‰æ´»åŠ¨ç±»åä½œä¸ºæ–‡ä»¶åã€‚</li>
</ul>
<p><strong>PreferenceManager ç±»ä¸­çš„ getDefaultSharedPreferences() æ–¹æ³•</strong></p>
<ul>
<li>æ¥æ”¶ä¸€ä¸ª Context å‚æ•°ï¼Œå¹¶è‡ªåŠ¨ä½¿ç”¨å½“å‰åº”ç”¨ç¨‹åºåŒ…åä½œä¸ºå‰ç¼€å‘½åï¼Œå¾—åˆ°ä¸€ä¸ª SharedPreferences å¯¹è±¡ã€‚</li>
<li>é€šè¿‡è°ƒç”¨  SharedPreferences å¯¹è±¡ edit() æ–¹æ³•è·å–  SharedPreferences.Editor å¯¹è±¡ã€‚</li>
<li>å‘  SharedPreferences.Editor å¯¹è±¡ä¸­æ·»åŠ æ•°æ®ã€‚</li>
<li>è°ƒç”¨ apply() æ–¹æ³•å°†æ·»åŠ åˆ°æ•°æ®æäº¤ã€‚</li>
</ul>
<hr>
<p>æ–°å»ºä¸€ä¸ªé¡¹ç›®ï¼Œå¼€å§‹å®è·µã€‚é¦–å…ˆä¿®æ”¹ activity_main.xml ä¸­çš„ä»£ç ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/save_data&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Save data&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/restore_data&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Resotre data&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬ç”¨æŒ‰é’®å“åº”å°†ä¸€äº›æ•°æ®å­˜åœ¨ SharedPreferences æ–‡ä»¶ä¸­ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.sharedpreferencestest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.SharedPreferences</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.util.Log</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">save_data</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">save_data</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">save_data</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">SharedPreferences</span>.<span style="color:#e06c75">Editor</span> <span style="color:#e06c75">editor</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getSharedPreferences</span>(<span style="color:#98c379">&#34;data&#34;</span>, <span style="color:#e06c75">MODE_PRIVATE</span>).<span style="color:#e06c75">edit</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">editor</span>.<span style="color:#e06c75">putString</span>(<span style="color:#98c379">&#34;name&#34;</span>, <span style="color:#98c379">&#34;Tom&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">editor</span>.<span style="color:#e06c75">putInt</span>(<span style="color:#98c379">&#34;age&#34;</span>, <span style="color:#e06c75">18</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">editor</span>.<span style="color:#e06c75">putBoolean</span>(<span style="color:#98c379">&#34;married&#34;</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">editor</span>.<span style="color:#e06c75">apply</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">restore_data</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">restore_data</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">restore_data</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">SharedPreferences</span> <span style="color:#e06c75">pref</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getSharedPreferences</span>(<span style="color:#98c379">&#34;data&#34;</span>, <span style="color:#e06c75">MODE_PRIVATE</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pref</span>.<span style="color:#e06c75">getString</span>(<span style="color:#98c379">&#34;name&#34;</span>, <span style="color:#98c379">&#34;&#34;</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e5c07b">int</span> <span style="color:#e06c75">age</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pref</span>.<span style="color:#e06c75">getInt</span>(<span style="color:#98c379">&#34;age&#34;</span>, <span style="color:#e06c75">0</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e5c07b">boolean</span> <span style="color:#e06c75">married</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pref</span>.<span style="color:#e06c75">getBoolean</span>(<span style="color:#98c379">&#34;married&#34;</span>, <span style="color:#e5c07b">false</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;DataInSP&#34;</span>, <span style="color:#98c379">&#34;name is &#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">name</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;DataInSP&#34;</span>, <span style="color:#98c379">&#34;age is &#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">age</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Log</span>.<span style="color:#e06c75">d</span>(<span style="color:#98c379">&#34;DataInSP&#34;</span>, <span style="color:#98c379">&#34;married is &#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">married</span>);
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="sqliste-æ•°æ®åº“å­˜å‚¨">SQListe æ•°æ®åº“å­˜å‚¨</h3>
<p>Android æä¾›äº† SQLiteOpenHelper å¸®åŠ©æˆ‘ä»¬ä½¿ç”¨æ•°æ®åº“ã€‚</p>
<ul>
<li>getReadableDatebase() å’Œ getWritableDatabase() ç”¨äºåˆ›å»ºæˆ–æ‰“å¼€ä¸€ä¸ªç°æœ‰æ•°æ®åº“ã€‚</li>
<li>æ„é€ æ–¹æ³•æœ‰å››ä¸ªå‚æ•°ï¼š
<ul>
<li>Context ä¸Šä¸‹æ–‡ã€‚</li>
<li>æ•°æ®åº“åã€‚</li>
<li>Cursor æ¸¸æ ‡ã€‚</li>
<li>æ•°æ®åº“ç‰ˆæœ¬å·ã€‚</li>
</ul>
</li>
<li>æ•°æ®åº“æ–‡ä»¶ä¸€èˆ¬æ”¾åœ¨ <code>/data/data/&lt;package name&gt;/databases/</code> ç›®å½•ã€‚</li>
</ul>
<hr>
<p>æˆ‘ä»¬åˆ›å»ºä¸€ä¸ªé¡¹ç›®æ¥å®è·µä¸€ä¸‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.databasetest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Context</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.database.sqlite.SQLiteDatabase</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.database.sqlite.SQLiteOpenHelper</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MyDatabaseHelper</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">SQLiteOpenHelper</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#c678dd">final</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">CREATE_BOOK</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;create table Book(&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;id integer primary key autoincrement,&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;author text,&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;price real,&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;pages integer,&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;name text)&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#c678dd">static</span> <span style="color:#c678dd">final</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">CREATE_CATEGORY</span> <span style="color:#56b6c2">=</span> <span style="color:#98c379">&#34;create table Category(&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;id integer primary key autoincrement,&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;category_name text,&#34;</span> <span style="color:#56b6c2">+</span>
</span></span><span style="display:flex;"><span>            <span style="color:#98c379">&#34;category_code integer)&#34;</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">Context</span> <span style="color:#e06c75">mContext</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">MyDatabaseHelper</span>(<span style="color:#e06c75">Context</span> <span style="color:#e06c75">context</span>, <span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span>, <span style="color:#e06c75">SQLiteDatabase</span>.<span style="color:#e06c75">CursorFactory</span> <span style="color:#e06c75">factory</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">version</span>){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>(<span style="color:#e06c75">context</span>, <span style="color:#e06c75">name</span>, <span style="color:#e06c75">factory</span>, <span style="color:#e06c75">version</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">mContext</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">context</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">SQLiteDatabase</span> <span style="color:#e06c75">db</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">db</span>.<span style="color:#e06c75">execSQL</span>(<span style="color:#e06c75">CREATE_BOOK</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">db</span>.<span style="color:#e06c75">execSQL</span>(<span style="color:#e06c75">CREATE_CATEGORY</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">mContext</span>, <span style="color:#98c379">&#34;Create succeeded&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onUpgrade</span>(<span style="color:#e06c75">SQLiteDatabase</span> <span style="color:#e06c75">db</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">oldVersion</span>, <span style="color:#e5c07b">int</span> <span style="color:#e06c75">newVersion</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">db</span>.<span style="color:#e06c75">execSQL</span>(<span style="color:#98c379">&#34;drop table if exists Book&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">db</span>.<span style="color:#e06c75">execSQL</span>(<span style="color:#98c379">&#34;drop table if exists Category&#34;</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">db</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.databasetest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">MyDatabaseHelper</span> <span style="color:#e06c75">dbHelper</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">dbHelper</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">MyDatabaseHelper</span>(<span style="color:#c678dd">this</span>, <span style="color:#98c379">&#34;BookStore.db&#34;</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e06c75">2</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">createDatabase</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">create_database</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">createDatabase</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">dbHelper</span>.<span style="color:#e06c75">getWritableDatabase</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">SQLiteDatabase</span> <span style="color:#e06c75">db</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">dbHepler</span>.<span style="color:#e06c75">getWritableDatabase</span>();
</span></span><span style="display:flex;"><span><span style="color:#e06c75">ContentValues</span> <span style="color:#e06c75">values</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ContentValues</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// æ·»åŠ æ•°æ®</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;name&#34;</span>, <span style="color:#98c379">&#34;MyCode1&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;author&#34;</span>, <span style="color:#98c379">&#34;Yikuanzz&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;pages&#34;</span>, <span style="color:#e06c75">345</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;price&#34;</span>, <span style="color:#e06c75">9</span>.<span style="color:#e06c75">99</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">db</span>.<span style="color:#e06c75">insert</span>(<span style="color:#98c379">&#34;Book&#34;</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e06c75">values</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;name&#34;</span>, <span style="color:#98c379">&#34;MyCode2&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;author&#34;</span>, <span style="color:#98c379">&#34;Yikuanzz&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;pages&#34;</span>, <span style="color:#e06c75">243</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;price&#34;</span>, <span style="color:#e06c75">19</span>.<span style="color:#e06c75">99</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">db</span>.<span style="color:#e06c75">insert</span>(<span style="color:#98c379">&#34;Book&#34;</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e06c75">values</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// ä¿®æ”¹æ•°æ®</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">values</span>.<span style="color:#e06c75">put</span>(<span style="color:#98c379">&#34;price&#34;</span>, <span style="color:#e06c75">10</span>.<span style="color:#e06c75">99</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">db</span>.<span style="color:#e06c75">update</span>(<span style="color:#98c379">&#34;Book&#34;</span>, <span style="color:#e06c75">values</span>, <span style="color:#98c379">&#34;name = ?&#34;</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span> {<span style="color:#98c379">&#34;MyCode1&#34;</span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// åˆ é™¤æ•°æ®</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">db</span>.<span style="color:#e06c75">delte</span>(<span style="color:#98c379">&#34;Book&#34;</span>, <span style="color:#98c379">&#34;pages &gt; ?&#34;</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span> {<span style="color:#98c379">&#34;300&#34;</span>});
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#7f848e">// æŸ¥è¯¢æ•°æ®</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Cursor</span> <span style="color:#e06c75">cursor</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">db</span>.<span style="color:#e06c75">query</span>(<span style="color:#98c379">&#34;Book&#34;</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>);
</span></span><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">moveToFirst</span>()){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">do</span>{
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getString</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#98c379">&#34;name&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">author</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getString</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#98c379">&#34;author&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pages</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getInt</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#98c379">&#34;pages&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">double</span> <span style="color:#e06c75">price</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getDouble</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#98c379">&#34;price&#34;</span>));
</span></span><span style="display:flex;"><span>    } <span style="color:#c678dd">while</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">moveToNext</span>());
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span><span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">close</span>();
</span></span></code></pre></div><h3 id="litepal-æ“ä½œæ•°æ®åº“">LitePal æ“ä½œæ•°æ®åº“</h3>
<p>LitePal æ˜¯ä¸€ä¸ªå¼€æºçš„ Android æ•°æ®åº“æ¡†æ¶ï¼Œå®ƒé‡‡ç”¨å¯¹è±¡å…³ç³»æ˜ å°„ï¼ˆORMï¼‰çš„æ¨¡å¼ï¼Œå°†å¸¸ç”¨çš„æ•°æ®åº“åŠŸèƒ½è¿›è¡Œäº†å°è£…ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬è¦æ·»åŠ ä¾èµ–ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#e06c75">implementation</span>(<span style="color:#98c379">&#34;org.litepal.guolindev:core:3.2.3&#34;</span>)
</span></span></code></pre></div><p>åœ¨ settings.gradle.kts ä¸­å¼•å…¥é•œåƒï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-kotlin" data-lang="kotlin"><span style="display:flex;"><span><span style="color:#7f848e">// Top-level build file where you can add configuration options common to all sub-projects/modules.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span><span style="color:#e06c75">plugins</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">id</span>(<span style="color:#98c379">&#34;com.android.application&#34;</span>) <span style="color:#e06c75">version</span> <span style="color:#98c379">&#34;8.2.2&#34;</span> <span style="color:#e06c75">apply</span> <span style="color:#c678dd">false</span>
</span></span><span style="display:flex;"><span>}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">buildscript</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">repositories</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">maven</span>{ <span style="color:#e06c75">url</span> = <span style="color:#e06c75">uri</span>(<span style="color:#98c379">&#34;https://maven.aliyun.com/repository/google&#34;</span>)}
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">maven</span>{ <span style="color:#e06c75">url</span> = <span style="color:#e06c75">uri</span>(<span style="color:#98c379">&#34;https://maven.aliyun.com/repository/gradle-plugin&#34;</span>)}
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">maven</span>{ <span style="color:#e06c75">url</span> = <span style="color:#e06c75">uri</span>(<span style="color:#98c379">&#34;https://maven.aliyun.com/repository/public&#34;</span>)}
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">maven</span>{ <span style="color:#e06c75">url</span> = <span style="color:#e06c75">uri</span>(<span style="color:#98c379">&#34;https://maven.aliyun.com/repository/jcenter&#34;</span>)}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">google</span>()
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">jcenter</span>()
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">dependencies</span> {
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">classpath</span>(<span style="color:#98c379">&#34;com.android.tools.build:gradle:7.4.2&#34;</span>)
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// NOTE: Do not place your application dependencies here; they belong
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>        <span style="color:#7f848e">// in the individual module build.gradle files
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e"></span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬é…ç½® litepal.xml æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;litepal&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	Define the database name of your application. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	By default each database name should be end with .db. 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	If you didn&#39;t name your database end with .db, 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	LitePal would plus the suffix automatically for you.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	For example:    
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	&lt;dbname value=&#34;demo&#34; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;dbname</span> <span style="color:#e06c75">value=</span><span style="color:#98c379">&#34;BookStore&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	Define the version of your database. Each time you want 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	to upgrade your database, the version tag would helps.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	Modify the models you defined in the mapping tag, and just 
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	make the version value plus one, the upgrade of database
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	will be processed automatically without concern.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">			For example:    
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	&lt;version value=&#34;1&#34; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;version</span> <span style="color:#e06c75">value=</span><span style="color:#98c379">&#34;1&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	Define your models in the list with mapping tag, LitePal will
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	create tables for each mapping class. The supported fields
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	defined in models will be mapped into columns.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	For example:    
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	&lt;list&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    		&lt;mapping class=&#34;com.test.model.Reader&#34; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    		&lt;mapping class=&#34;com.test.model.Magazine&#34; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    	&lt;/list&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;list&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/list&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span>    <span style="color:#7f848e">&lt;!--
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        Define where the .db file should be. &#34;internal&#34; means the .db file
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        will be stored in the database folder of internal storage which no
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        one can access. &#34;external&#34; means the .db file will be stored in the
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        path to the directory on the primary external storage device where
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        the application can place persistent files it owns which everyone
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        can access. &#34;internal&#34; will act as default.
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        For example:
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">        &lt;storage value=&#34;external&#34; /&gt;
</span></span></span><span style="display:flex;"><span><span style="color:#7f848e">    --&gt;</span>
</span></span><span style="display:flex;"><span>    
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/litepal&gt;</span>
</span></span></code></pre></div><p>æœ€åå†é…ç½®ä¸€ä¸‹ LitePalApplication ä¿®æ”¹ AndroidManifest.xmlï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;manifest&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;application</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;org.litepal.LitePalApplication&#34;</span>
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>        ...
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;/application&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/manifest&gt;</span>
</span></span></code></pre></div><hr>
<p>æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª Java Bean ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.litepaltest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">Book</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">id</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">author</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">double</span> <span style="color:#e06c75">price</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">int</span> <span style="color:#e06c75">pages</span>;
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getId</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">id</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setId</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">id</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">id</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">id</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getAuthor</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">author</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setAuthor</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">author</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">author</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">author</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">double</span> <span style="color:#61afef;font-weight:bold">getPrice</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">price</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setPrice</span>(<span style="color:#e5c07b">double</span> <span style="color:#e06c75">price</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">price</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">price</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">int</span> <span style="color:#61afef;font-weight:bold">getPages</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">pages</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setPages</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">pages</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">pages</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">pages</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">String</span> <span style="color:#61afef;font-weight:bold">getName</span>() {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">return</span> <span style="color:#e06c75">name</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">setName</span>(<span style="color:#e06c75">String</span> <span style="color:#e06c75">name</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">this</span>.<span style="color:#e06c75">name</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">name</span>;
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åè®¾ç½®æ˜ å°„å…³ç³»ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;list&gt;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;mapping</span> <span style="color:#e06c75">class=</span><span style="color:#98c379">&#34;com.yikuanzz.litepaltest.Book&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/list&gt;</span>
</span></span></code></pre></div><p>è¿™æ ·æˆ‘ä»¬å·²ç»å¯ä»¥å®Œæˆäº†æ•°æ®è¡¨çš„åˆ›å»ºäº†ï¼Œä½†æ˜¯æˆ‘ä»¬è¦è¿›è¡Œ CRUD æ“ä½œçš„è¯ï¼Œå°±å¿…é¡»è®©æˆ‘ä»¬çš„æ¨¡å‹å¯¹è±¡ç»§æ‰¿ LitePalSupportï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">Book</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">LitePalSupport</span>{
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>æ·»åŠ æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Book</span> <span style="color:#e06c75">book</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Book</span>();
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">setName</span>(<span style="color:#98c379">&#34;The old sea&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">setAuthor</span>(<span style="color:#98c379">&#34;Adam&#34;</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">setPages</span>(<span style="color:#e06c75">666</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">setPrice</span>(<span style="color:#e06c75">65</span>.<span style="color:#e06c75">34</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">save</span>();
</span></span><span style="display:flex;"><span><span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#98c379">&#34;add data&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span></code></pre></div><p>æ›´æ–°æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Book</span> <span style="color:#e06c75">book</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Book</span>();
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">setPrice</span>(<span style="color:#e06c75">9</span>.<span style="color:#e06c75">99</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">book</span>.<span style="color:#e06c75">updateAll</span>(<span style="color:#98c379">&#34;name = ? and author = ?&#34;</span>, <span style="color:#98c379">&#34;The old sea&#34;</span>, <span style="color:#98c379">&#34;Adam&#34;</span>);
</span></span></code></pre></div><p>åˆ é™¤æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">LitePal</span>.<span style="color:#e06c75">deleteAll</span>(<span style="color:#e06c75">Book</span>.<span style="color:#e06c75">class</span>, <span style="color:#98c379">&#34;price &lt; ?&#34;</span>, <span style="color:#98c379">&#34;15&#34;</span>);
</span></span></code></pre></div><p>æŸ¥è¯¢æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Book</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">books</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LitePal</span>.<span style="color:#e06c75">findAll</span>(<span style="color:#e06c75">Book</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span><span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">Book</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">books</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">LitePal</span>.<span style="color:#e06c75">select</span>(<span style="color:#98c379">&#34;name&#34;</span>, <span style="color:#98c379">&#34;author&#34;</span>).<span style="color:#e06c75">order</span>(<span style="color:#98c379">&#34;price desc&#34;</span>).<span style="color:#e06c75">find</span>(<span style="color:#e06c75">Book</span>.<span style="color:#e06c75">class</span>);
</span></span></code></pre></div><h2 id="android-å…±äº«">Android å…±äº«</h2>
<p>å†…å®¹æä¾›å™¨ï¼ˆContent Providerï¼‰ä¸»è¦ç”¨äºä¸åŒåº”ç”¨ç¨‹åºä¹‹é—´å®ç°æ•°æ®å…±äº«åŠŸèƒ½ï¼Œæä¾›äº†å®Œæ•´çš„æœºåˆ¶ï¼Œå…è®¸ä¸€ä¸ªç¨‹åºè®¿é—®å¦ä¸€ä¸ªç¨‹åºä¸­çš„æ•°æ®ï¼ŒåŒæ—¶ä¿è¯è¢«è®¿é—®æ•°æ®çš„å®‰å…¨æ€§ã€‚</p>
<h3 id="è¿è¡Œæ—¶ç¨‹åº">è¿è¡Œæ—¶ç¨‹åº</h3>
<p>Android æƒé™æœ‰ä¸¤ç±»ï¼ŒåŒ…æ‹¬æ™®é€šæƒé™å’Œå±é™©æƒé™ã€‚</p>
<p>æ™®é€šæƒé™ä¸ä¼šç›´æ¥å¨èƒç”¨æˆ·çš„å®‰å…¨å’Œéšç§ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æˆæƒã€‚</p>
<p>å±é™©æƒé™å¯èƒ½ä¼šè§¦åŠç”¨æˆ·éšç§ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨æˆæƒã€‚</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/04/09/asYcQmC9ipRZ6dT.png" >
		<img src="https://s2.loli.net/2024/04/09/asYcQmC9ipRZ6dT.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<hr>
<p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªé¡¹ç›®æ¥å­¦ä¹ è¿è¡Œæ—¶æƒé™çš„ä½¿ç”¨æ–¹æ³•ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.runtimepermissiontest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.core.app.ActivityCompat</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.core.content.ContextCompat</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.pm.PackageManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.net.Uri</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">make_call</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">make_call</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">make_call</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#7f848e">// åˆ¤æ–­ç”¨æˆ·æ˜¯å¦æˆæƒ</span>
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">if</span> (<span style="color:#e06c75">ContextCompat</span>.<span style="color:#e06c75">checkSelfPermission</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">android</span>.<span style="color:#e06c75">Manifest</span>.<span style="color:#e06c75">permission</span>.<span style="color:#e06c75">CALL_PHONE</span>) <span style="color:#56b6c2">!=</span> <span style="color:#e06c75">PackageManager</span>.<span style="color:#e06c75">PERMISSION_GRANTED</span>){
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">ActivityCompat</span>.<span style="color:#e06c75">requestPermissions</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span>{<span style="color:#e06c75">android</span>.<span style="color:#e06c75">Manifest</span>.<span style="color:#e06c75">permission</span>.<span style="color:#e06c75">CALL_PHONE</span>}, <span style="color:#e06c75">1</span>);
</span></span><span style="display:flex;"><span>                } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">call</span>();
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">call</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">try</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">Intent</span>.<span style="color:#e06c75">ACTION_CALL</span>);
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">intent</span>.<span style="color:#e06c75">setData</span>(<span style="color:#e06c75">Uri</span>.<span style="color:#e06c75">parse</span>(<span style="color:#98c379">&#34;tel:10086&#34;</span>));
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">startActivity</span>(<span style="color:#e06c75">intent</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">SecurityException</span> <span style="color:#e06c75">e</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onRequestPermissionsResult</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">requestCode</span>, <span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span> <span style="color:#e06c75">permissions</span>, <span style="color:#61afef">@NonNull</span> <span style="color:#e5c07b">int</span><span style="color:#56b6c2">[]</span> <span style="color:#e06c75">grantResults</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onRequestPermissionsResult</span>(<span style="color:#e06c75">requestCode</span>, <span style="color:#e06c75">permissions</span>, <span style="color:#e06c75">grantResults</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">requestCode</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">1</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#e06c75">grantResults</span>.<span style="color:#e06c75">length</span> <span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">0</span> <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#e06c75">grantResults</span><span style="color:#56b6c2">[</span><span style="color:#e06c75">0</span><span style="color:#56b6c2">]</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">PackageManager</span>.<span style="color:#e06c75">PERMISSION_GRANTED</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">call</span>();
</span></span><span style="display:flex;"><span>            } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#c678dd">this</span>, <span style="color:#98c379">&#34;You denied the permission&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬éœ€è¦å£°æ˜æƒé™ï¼š</p>
<blockquote>
<p>uses-permission åˆ™åƒæ˜¯ä¸€ä¸ªæƒé™åŠ©æ‰‹ï¼Œå¸®åŠ©appå»å‘ç”¨æˆ·è¯·æ±‚appéœ€è¦ä½¿ç”¨çš„æƒé™ã€‚</p>
<p>uses-feature çš„ä½œç”¨æ›´åƒæ˜¯ä¸€ä¸ªè¿‡æ»¤å™¨ï¼Œgoogle play å•†åº—ä¼šæ ¹æ®è¯¥æ ‡ç­¾æ¥è¿‡æ»¤è®¾å¤‡ã€‚</p>
</blockquote>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;uses-feature</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.hardware.telephony&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:required=</span><span style="color:#98c379">&#34;true&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;uses-permission</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.permission.CALL_PHONE&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><h3 id="è®¿é—®å…¶ä»–ç¨‹åºä¸­çš„æ•°æ®">è®¿é—®å…¶ä»–ç¨‹åºä¸­çš„æ•°æ®</h3>
<p>å†…å®¹æä¾›å™¨çš„ç”¨æ³•ä¸€èˆ¬æœ‰ä¸¤ç§ï¼Œä¸€ç§æ˜¯ä½¿ç”¨ç°æœ‰çš„å†…å®¹æä¾›å™¨æ¥è¯»å–å’Œæ“ä½œç›¸åº”ç¨‹åºä¸­çš„æ•°æ®ï¼Œå¦ä¸€ç§æ˜¯åˆ›å»ºè‡ªå·±çš„å†…å®¹æä¾›å™¨ç»™æˆ‘ä»¬ç¨‹åºçš„æ•°æ®æä¾›å¤–éƒ¨è®¿é—®æ¥å£ã€‚</p>
<p><strong>ContentResolver ç”¨æ³•</strong>ï¼š</p>
<p>é€šè¿‡ Context çš„ getContetnResolver() æ–¹æ³•è·å–ç±»çš„å®ä¾‹ï¼Œä¸åŒäº SQLiteDatabasseï¼Œå®ƒçš„ CRUD æ–¹æ³•ä¸æ¥æ”¶è¡¨åå‚æ•°ï¼Œä½¿ç”¨ Uri å‚æ•°æ›¿ä»£ã€‚</p>
<p>å†…å®¹ URI ç»™å†…å®¹æä¾›å™¨ä¸­çš„æ•°æ®å»ºç«‹äº†å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œauthority å’Œ pathï¼Œå¤§æ¦‚é•¿è¿™æ ·å­ï¼š<code>content://com.example.app.provider/table1</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°†å…¶è¿›è¡Œè§£æï¼š<code>Uri uri = Uri.parse(&quot;content://com.example.app.provider/table1&quot;)</code>ã€‚</p>
<p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥ç”¨ Uri æ¥æŸ¥è¯¢æ•°æ®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Curosr</span> <span style="color:#e06c75">cursor</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getContentResolver</span>().<span style="color:#e06c75">query</span>(
</span></span><span style="display:flex;"><span>	<span style="color:#e06c75">uri</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">projection</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">selection</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">selectionArgs</span>,
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">sortOrder</span>
</span></span><span style="display:flex;"><span>);
</span></span></code></pre></div><p><figure 
	>
	<a href="https://s2.loli.net/2024/04/09/lCtr4XvIHn82haV.png" >
		<img src="https://s2.loli.net/2024/04/09/lCtr4XvIHn82haV.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<p><strong>æŸ¥è¯¢æ“ä½œ</strong>ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">if</span> (<span style="color:#e06c75">cursor</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>){
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">while</span> (<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">moveToNext</span>()){
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">String</span> <span style="color:#e06c75">column1</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getString</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#98c379">&#34;column1&#34;</span>));
</span></span><span style="display:flex;"><span>        <span style="color:#e5c07b">int</span> <span style="color:#e06c75">column2</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getInt</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#98c379">&#34;column2&#34;</span>));
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">close</span>();
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><hr>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åšä¸€ä¸ªè¯»å–è”ç³»äººçš„é¡¹ç›®ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;uses-permission</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.permission.READ_CONTACTS&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.contacttest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.annotation.NonNull</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.core.app.ActivityCompat</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.core.content.ContextCompat</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.Manifest</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.annotation.SuppressLint</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.pm.PackageManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.database.Cursor</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.strictmode.ExplicitGcViolation</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.provider.ContactsContract</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.ArrayAdapter</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.ListView</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Toast</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.ArrayList</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">java.util.List</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">ArrayAdapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">adapter</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">List</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">contactsList</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayList</span><span style="color:#56b6c2">&lt;&gt;</span>();
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">ListView</span> <span style="color:#e06c75">contactsView</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">ListView</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">contacts_view</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">adapter</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">ArrayAdapter</span><span style="color:#56b6c2">&lt;</span><span style="color:#e06c75">String</span><span style="color:#56b6c2">&gt;</span>(<span style="color:#c678dd">this</span>, <span style="color:#e06c75">android</span>.<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">simple_list_item_1</span>, <span style="color:#e06c75">contactsList</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">contactsView</span>.<span style="color:#e06c75">setAdapter</span>(<span style="color:#e06c75">adapter</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">ContextCompat</span>.<span style="color:#e06c75">checkSelfPermission</span>(<span style="color:#c678dd">this</span>, <span style="color:#e06c75">Manifest</span>.<span style="color:#e06c75">permission</span>.<span style="color:#e06c75">READ_CONTACTS</span>) <span style="color:#56b6c2">!=</span> <span style="color:#e06c75">PackageManager</span>.<span style="color:#e06c75">PERMISSION_GRANTED</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">ActivityCompat</span>.<span style="color:#e06c75">requestPermissions</span>(<span style="color:#c678dd">this</span>, <span style="color:#c678dd">new</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span>{<span style="color:#e06c75">Manifest</span>.<span style="color:#e06c75">permission</span>.<span style="color:#e06c75">READ_CONTACTS</span>}, <span style="color:#e06c75">1</span>);
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">readContacts</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">private</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">readContacts</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">try</span> (<span style="color:#e06c75">Cursor</span> <span style="color:#e06c75">cursor</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">getContentResolver</span>().<span style="color:#e06c75">query</span>(<span style="color:#e06c75">ContactsContract</span>.<span style="color:#e06c75">CommonDataKinds</span>.<span style="color:#e06c75">Phone</span>.<span style="color:#e06c75">CONTENT_URI</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>, <span style="color:#e5c07b">null</span>)) {
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#e06c75">cursor</span> <span style="color:#56b6c2">!=</span> <span style="color:#e5c07b">null</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">while</span> (<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">moveToNext</span>()) {
</span></span><span style="display:flex;"><span>                    <span style="color:#61afef">@SuppressLint</span>(<span style="color:#98c379">&#34;Range&#34;</span>) <span style="color:#e06c75">String</span> <span style="color:#e06c75">displayName</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getString</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#e06c75">ContactsContract</span>.<span style="color:#e06c75">CommonDataKinds</span>.<span style="color:#e06c75">Phone</span>.<span style="color:#e06c75">DISPLAY_NAME</span>));
</span></span><span style="display:flex;"><span>                    <span style="color:#61afef">@SuppressLint</span>(<span style="color:#98c379">&#34;Range&#34;</span>) <span style="color:#e06c75">String</span> <span style="color:#e06c75">number</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getString</span>(<span style="color:#e06c75">cursor</span>.<span style="color:#e06c75">getColumnIndex</span>(<span style="color:#e06c75">ContactsContract</span>.<span style="color:#e06c75">CommonDataKinds</span>.<span style="color:#e06c75">Phone</span>.<span style="color:#e06c75">DISPLAY_NAME</span>));
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">contactsList</span>.<span style="color:#e06c75">add</span>(<span style="color:#e06c75">displayName</span> <span style="color:#56b6c2">+</span> <span style="color:#98c379">&#34;\n&#34;</span> <span style="color:#56b6c2">+</span> <span style="color:#e06c75">number</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">adapter</span>.<span style="color:#e06c75">notifyDataSetChanged</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        } <span style="color:#c678dd">catch</span> (<span style="color:#e06c75">Exception</span> <span style="color:#e06c75">e</span>) {
</span></span><span style="display:flex;"><span>            <span style="color:#e06c75">e</span>.<span style="color:#e06c75">printStackTrace</span>();
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onRequestPermissionsResult</span>(<span style="color:#e5c07b">int</span> <span style="color:#e06c75">requestCode</span>, <span style="color:#61afef">@NonNull</span> <span style="color:#e06c75">String</span><span style="color:#56b6c2">[]</span> <span style="color:#e06c75">permissions</span>, <span style="color:#61afef">@NonNull</span> <span style="color:#e5c07b">int</span><span style="color:#56b6c2">[]</span> <span style="color:#e06c75">grantResults</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onRequestPermissionsResult</span>(<span style="color:#e06c75">requestCode</span>, <span style="color:#e06c75">permissions</span>, <span style="color:#e06c75">grantResults</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">if</span> (<span style="color:#e06c75">requestCode</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">1</span>){
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">if</span> (<span style="color:#e06c75">grantResults</span>.<span style="color:#e06c75">length</span> <span style="color:#56b6c2">&gt;</span> <span style="color:#e06c75">0</span> <span style="color:#56b6c2">&amp;&amp;</span> <span style="color:#e06c75">grantResults</span><span style="color:#56b6c2">[</span><span style="color:#e06c75">0</span><span style="color:#56b6c2">]</span> <span style="color:#56b6c2">==</span> <span style="color:#e06c75">PackageManager</span>.<span style="color:#e06c75">PERMISSION_GRANTED</span>){
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">readContacts</span>();
</span></span><span style="display:flex;"><span>            } <span style="color:#c678dd">else</span>{
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">makeText</span>(<span style="color:#c678dd">this</span>, <span style="color:#98c379">&#34;You denied the permission&#34;</span>, <span style="color:#e06c75">Toast</span>.<span style="color:#e06c75">LENGTH_SHORT</span>).<span style="color:#e06c75">show</span>();
</span></span><span style="display:flex;"><span>            }
</span></span><span style="display:flex;"><span>        }
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="è‡ªå®šä¹‰å†…å®¹æä¾›å™¨">è‡ªå®šä¹‰å†…å®¹æä¾›å™¨</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MyProvider</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">ContentPovider</span>{
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h2 id="android-åª’ä½“">Android åª’ä½“</h2>
<h3 id="é€šçŸ¥">é€šçŸ¥</h3>
<p>é€šçŸ¥ä¸€èˆ¬æ˜¯åœ¨ç¨‹åºè¿›å…¥åˆ°åå°çš„æ—¶å€™æ‰ä¼šè¦ä½¿ç”¨ï¼Œå¯ä»¥åœ¨æ´»åŠ¨ã€å¹¿æ’­æ¥æ”¶å™¨ã€æœåŠ¡é‡Œé¢åˆ›å»ºã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">NotificationManager</span> <span style="color:#e06c75">manager</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">NotificationManager</span>)<span style="color:#e06c75">getSystemManager</span>(<span style="color:#e06c75">Context</span>.<span style="color:#e06c75">NOTIFICATION_SERVICE</span>);
</span></span></code></pre></div><p>é€šè¿‡ç±»æ„é€ å™¨åˆ›å»º Notification å¯¹è±¡ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">Notification</span> <span style="color:#e06c75">notification</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NotificationCompt</span>.<span style="color:#e06c75">Builder</span>(<span style="color:#e06c75">context</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#e06c75">setContentTitle</span>(<span style="color:#98c379">&#34;Content Title&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#e06c75">setContentText</span>(<span style="color:#98c379">&#34;Content Text&#34;</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#e06c75">setWhen</span>(<span style="color:#e06c75">System</span>.<span style="color:#e06c75">currentTimeMillis</span>())
</span></span><span style="display:flex;"><span>    .<span style="color:#e06c75">setSmallIcon</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">small_icon</span>)
</span></span><span style="display:flex;"><span>    .<span style="color:#e06c75">setLargetIcon</span>(<span style="color:#e06c75">BitmapFactory</span>.<span style="color:#e06c75">decodeResource</span>(<span style="color:#e06c75">getResources</span>(), <span style="color:#e06c75">R</span>.<span style="color:#e06c75">drawable</span>.<span style="color:#e06c75">large_icon</span>))
</span></span><span style="display:flex;"><span>    .<span style="color:#e06c75">build</span>();
</span></span></code></pre></div><p>ç„¶åæˆ‘ä»¬è°ƒç”¨æ–¹æ³•è®©é€šçŸ¥æ˜¾ç¤ºï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">manager</span>.<span style="color:#e06c75">notify</span>(<span style="color:#e06c75">1</span>, <span style="color:#e06c75">notification</span>);
</span></span></code></pre></div><hr>
<p>æ¥ä¸‹æ¥æˆ‘ä»¬åšä¸€ä¸‹å®ä¾‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;uses-permission</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.permission.POST_NOTIFICATIONS&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.notificationtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.core.app.NotificationCompat</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.Notification</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.NotificationChannel</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.NotificationManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.graphics.BitmapFactory</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">sendNotice</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">send_notice</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">sendNotice</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">NotificationChannel</span> <span style="color:#e06c75">notificationChannel</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">NotificationManager</span> <span style="color:#e06c75">manager</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">NotificationManager</span>) <span style="color:#e06c75">getSystemService</span>(<span style="color:#e06c75">NOTIFICATION_SERVICE</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">if</span> (<span style="color:#e06c75">android</span>.<span style="color:#e06c75">os</span>.<span style="color:#e06c75">Build</span>.<span style="color:#e06c75">VERSION</span>.<span style="color:#e06c75">SDK_INT</span> <span style="color:#56b6c2">&gt;=</span> <span style="color:#e06c75">android</span>.<span style="color:#e06c75">os</span>.<span style="color:#e06c75">Build</span>.<span style="color:#e06c75">VERSION_CODES</span>.<span style="color:#e06c75">O</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">notificationChannel</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NotificationChannel</span>(<span style="color:#98c379">&#34;001&#34;</span>, <span style="color:#98c379">&#34;channel_name&#34;</span>, <span style="color:#e06c75">NotificationManager</span>.<span style="color:#e06c75">IMPORTANCE_HIGH</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">manager</span>.<span style="color:#e06c75">createNotificationChannel</span>(<span style="color:#e06c75">notificationChannel</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Notification</span> <span style="color:#e06c75">notification</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NotificationCompat</span>.<span style="color:#e06c75">Builder</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#98c379">&#34;001&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setContentTitle</span>(<span style="color:#98c379">&#34;Content Title&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setContentText</span>(<span style="color:#98c379">&#34;Content Text&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setWhen</span>(<span style="color:#e06c75">System</span>.<span style="color:#e06c75">currentTimeMillis</span>())
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setSmallIcon</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">mipmap</span>.<span style="color:#e06c75">ic_launcher</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setLargeIcon</span>(<span style="color:#e06c75">BitmapFactory</span>.<span style="color:#e06c75">decodeResource</span>(<span style="color:#e06c75">getResources</span>(), <span style="color:#e06c75">R</span>.<span style="color:#e06c75">mipmap</span>.<span style="color:#e06c75">ic_launcher</span>))
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">build</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">manager</span>.<span style="color:#e06c75">notify</span>(<span style="color:#e06c75">1</span>, <span style="color:#e06c75">notification</span>);
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>è¿™ä¸ªæ—¶å€™ï¼Œæˆ‘ä»¬ç‚¹å‡»é€šçŸ¥çš„æ—¶å€™è¿˜æ²¡æœ‰å“åº”ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Šç‚¹å‡»åŠŸèƒ½ã€‚</p>
<p>è¿™é‡Œæ–°å»º NotifcationActivity å’Œ notification_layoutï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;RelativeLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.NotificationLayoutActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;TextView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_centerInParent=</span><span style="color:#98c379">&#34;true&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;This is notification&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:textSize=</span><span style="color:#98c379">&#34;24sp&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/RelativeLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.notificationtest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.appcompat.app.AppCompatActivity</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">androidx.core.app.NotificationCompat</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.Notification</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.NotificationChannel</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.NotificationManager</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.PendingIntent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.graphics.BitmapFactory</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.Bundle</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.view.View</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.widget.Button</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MainActivity</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">AppCompatActivity</span> {
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">protected</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onCreate</span>(<span style="color:#e06c75">Bundle</span> <span style="color:#e06c75">savedInstanceState</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">super</span>.<span style="color:#e06c75">onCreate</span>(<span style="color:#e06c75">savedInstanceState</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">setContentView</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">layout</span>.<span style="color:#e06c75">activity_main</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">Button</span> <span style="color:#e06c75">sendNotice</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">Button</span>) <span style="color:#e06c75">findViewById</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">id</span>.<span style="color:#e06c75">send_notice</span>);
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">sendNotice</span>.<span style="color:#e06c75">setOnClickListener</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">View</span>.<span style="color:#e06c75">OnClickListener</span>() {
</span></span><span style="display:flex;"><span>            <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>            <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">onClick</span>(<span style="color:#e06c75">View</span> <span style="color:#e06c75">v</span>) {
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">Intent</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">NotificationLayoutActivity</span>.<span style="color:#e06c75">class</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">PendingIntent</span> <span style="color:#e06c75">pi</span> <span style="color:#56b6c2">=</span> <span style="color:#e06c75">PendingIntent</span>.<span style="color:#e06c75">getActivity</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#e06c75">0</span>, <span style="color:#e06c75">intent</span>, <span style="color:#e06c75">PendingIntent</span>.<span style="color:#e06c75">FLAG_IMMUTABLE</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">NotificationChannel</span> <span style="color:#e06c75">notificationChannel</span> <span style="color:#56b6c2">=</span> <span style="color:#e5c07b">null</span>;
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">NotificationManager</span> <span style="color:#e06c75">manager</span> <span style="color:#56b6c2">=</span> (<span style="color:#e06c75">NotificationManager</span>) <span style="color:#e06c75">getSystemService</span>(<span style="color:#e06c75">NOTIFICATION_SERVICE</span>);
</span></span><span style="display:flex;"><span>                <span style="color:#c678dd">if</span> (<span style="color:#e06c75">android</span>.<span style="color:#e06c75">os</span>.<span style="color:#e06c75">Build</span>.<span style="color:#e06c75">VERSION</span>.<span style="color:#e06c75">SDK_INT</span> <span style="color:#56b6c2">&gt;=</span> <span style="color:#e06c75">android</span>.<span style="color:#e06c75">os</span>.<span style="color:#e06c75">Build</span>.<span style="color:#e06c75">VERSION_CODES</span>.<span style="color:#e06c75">O</span>) {
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">notificationChannel</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NotificationChannel</span>(<span style="color:#98c379">&#34;001&#34;</span>, <span style="color:#98c379">&#34;channel_name&#34;</span>, <span style="color:#e06c75">NotificationManager</span>.<span style="color:#e06c75">IMPORTANCE_HIGH</span>);
</span></span><span style="display:flex;"><span>                    <span style="color:#e06c75">manager</span>.<span style="color:#e06c75">createNotificationChannel</span>(<span style="color:#e06c75">notificationChannel</span>);
</span></span><span style="display:flex;"><span>                }
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">Notification</span> <span style="color:#e06c75">notification</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">NotificationCompat</span>.<span style="color:#e06c75">Builder</span>(<span style="color:#e06c75">MainActivity</span>.<span style="color:#e06c75">this</span>, <span style="color:#98c379">&#34;001&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setContentTitle</span>(<span style="color:#98c379">&#34;Content Title&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setContentText</span>(<span style="color:#98c379">&#34;Content Text&#34;</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setWhen</span>(<span style="color:#e06c75">System</span>.<span style="color:#e06c75">currentTimeMillis</span>())
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setSmallIcon</span>(<span style="color:#e06c75">R</span>.<span style="color:#e06c75">mipmap</span>.<span style="color:#e06c75">ic_launcher</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setLargeIcon</span>(<span style="color:#e06c75">BitmapFactory</span>.<span style="color:#e06c75">decodeResource</span>(<span style="color:#e06c75">getResources</span>(), <span style="color:#e06c75">R</span>.<span style="color:#e06c75">mipmap</span>.<span style="color:#e06c75">ic_launcher</span>))
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">setContentIntent</span>(<span style="color:#e06c75">pi</span>)
</span></span><span style="display:flex;"><span>                    	.<span style="color:#e06c75">setAutoCancel</span>(<span style="color:#e5c07b">true</span>)
</span></span><span style="display:flex;"><span>                        .<span style="color:#e06c75">build</span>();
</span></span><span style="display:flex;"><span>                <span style="color:#e06c75">manager</span>.<span style="color:#e06c75">notify</span>(<span style="color:#e06c75">1</span>, <span style="color:#e06c75">notification</span>);
</span></span><span style="display:flex;"><span>             }
</span></span><span style="display:flex;"><span>        });
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><h3 id="æ‘„åƒå¤´å’Œç›¸å†Œ">æ‘„åƒå¤´å’Œç›¸å†Œ</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:orientation=</span><span style="color:#98c379">&#34;vertical&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;Button</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/take_photo&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:text=</span><span style="color:#98c379">&#34;Take Photo&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;ImageView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/picture&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_gravity=</span><span style="color:#98c379">&#34;center_horizontal&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;wrap_content&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;wrap_content&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><p>æˆ‘ä»¬æ¥ä¸‹å°±å†™è°ƒç”¨æ‘„åƒå¤´çš„é€»è¾‘ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"></code></pre></div><h2 id="android-ç½‘ç»œ">Android ç½‘ç»œ</h2>
<h3 id="webview-æ§ä»¶">WebView æ§ä»¶</h3>
<p>å¦‚æœæˆ‘ä»¬éœ€è¦åœ¨åº”ç”¨ç¨‹åºä¸­å±•ç¤ºé¡µé¢ï¼Œå°±è¦ç”¨åˆ° WebView æ¥åµŒå…¥ç½‘é¡µã€‚</p>
<p>æ³¨æ„ï¼Œæˆ‘ä»¬åŠ å…¥æƒé™å£°æ˜ã€‚</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#e06c75">&lt;uses-permission</span> <span style="color:#e06c75">android:name=</span><span style="color:#98c379">&#34;android.permission.INTERNET&#34;</span><span style="color:#e06c75">/&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-xml" data-lang="xml"><span style="display:flex;"><span><span style="color:#7f848e">&lt;?xml version=&#34;1.0&#34; encoding=&#34;utf-8&#34;?&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;LinearLayout</span> <span style="color:#e06c75">xmlns:android=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res/android&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:app=</span><span style="color:#98c379">&#34;http://schemas.android.com/apk/res-auto&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">xmlns:tools=</span><span style="color:#98c379">&#34;http://schemas.android.com/tools&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">tools:context=</span><span style="color:#98c379">&#34;.MainActivity&#34;</span><span style="color:#e06c75">&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#e06c75">&lt;WebView</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:id=</span><span style="color:#98c379">&#34;@+id/web_view&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_width=</span><span style="color:#98c379">&#34;match_parent&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#e06c75">android:layout_height=</span><span style="color:#98c379">&#34;match_parent&#34;</span> <span style="color:#e06c75">/&gt;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#e06c75">&lt;/LinearLayout&gt;</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"></code></pre></div><h2 id="android-æœåŠ¡">Android æœåŠ¡</h2>
<p>æœåŠ¡ï¼ˆServiceï¼‰æ˜¯ Android å®ç°ç¨‹åºåå°æœåŠ¡è¿è¡Œçš„è§£å†³æ–¹æ¡ˆï¼Œé€‚åˆä¸éœ€è¦å’Œç”¨æˆ·äº¤äº’è€Œä¸”æ˜¯è¦æ±‚é•¿æœŸè¿è¡Œçš„ä»»åŠ¡ã€‚</p>
<p>æœåŠ¡æ˜¯ä¾èµ–äºåˆ›å»ºè¯¥æœåŠ¡çš„è¿›ç¨‹çš„ï¼Œæˆ‘ä»¬è¦æ±‚åœ¨æœåŠ¡å†…éƒ¨åˆ›å»ºå­çº¿ç¨‹æ¥æ‰§è¡Œä»»åŠ¡ã€‚</p>
<h3 id="å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</h3>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">class</span> <span style="color:#e5c07b">MyThread</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">Thread</span>{
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">run</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å¤„ç†çš„é€»è¾‘</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>çº¿ç¨‹çš„å¯åŠ¨ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯ï¼š<code>new MyThread().start();</code>ã€‚</p>
<p>ä¸€èˆ¬æ¥è¯´ï¼Œæˆ‘ä»¬ä¼šé€‰æ‹©å®ç° Runnable æ¥å£çš„æ–¹å¼æ¥å®šä¹‰çº¿ç¨‹ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">class</span> <span style="color:#e5c07b">MyThread</span> <span style="color:#c678dd">implements</span> <span style="color:#e06c75">Runnable</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">run</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å¤„ç†çš„é€»è¾‘</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div><p>é‚£æˆ‘ä»¬çš„å¯åŠ¨äº†æ–¹å¼å°±å˜æˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#e06c75">MyThread</span> <span style="color:#e06c75">myThread</span> <span style="color:#56b6c2">=</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">MyThread</span>();
</span></span><span style="display:flex;"><span><span style="color:#c678dd">new</span> <span style="color:#e06c75">Thread</span>(<span style="color:#e06c75">myThread</span>).<span style="color:#e06c75">start</span>();
</span></span></code></pre></div><p>å½“ç„¶æˆ‘ä»¬è¿˜æœ‰åŒ¿åå‡½æ•°çš„å¯åŠ¨æ–¹å¼ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">new</span> <span style="color:#e06c75">Thread</span>(<span style="color:#c678dd">new</span> <span style="color:#e06c75">Runnable</span>(){
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e5c07b">void</span> <span style="color:#61afef;font-weight:bold">run</span>(){
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// å¤„ç†çš„é€»è¾‘</span>
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}).<span style="color:#e06c75">start</span>();
</span></span></code></pre></div><h3 id="å¼‚æ­¥æ¶ˆæ¯å¤„ç†">å¼‚æ­¥æ¶ˆæ¯å¤„ç†</h3>
<p>Android ä¸­çš„å¼‚æ­¥æ¶ˆæ¯ä¸»è¦ç”± 4 ä¸ªéƒ¨åˆ†ç»„æˆï¼šMessageã€Handlerã€MessageQueue å’Œ Looperã€‚</p>
<p><strong>Message</strong> æ˜¯åœ¨çº¿ç¨‹ä¹‹é—´ä¼ é€’æ¶ˆæ¯ï¼Œå¯ä»¥åœ¨å†…éƒ¨æºå¸¦å°‘é‡çš„ä¿¡æ¯ï¼Œåœ¨ä¸åŒçº¿ç¨‹ä¹‹é—´äº¤æ¢æ•°æ®ã€‚</p>
<p><strong>Handler</strong> ç”¨äºå‘é€å’Œå¤„ç†æ¶ˆæ¯ï¼Œä½¿ç”¨ <code>sendMessage()</code> å°†æ•°æ®ä¼ é€åˆ° <code>handleMessage()</code> æ–¹æ³•ä¸­ã€‚</p>
<p><strong>MessageQueue</strong> ç”¨äºå­˜æ”¾æ‰€æœ‰é€šè¿‡ Handler å‘é€çš„æ¶ˆæ¯ï¼Œæ¯ä¸ªçº¿ç¨‹ä¸­éƒ½åªä¼šæœ‰ä¸€ä¸ªæ¶ˆæ¯é˜Ÿåˆ—çš„å¯¹è±¡ã€‚</p>
<p><strong>Looper</strong> æ˜¯è´Ÿè´£ç®¡ç†æ¶ˆæ¯é˜Ÿåˆ—çš„ï¼Œè°ƒç”¨å®ƒçš„ <code>loop()</code> æ–¹æ³•åï¼Œå°±ä¼šè¿›å…¥æ— é™çš„å¾ªç¯ä¸­ï¼Œæ¯å½“å‘ç° MessageQueue ä¸­å­˜åœ¨ä¸€æ¡æ¶ˆæ¯ï¼Œå°±ä¼šå°†å®ƒå–å‡ºï¼Œå¹¶ä¼ é€’åˆ° Handler çš„ handleMessage() æ–¹æ³•ä¸­ã€‚</p>
<p><figure 
	>
	<a href="https://s2.loli.net/2024/04/11/1mu9Jcjw6YDU5B2.png" >
		<img src="https://s2.loli.net/2024/04/11/1mu9Jcjw6YDU5B2.png"
			
			
			
			loading="lazy"
			>
	</a>
	
</figure></p>
<hr>
<p>AsyncTask å¯¹å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœ‰æ›´å¥½çš„å°è£…ï¼Œå®ƒä¸€èˆ¬æœ‰ä¸‰ä¸ªå‚æ•°ï¼š</p>
<ul>
<li><strong>Params</strong> æ‰§è¡Œ AsyncTask æ—¶ä¼ å…¥çš„å‚æ•°ï¼Œç”¨äºåœ¨åå°ä»»åŠ¡ä¸­ä½¿ç”¨ã€‚</li>
<li><strong>Progress</strong> åå°ä»»åŠ¡æ‰§è¡Œæ—¶ï¼Œå¦‚æœè¦åœ¨ç•Œé¢ä¸Šæ˜¾ç¤ºè¿›åº¦ï¼Œå°±åœ¨è¿™é‡ŒæŒ‡å®šæ³›å‹ä½œä¸ºè¿›åº¦å•ä½ã€‚</li>
<li><strong>Result</strong> å¯¹ç»“æœè¿›è¡Œè¿”å›ï¼Œç”¨è¿™é‡Œçš„æ³›å‹ä½œä¸ºè¿”å›å€¼çš„ç±»å‹ã€‚</li>
</ul>
<p>é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦é‡å†™å‡ ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><strong>onPreExecute</strong>ï¼šç•Œé¢åˆå§‹åŒ–æ“ä½œã€‚</li>
<li><strong>doInBackground(Params)</strong> è¿™é‡Œçš„ä»£ç ä¼šåœ¨å­çº¿ç¨‹ä¸­æ‰§è¡Œï¼Œæ‰€æœ‰è€—æ—¶ä»»åŠ¡åœ¨è¿™é‡Œå¤„ç†ã€‚</li>
<li><strong>onProgressUpdate(Progress)</strong> åå°ä»»åŠ¡è°ƒç”¨ publishProgress(Progress) æ–¹æ³•åï¼Œè¯¥æ–¹æ³•è¢«è°ƒç”¨ï¼Œå¯¹ UI è¿›è¡Œæ“ä½œã€‚</li>
<li><strong>onPostExecute(Result)</strong> å½“åå°ä»»åŠ¡æ‰§è¡Œå®Œæ¯•é€šè¿‡ return è¯­å¥è¿›è¡Œè¿”å›æ—¶ï¼Œè¿™ä¸ªæ–¹æ³•å¾ˆå¿«å°±ä¼šè¢«è°ƒç”¨ã€‚</li>
</ul>
<h3 id="æœåŠ¡ç”¨æ³•">æœåŠ¡ç”¨æ³•</h3>
<p>æˆ‘ä»¬æ–°å»ºé¡¹ç›®ååˆ›å»ºä¸€ä¸ªæœåŠ¡ï¼Œå®ƒçš„ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span><span style="color:#c678dd">package</span> <span style="color:#e06c75">com.yikuanzz.servicetest</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.app.Service</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.content.Intent</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">import</span> <span style="color:#e06c75">android.os.IBinder</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">public</span> <span style="color:#c678dd">class</span> <span style="color:#e5c07b">MyService</span> <span style="color:#c678dd">extends</span> <span style="color:#e06c75">Service</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#61afef;font-weight:bold">MyService</span>() {
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>    <span style="color:#61afef">@Override</span>
</span></span><span style="display:flex;"><span>    <span style="color:#c678dd">public</span> <span style="color:#e06c75">IBinder</span> <span style="color:#61afef;font-weight:bold">onBind</span>(<span style="color:#e06c75">Intent</span> <span style="color:#e06c75">intent</span>) {
</span></span><span style="display:flex;"><span>        <span style="color:#7f848e">// TODO: Return the communication channel to the service.</span>
</span></span><span style="display:flex;"><span>        <span style="color:#c678dd">throw</span> <span style="color:#c678dd">new</span> <span style="color:#e06c75">UnsupportedOperationException</span>(<span style="color:#98c379">&#34;Not yet implemented&#34;</span>);
</span></span><span style="display:flex;"><span>    }
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></div>
</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/note/">Note</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css"integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"integrity="sha384-vZTG03m&#43;2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    <aside class="related-contents--wrapper">
    
    
        <h2 class="section-title">Related contents</h2>
        <div class="related-contents">
            <div class="flex article-list--tile">
                
                    
<article class="has-image">
    <a href="/2024/%E7%AE%80%E6%98%8E%E7%9A%84go%E5%AD%A6%E4%B9%A0/">
        
        
            <div class="article-image">
                <img src="/2024/%E7%AE%80%E6%98%8E%E7%9A%84go%E5%AD%A6%E4%B9%A0/cover.67bb3671f19af1e9664a10e971934279_hu6c64888fb7dba8ea3f9b3ae918b049b3_2340567_250x150_fill_box_smart1_3.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post ç®€æ˜çš„GOå­¦ä¹ "
                        data-key="ç®€æ˜çš„GOå­¦ä¹ " 
                        data-hash="md5-Z7s2cfGa8elmShDpcZNCeQ==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ç®€æ˜çš„GOå­¦ä¹ </h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/2024/shell%E5%AD%A6%E4%B9%A0/">
        
        
            <div class="article-image">
                <img src="/2024/shell%E5%AD%A6%E4%B9%A0/cover.51251896a6af909388445aa0d04e4754_hu87cba6621d1cba6cf29db5a9878ced61_565035_250x150_fill_box_smart1_3.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post Shellå­¦ä¹ "
                        data-key="Shellå­¦ä¹ " 
                        data-hash="md5-USUYlqavkJOIRFqg0E5HVA==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">Shellå­¦ä¹ </h2>
        </div>
    </a>
</article>
                
                    
<article class="has-image">
    <a href="/2024/%E7%B3%BB%E7%BB%9F%E7%BA%A7io/">
        
        
            <div class="article-image">
                <img src="/2024/%E7%B3%BB%E7%BB%9F%E7%BA%A7io/cover.294b91817829c50173f6c56acd748118_hub73ae7b0ed1c4909ac831706abf2ed8e_880514_250x150_fill_box_smart1_3.png" 
                        width="250" 
                        height="150" 
                        loading="lazy"
                        alt="Featured image of post ç³»ç»Ÿçº§IO"
                        data-key="ç³»ç»Ÿçº§IO" 
                        data-hash="md5-KUuRgXgpxQFz9sVqzXSBGA==">
                
            </div>
        

        <div class="article-details">
            <h2 class="article-title">ç³»ç»Ÿçº§IO</h2>
        </div>
    </a>
</article>
                
            </div>
        </div>
    
</aside>

     
     
        
    <script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://npm.elemecdn.com/@waline/emojis@1.1.0/bilibili","https://npm.elemecdn.com/@waline/emojis@1.1.0/bmoji","https://npm.elemecdn.com/@waline/emojis@1.1.0/weibo"],"lang":"zh-CN","locale":{"admin":"ç«™é•¿","sofa":"è¿˜æ²¡æœ‰äººè¯„è®ºå“¦ï¼å¿«æ¥æŠ¢æ²™å‘å§~"},"placeholder":"æ¬¢è¿ç•™è¨€ï¼","requiredMeta":["name","email","url"],"serverURL":"https://vercel-db-yikuanzzs-projects.vercel.app/"});
</script>

    

    <footer class="site-footer">
  


    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    


<script>
(function(u, c) {
  var d = document, t = 'script', o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = u;
  if (c) { o.addEventListener('load', function(e) { c(e); }); }
  s.parentNode.insertBefore(o, s);
})('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
  pangu.spacingPage();
});
</script>

    <section class="copyright">
        &copy; 
        
        2024 <a href="https://yikuanzz.github.io//">Yikuanzz</a>Â·<i class="fas fa-bell"></i> <a id="days">0</a>Days<br>
      å…±ä¹¦å†™äº†136.5kå­—Â·å…± 22ç¯‡æ–‡ç« </br><span><p>
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a><br />
         <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">Â© Licensed Under CC BY-NC-SA 4.0</a>
    </section>

<script>
var s1 = '2024-03-22';
s1 = new Date(s1.replace(/-/g, "/"));
s2 = new Date();
var days = s2.getTime() - s1.getTime();
var number_of_days = parseInt(days / (1000 * 60 * 60 * 24));
document.getElementById('days').innerHTML = number_of_days;
</script>
    
</footer>



    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
    
    
    <aside class="sidebar right-sidebar sticky">
        
            <form action="/search/" class="search-form widget" >
        <p>
            <label>Search</label>
            <input name="keyword" required placeholder="Type something..." />
        
            <button title="Search">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
        
            
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#android-ä»‹ç»">Android ä»‹ç»</a>
      <ol>
        <li><a href="#android-ç³»ç»Ÿæ¶æ„">Android ç³»ç»Ÿæ¶æ„</a></li>
        <li><a href="#android-é¡¹ç›®ç›®å½•">Android é¡¹ç›®ç›®å½•</a></li>
        <li><a href="#è¯¦è§£-buildgradle">è¯¦è§£ build.gradle</a></li>
        <li><a href="#android-æ—¥å¿—å·¥å…·">Android æ—¥å¿—å·¥å…·</a></li>
      </ol>
    </li>
    <li><a href="#android-æ´»åŠ¨">Android æ´»åŠ¨</a>
      <ol>
        <li><a href="#toast">Toast</a></li>
        <li><a href="#menu">Menu</a></li>
        <li><a href="#intent">Intent</a></li>
        <li><a href="#ç”Ÿå‘½å‘¨æœŸ">ç”Ÿå‘½å‘¨æœŸ</a></li>
        <li><a href="#æ´»åŠ¨çš„å¯åŠ¨æ¨¡å¼">æ´»åŠ¨çš„å¯åŠ¨æ¨¡å¼</a></li>
        <li><a href="#æ´»åŠ¨çš„å®è·µ">æ´»åŠ¨çš„å®è·µ</a></li>
      </ol>
    </li>
    <li><a href="#android-è®¾è®¡">Android è®¾è®¡</a>
      <ol>
        <li><a href="#å¸¸è§æ§ä»¶ç”¨æ³•">å¸¸è§æ§ä»¶ç”¨æ³•</a></li>
        <li><a href="#å¸¸è§å¸ƒå±€">å¸¸è§å¸ƒå±€</a></li>
        <li><a href="#è‡ªå®šä¹‰æ§ä»¶">è‡ªå®šä¹‰æ§ä»¶</a></li>
        <li><a href="#æœ€å¸¸ç”¨å’Œæœ€éš¾ç”¨çš„æ§ä»¶">æœ€å¸¸ç”¨å’Œæœ€éš¾ç”¨çš„æ§ä»¶</a></li>
        <li><a href="#æ›´å¼ºå¤§çš„æ»šåŠ¨æ§ä»¶">æ›´å¼ºå¤§çš„æ»šåŠ¨æ§ä»¶</a></li>
        <li><a href="#ç•Œé¢å®æˆ˜-ç®€å•èŠå¤©ç•Œé¢">ç•Œé¢å®æˆ˜-ç®€å•èŠå¤©ç•Œé¢</a></li>
      </ol>
    </li>
    <li><a href="#android-ç¢ç‰‡">Android ç¢ç‰‡</a>
      <ol>
        <li><a href="#ç¢ç‰‡çš„ä½¿ç”¨">ç¢ç‰‡çš„ä½¿ç”¨</a></li>
        <li><a href="#ç¢ç‰‡çš„ç”Ÿå‘½å‘¨æœŸ">ç¢ç‰‡çš„ç”Ÿå‘½å‘¨æœŸ</a></li>
        <li><a href="#åŠ¨æ€åŠ è½½å¸ƒå±€çš„æŠ€å·§">åŠ¨æ€åŠ è½½å¸ƒå±€çš„æŠ€å·§</a></li>
        <li><a href="#ç¢ç‰‡å®æˆ˜-ç®€æ˜“çš„æ–°é—»åº”ç”¨">ç¢ç‰‡å®æˆ˜-ç®€æ˜“çš„æ–°é—»åº”ç”¨</a></li>
      </ol>
    </li>
    <li><a href="#android-å¹¿æ’­">Android å¹¿æ’­</a>
      <ol>
        <li><a href="#åŠ¨æ€æ³¨å†Œç›‘å¬ç½‘ç»œå˜åŒ–">åŠ¨æ€æ³¨å†Œç›‘å¬ç½‘ç»œå˜åŒ–</a></li>
        <li><a href="#é™æ€æ³¨å†Œå®ç°å¼€æœºå¯åŠ¨">é™æ€æ³¨å†Œå®ç°å¼€æœºå¯åŠ¨</a></li>
        <li><a href="#è‡ªå®šä¹‰å¹¿æ’­">è‡ªå®šä¹‰å¹¿æ’­</a></li>
        <li><a href="#æœ¬åœ°å¹¿æ’­">æœ¬åœ°å¹¿æ’­</a></li>
        <li><a href="#å¹¿æ’­å®æˆ˜-å¼ºåˆ¶ä¸‹çº¿">å¹¿æ’­å®æˆ˜-å¼ºåˆ¶ä¸‹çº¿</a></li>
      </ol>
    </li>
    <li><a href="#android-å­˜å‚¨">Android å­˜å‚¨</a>
      <ol>
        <li><a href="#æ–‡ä»¶å­˜å‚¨">æ–‡ä»¶å­˜å‚¨</a></li>
        <li><a href="#sharedpreference-å­˜å‚¨">SharedPreference å­˜å‚¨</a></li>
        <li><a href="#sqliste-æ•°æ®åº“å­˜å‚¨">SQListe æ•°æ®åº“å­˜å‚¨</a></li>
        <li><a href="#litepal-æ“ä½œæ•°æ®åº“">LitePal æ“ä½œæ•°æ®åº“</a></li>
      </ol>
    </li>
    <li><a href="#android-å…±äº«">Android å…±äº«</a>
      <ol>
        <li><a href="#è¿è¡Œæ—¶ç¨‹åº">è¿è¡Œæ—¶ç¨‹åº</a></li>
        <li><a href="#è®¿é—®å…¶ä»–ç¨‹åºä¸­çš„æ•°æ®">è®¿é—®å…¶ä»–ç¨‹åºä¸­çš„æ•°æ®</a></li>
        <li><a href="#è‡ªå®šä¹‰å†…å®¹æä¾›å™¨">è‡ªå®šä¹‰å†…å®¹æä¾›å™¨</a></li>
      </ol>
    </li>
    <li><a href="#android-åª’ä½“">Android åª’ä½“</a>
      <ol>
        <li><a href="#é€šçŸ¥">é€šçŸ¥</a></li>
        <li><a href="#æ‘„åƒå¤´å’Œç›¸å†Œ">æ‘„åƒå¤´å’Œç›¸å†Œ</a></li>
      </ol>
    </li>
    <li><a href="#android-ç½‘ç»œ">Android ç½‘ç»œ</a>
      <ol>
        <li><a href="#webview-æ§ä»¶">WebView æ§ä»¶</a></li>
      </ol>
    </li>
    <li><a href="#android-æœåŠ¡">Android æœåŠ¡</a>
      <ol>
        <li><a href="#å¤šçº¿ç¨‹">å¤šçº¿ç¨‹</a></li>
        <li><a href="#å¼‚æ­¥æ¶ˆæ¯å¤„ç†">å¼‚æ­¥æ¶ˆæ¯å¤„ç†</a></li>
        <li><a href="#æœåŠ¡ç”¨æ³•">æœåŠ¡ç”¨æ³•</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

        
            <section class="widget categories">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>


  
        </div> 
        <h2 class="widget-title section-title">Categories</h2>
    <div class="widget-categories--list">
<div class="widget">
    <h3 class="widget-title"> </h3>
    <div class="widget-body">
        <div class="category-list">
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E5%BC%80%E5%8F%91%E8%BF%90%E7%BB%B4%E6%8A%80%E6%9C%AF/" class="category-list-link">å¼€å‘è¿ç»´æŠ€æœ¯<span class="category-list-count">6</a>
            </span></div>
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E6%8A%80%E6%9C%AF%E4%B8%8E%E6%95%88%E7%8E%87/" class="category-list-link">æŠ€æœ¯ä¸æ•ˆç‡<span class="category-list-count">9</a>
            </span></div>
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E6%95%B0%E5%AD%A6%E4%B8%8E%E7%89%A9%E7%90%86/" class="category-list-link">æ•°å­¦ä¸ç‰©ç†<span class="category-list-count">1</a>
            </span></div>
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-list-link">æ•°æ®åº“<span class="category-list-count">1</a>
            </span></div>
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E7%AE%97%E6%B3%95%E4%B8%8E%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="category-list-link">ç®—æ³•ä¸æ•°æ®ç»“æ„<span class="category-list-count">2</a>
            </span></div>
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E8%AF%AD%E8%A8%80%E5%AD%A6%E4%B9%A0/" class="category-list-link">è¯­è¨€å­¦ä¹ <span class="category-list-count">3</a>
            </span></div>
        </div>
    </div>
</div>
    </div>
    </section>
        
            <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>



        </div>
        <h2 class="widget-title section-title">Archives</h2>

        
        
        
        
        
        <div class="widget-archive--list">
            <div class="archives-year">
                    <a href="/archives/#2024">
                        
                            <span class="year">2024</span>
                            <span class="count">22</span>
                        
                    </a> 
                </div>
            
        </div>
    </section>
        
            <section class="widget tagCloud">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



    </div>
    <h2 class="widget-title section-title">Tags</h2>

    <div class="tagCloud-tags">
        
            <a href="/tags/note/" class="font_size_8">
                Note
            </a>
        
            <a href="/tags/web/" class="font_size_3">
                Web
            </a>
        
            <a href="/tags/%E8%8B%B1%E8%AF%AD/" class="font_size_3">
                è‹±è¯­
            </a>
        
            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" class="font_size_3">
                è®¡ç®—æœºç½‘ç»œ
            </a>
        
            <a href="/tags/c/" class="font_size_2">
                C
            </a>
        
            <a href="/tags/linux/" class="font_size_2">
                Linux
            </a>
        
            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" class="font_size_2">
                è®¡ç®—æœºç»„æˆåŸç†
            </a>
        
            <a href="/tags/mysql/" class="font_size_1">
                MySQL
            </a>
        
            <a href="/tags/python/" class="font_size_1">
                Python
            </a>
        
            <a href="/tags/shell/" class="font_size_1">
                Shell
            </a>
        
    </div>
</section>
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
