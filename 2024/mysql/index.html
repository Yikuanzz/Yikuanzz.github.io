<!DOCTYPE html>
<html lang="en-us">
    <head><meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'><meta name='description' content='Âü∫Á°ÄÁØá MySQLÊ¶ÇËø∞ Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ Êï∞ÊçÆÂ∫ìÔºàData BaseÔºâÔºöÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰ªìÂ∫ìÔºåÂπ∂‰∏îÊòØÊúâÁªÑÁªáÁöÑÂ≠òÂÇ®„ÄÇ Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÔºàData Base Management SystemÔºâ'><title>MySQL</title>

<link rel='canonical' href='https://yikuanzz.github.io/2024/mysql/'>

<link rel="stylesheet" href="/scss/style.min.46208cabd58e8bcef0cfb7d7ea6b561adcca3b91dd1fc6657493a44f03c5db75.css"><meta property='og:title' content='MySQL'>
<meta property='og:description' content='Âü∫Á°ÄÁØá MySQLÊ¶ÇËø∞ Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ Êï∞ÊçÆÂ∫ìÔºàData BaseÔºâÔºöÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰ªìÂ∫ìÔºåÂπ∂‰∏îÊòØÊúâÁªÑÁªáÁöÑÂ≠òÂÇ®„ÄÇ Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÔºàData Base Management SystemÔºâ'>
<meta property='og:url' content='https://yikuanzz.github.io/2024/mysql/'>
<meta property='og:site_name' content='Yikuanzz'>
<meta property='og:type' content='article'><meta property='article:section' content='Post' /><meta property='article:tag' content='MySQL' /><meta property='article:tag' content='Note' /><meta property='article:published_time' content='2024-03-22T15:51:46&#43;08:00'/><meta property='article:modified_time' content='2024-03-22T15:51:46&#43;08:00'/><meta property='og:image' content='https://yikuanzz.github.io/2024/mysql/cover.png' />
<meta name="twitter:title" content="MySQL">
<meta name="twitter:description" content="Âü∫Á°ÄÁØá MySQLÊ¶ÇËø∞ Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ Êï∞ÊçÆÂ∫ìÔºàData BaseÔºâÔºöÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰ªìÂ∫ìÔºåÂπ∂‰∏îÊòØÊúâÁªÑÁªáÁöÑÂ≠òÂÇ®„ÄÇ Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÔºàData Base Management SystemÔºâ"><meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content='https://yikuanzz.github.io/2024/mysql/cover.png' />
    <link rel="shortcut icon" href="https://s2.loli.net/2024/03/22/Z5UYhgiHmGofML8.jpg" />
<style>
    :root {
        --article-font-family: "Noto Serif SC", var(--base-font-family);
    }
</style>

<script> 
		(function () {
		    const customFont = document.createElement('link');
		    customFont.href = "https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@300;700&display=swap"; 
		    customFont.type = "text/css";
		    customFont.rel = "stylesheet";
		
		    document.head.appendChild(customFont);
		}());
</script>

    </head>
    <body class="
    article-page
">
    <script>
        (function() {
            const colorSchemeKey = 'StackColorScheme';
            if(!localStorage.getItem(colorSchemeKey)){
                localStorage.setItem(colorSchemeKey, "auto");
            }
        })();
    </script><script>
    (function() {
        const colorSchemeKey = 'StackColorScheme';
        const colorSchemeItem = localStorage.getItem(colorSchemeKey);
        const supportDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches === true;

        if (colorSchemeItem == 'dark' || colorSchemeItem === 'auto' && supportDarkMode) {
            

            document.documentElement.dataset.scheme = 'dark';
        } else {
            document.documentElement.dataset.scheme = 'light';
        }
    })();
</script>
<div class="container main-container flex 
    <!-- 
        extended
     -->
    on-phone--column extended
">
    
<div id="article-toolbar">
    <a href="https://yikuanzz.github.io/" class="back-home">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-chevron-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="15 6 9 12 15 18" />
</svg>



        <span>Back</span>
    </a>
</div>
    <aside class="sidebar left-sidebar sticky">
    <button class="hamburger hamburger--spin" type="button" id="toggle-menu" aria-label="Toggle Menu">
        <span class="hamburger-box">
            <span class="hamburger-inner"></span>
        </span>
    </button>

    <header class="site-info">
        
            
            <figure class="site-avatar">
                <a href="/">
                
                    
                    
                    
                        
                        <img src="/img/aa2_hue12ee8e79b9cb68bf5d1297bba3d9824_12551_300x0_resize_box_3.png" width="300"
                            height="300" class="site-logo" loading="lazy" alt="Avatar">
                    
                
                </a>
                
                    <span class="emoji">üéß</span>
                
            </figure>
            
        
        
        <h1 class="site-name"><a href="/">Yikuanzz</a></h1>
        <h2 class="site-description">Anytimes you like.</h2><ol class="social-menu">
                
                    <li>
                        <a 
                            href='https://space.bilibili.com/15264235'
                            target="_blank"
                            title="Bilibili"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-bilibili" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#87CEFA" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M3 10a4 4 0 0 1 4 -4h10a4 4 0 0 1 4 4v6a4 4 0 0 1 -4 4h-10a4 4 0 0 1 -4 -4v-6z" />
  <path d="M8 3l2 3" />
  <path d="M16 3l-2 3" />
  <path d="M9 13v-2" />
  <path d="M15 11v2" />
</svg>
                            
                        </a>
                    </li>
                
                    <li>
                        <a 
                            href='https://github.com/Yikuanzz'
                            target="_blank"
                            title="GitHub"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-github" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#ff9300" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5" />
</svg>



                            
                        </a>
                    </li>
                
                    <li>
                        <a 
                            href='https://www.zhihu.com/people/dolikes'
                            target="_blank"
                            title="Zhihu"
                        >
                            
                            
                                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-brand-zhihu" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#009988" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M14 6h6v12h-2l-2 2l-1 -2h-1z" />
  <path d="M4 12h6.5" />
  <path d="M10.5 6h-5" />
  <path d="M6 4c-.5 2.5 -1.5 3.5 -2.5 4.5" />
  <path d="M8 6v7c0 4.5 -2 5.5 -4 7" />
  <path d="M11 18l-3 -5" />
</svg>
                            
                        </a>
                    </li>
                
            </ol></header>

    <ol class="menu" id="main-menu">
        
        
        

        <li >
            <a href='/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-home" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <polyline points="5 12 3 12 12 3 21 12 19 12" />
  <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
  <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
</svg>



                
                <span>È¶ñÈ°µ</span>
            </a>
        </li>
        
        

        <li >
            <a href='/gossip' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-book-2" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#C1C1C1" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
  <path d="M19 4v16h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12z" />
  <path d="M19 16h-12a2 2 0 0 0 -2 2" />
  <path d="M9 8h6" />
</svg>
                
                <span>ÊùÇË∞à</span>
            </a>
        </li>
        
        

        <li >
            <a href='/%E5%85%B3%E4%BA%8E/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="7" r="4" />
  <path d="M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
</svg>



                
                <span>ÂÖ≥‰∫é</span>
            </a>
        </li>
        
        

        <li >
            <a href='/archives/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-archive" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <rect x="3" y="4" width="18" height="4" rx="2" />
  <path d="M5 8v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-10" />
  <line x1="10" y1="12" x2="14" y2="12" />
</svg>



                
                <span>ÂΩíÊ°£</span>
            </a>
        </li>
        
        

        <li >
            <a href='/search/' >
                
                
                
                    <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



                
                <span>ÊêúÁ¥¢</span>
            </a>
        </li>
        

        
            <li id="dark-mode-toggle">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-left" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="8" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-toggle-right" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="16" cy="12" r="2" />
  <rect x="2" y="6" width="20" height="12" rx="6" />
</svg>



                <span>Dark Mode</span>
            </li>
        
    </ol>
</aside>

<main class="main full-width">
    <article class="has-image main-article">
    <header class="article-header">
        <div class="article-image">
            <a href="/2024/mysql/">
                <img src="/2024/mysql/cover_huf4d320014c591f4e374d934afecc756b_255935_800x0_resize_box_3.png"
                        srcset="/2024/mysql/cover_huf4d320014c591f4e374d934afecc756b_255935_800x0_resize_box_3.png 800w, /2024/mysql/cover_huf4d320014c591f4e374d934afecc756b_255935_1600x0_resize_box_3.png 1600w"
                        width="800" 
                        height="420" 
                        loading="lazy"
                        alt="Featured image of post MySQL" />
                
            </a>
        </div>
    

    <div class="article-details">
    
    <header class="article-category">
        
            <a href="/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="background-color: #2a9d8f; color: #fff;">
                Êï∞ÊçÆÂ∫ì
            </a>
        
    </header>
    

    <h2 class="article-title">
        <a href="/2024/mysql/">MySQL</a>
    </h2>

    

    
    <footer class="article-time">
        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-calendar-time" width="56" height="56" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11.795 21h-6.795a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v4" />
  <circle cx="18" cy="18" r="4" />
  <path d="M15 3v4" />
  <path d="M7 3v4" />
  <path d="M3 11h16" />
  <path d="M18 16.496v1.504l1 1" />
</svg>
                <time class="article-time--published">Mar 22, 2024</time>
            </div>
        

        
            <div>
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-clock" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <polyline points="12 7 12 12 15 15" />
</svg>



                <time class="article-words">
                    17283Â≠ó
                </time>
            </div>
        
    </footer>
    
</div>
</header>

    <section class="article-content">
    
    
    <h1 id="Âü∫Á°ÄÁØá">Âü∫Á°ÄÁØá</h1>
<h2 id="mysqlÊ¶ÇËø∞">MySQLÊ¶ÇËø∞</h2>
<h3 id="Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ">Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ</h3>
<p>Êï∞ÊçÆÂ∫ìÔºàData BaseÔºâÔºöÂ≠òÂÇ®Êï∞ÊçÆÁöÑ‰ªìÂ∫ìÔºåÂπ∂‰∏îÊòØÊúâÁªÑÁªáÁöÑÂ≠òÂÇ®„ÄÇ</p>
<p>Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüÔºàData Base Management SystemÔºâÔºöÊìçÁ∫µÂíåÁÆ°ÁêÜÊï∞ÊçÆÂ∫ìÁöÑÂ§ßÂûãËΩØ‰ª∂„ÄÇ</p>
<p>SQLÔºàStructured Query LanguageÔºâÔºöÊìç‰ΩúÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÁöÑÁºñÁ®ãËØ≠Ë®Ä„ÄÇ</p>
<h3 id="mysql-Êï∞ÊçÆÂ∫ì">MySQL Êï∞ÊçÆÂ∫ì</h3>
<pre><code class="language-shell"># ËøûÊé• MySQL
mysql -u username -p
</code></pre>
<p>Êï∞ÊçÆÊ®°ÂûãÔºöÂÆ¢Êà∑Á´Ø &raquo; Êï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªü &raquo; Êï∞ÊçÆÂ∫ì„ÄÇ</p>
<p>ÂÖ≥Á≥ªÂûãÊï∞ÊçÆÂ∫ìÔºàRDBMSÔºâÔºöÁî±Â§öÂº†‰∫íÁõ∏ËøûÊé•ÁöÑ‰∫åÁª¥Ë°®ÁªÑÊàêÁöÑÊï∞ÊçÆÂ∫ì„ÄÇ</p>
<h2 id="sql">SQL</h2>
<h3 id="sql-ÈÄöÁî®ËØ≠Ê≥ï">SQL ÈÄöÁî®ËØ≠Ê≥ï</h3>
<pre><code class="language-mysql">-- Ê≥®ÈáäÂÜôÊ≥ï1 : ‰∏çÂå∫ÂàÜÂ§ßÂ∞èÂÜôÔºåÂÖ≥ÈîÆÂ≠óÂª∫ËÆÆÂ§ßÂÜô
# Ê≥®ÈáäÂÜôÊ≥ï2 : ÂèØ‰ª•‰ΩøÁî®Áº©ËøõÊàñÁ©∫Ê†º
/*	Ê≥®ÈáäÂÜôÊ≥ï3 */
</code></pre>
<h3 id="sql-ÂàÜÁ±ª">SQL ÂàÜÁ±ª</h3>
<p>DDLÔºàData Definition LanguageÔºâÔºöÂÆö‰πâÊï∞ÊçÆÂ∫ì„ÄÅË°®„ÄÅÂ≠óÊÆµ„ÄÇ</p>
<p>DMLÔºàData Manipulation LanguageÔºâÔºöË°®‰∏≠Êï∞ÊçÆÂ¢û„ÄÅÂà†„ÄÅÊîπ„ÄÇ</p>
<p>DQLÔºàData Query LanguageÔºâÔºöÊü•ËØ¢Êï∞ÊçÆÂ∫ìË°®ËÆ∞ÂΩï„ÄÇ</p>
<p>DCLÔºàData Control LanguageÔºâÔºöÂàõÂª∫Êï∞ÊçÆÂ∫ìÁî®Êà∑„ÄÅÊéßÂà∂Êï∞ÊçÆÂ∫ìËÆøÈóÆÊùÉÈôê„ÄÇ</p>
<h3 id="Êï∞ÊçÆÁ±ªÂûã">Êï∞ÊçÆÁ±ªÂûã</h3>
<p>Êï∞ÂÄºÁ±ªÂûãÔºö</p>
<p>TINYINTÔºà1 byteÔºâ„ÄÅSMALLINTÔºà2 bytesÔºâ„ÄÅMEDIUMINTÔºà3 bytesÔºâ„ÄÅINTÔºà4 bytesÔºâ„ÄÅBIGINTÔºà8 bytesÔºâ„ÄÅFLOATÔºà4 bytesÔºâ„ÄÅDOUBLEÔºà8 bytesÔºâ„ÄÇ</p>
<p>Â≠óÁ¨¶‰∏≤Á±ªÂûãÔºö</p>
<p>CHAR„ÄÅVARCHAR„ÄÅTINYBLOB„ÄÅTINYTEXT„ÄÅBLOB„ÄÅTEXT„ÄÅMEDIUMBLOB„ÄÅMEDIUMTEXT„ÄÅLONGBLOB„ÄÅLONGTEXT„ÄÇ</p>
<p>Êó•ÊúüÁ±ªÂûãÔºö</p>
<p>DATEÔºàYYYY-MM-DDÔºâ„ÄÅTIMEÔºàHH:MM:SSÔºâ„ÄÅYEARÔºàYYYYÔºâ„ÄÅDATETIMEÔºàYYYY-MM-DD HH:MM:SSÔºâ„ÄÅTIMESTAMPÔºàYYYY-MM-DD HH:MM:SSÔºâ</p>
<h3 id="ddl">DDL</h3>
<pre><code class="language-mysql">/* Êï∞ÊçÆÂ∫ìÁöÑÊìç‰Ωú */
# Êü•ËØ¢ÊâÄÊúâÊï∞ÊçÆÂ∫ì
SHOW DATABASES;

# Êü•ËØ¢ÂΩìÂâçÊï∞ÊçÆÂ∫ì
SELECT DATABASE();

# ÂàõÂª∫Êï∞ÊçÆÂ∫ì
CREATE DATABSE [IF NOT EXISTS] Êï∞ÊçÆÂ∫ìÂêç [DEFAULT CHARSET Â≠óÁ¨¶ÈõÜ] [COLLATE ÊéíÂ∫èËßÑÂàô];

# ‰ΩøÁî®Êï∞ÊçÆÂ∫ì 
USE Êï∞ÊçÆÂ∫ìÂêç;

# Âà†Èô§
DROP DATABASE [IF NOT EXISTS] Êï∞ÊçÆÂ∫ìÂêç;
</code></pre>
<pre><code class="language-mysql">/* Ë°®Êìç‰Ωú */
# Êü•ËØ¢ÊâÄÊúâÊï∞ÊçÆË°®
SHOW TABLES;

# Êü•ËØ¢Ë°®ÁªìÊûÑ
DESC Ë°®Âêç;

# Êü•ËØ¢Ë°®ÁöÑÂª∫Ë°®ËØ≠Âè•
SHOW CREATE TABLE Ë°®Âêç;

# ÂàõÂª∫Ë°®
CREATE TABLE Ë°®Âêç(
    Â≠óÊÆµ1 Â≠óÊÆµ1Á±ªÂûã[COMMENT Â≠óÊÆµ1Ê≥®Èáä],
	Â≠óÊÆµ2 Â≠óÊÆµ2Á±ªÂûã[COMMENT Â≠óÊÆµ2Ê≥®Èáä],
    Â≠óÊÆµ3 Â≠óÊÆµ3Á±ªÂûã[COMMENT Â≠óÊÆµ3Ê≥®Èáä],
)[COMMENT Ë°®Ê≥®Èáä];

# Ê∑ªÂä†Â≠óÊÆµ
ALTER TABLE Ë°®Âêç ADD Â≠óÊÆµÂêç Á±ªÂûã(ÈïøÂ∫¶) [COMMENT Ê≥®Èáä][Á∫¶Êùü];

# ‰øÆÊîπÊï∞ÊçÆÁ±ªÂûã
ALTER TABLE Ë°®Âêç MODIFY Â≠óÊÆµÂêç Êñ∞Êï∞ÊçÆÁ±ªÂûã(ÈïøÂ∫¶);

# ‰øÆÊîπÂ≠óÊÆµÂêçÂíåÂ≠óÊÆµÁ±ªÂûã
ALTER TABLE Ë°®Âêç CHANGE ÊóßÂ≠óÊÆµÂêç Êñ∞Â≠óÊÆµÂêç Á±ªÂûã(ÈïøÂ∫¶) [COMMENT Ê≥®Èáä] [Á∫¶Êùü];

# Âà†Èô§Â≠óÊÆµ
ALTER TABLE Ë°®Âêç DROP Â≠óÊÆµÂêç;

# ‰øÆÊîπË°®Âêç
ALTER TABLE Ë°®Âêç RENAME TO Êñ∞Ë°®Âêç;

# Âà†Èô§Ë°®
DROP TABLE [IF EXISTS] Ë°®Âêç;

# Âà†Èô§ÊåáÂÆöË°®Âπ∂ÈáçÊñ∞ÂàõÂª∫ËØ•Ë°®
TRUNCATE TABLE Ë°®Âêç;
</code></pre>
<h3 id="dml">DML</h3>
<pre><code class="language-mysql"># ÁªôÊåáÂÆöÂ≠óÊÆµÊ∑ªÂä†Êï∞ÊçÆ
INSERT INTO Ë°®Âêç(Â≠óÊÆµÂêç1, Â≠óÊÆµÂêç2, ...) VALUES(ÂÄº1, ÂÄº2, ...);

# ÁªôÂÖ®ÈÉ®Â≠óÊÆµÊ∑ªÂä†Êï∞ÊçÆ
INSERT INTO Ë°®ÂêçÂ≠ó VALUES(ÂÄº1, ÂÄº2, ...);

# ‰øÆÊîπÊï∞ÊçÆ
UPDATE Ë°®Âêç SET Â≠óÊÆµÂêç1 = ÂÄº1, Â≠óÊÆµÂêç2 = ÂÄº2, ... [WHERE Êù°‰ª∂];

# Âà†Èô§Êï∞ÊçÆ
DELETE FROM Ë°®Âêç [WHERE Êù°‰ª∂];
</code></pre>
<h3 id="dql">DQL</h3>
<pre><code class="language-mysql">SELECT
	Â≠óÊÆµÂàóË°®
FROM
	Ë°®ÂêçÂàóË°®
WHERE
	Êù°‰ª∂ÂàóË°®
GROUP BY
	ÂàÜÁªÑÂ≠óÊÆµÂàóË°®
HAVING
	ÂàÜÁªÑÂêéÊù°‰ª∂ÂàóË°®
ORDER BY
	ÊéíÂ∫èÂ≠óÊÆµÂàóË°®
LIMIT
	ÂàÜÈ°µÂèÇÊï∞
</code></pre>
<pre><code class="language-mysql"># Êü•ËØ¢Â§ö‰∏™Â≠óÊÆµ
SELECT Â≠óÊÆµ1, Â≠óÊÆµ2, Â≠óÊÆµ3 ... FROM Ë°®Âêç;
SELECT * FROM Ë°®Âêç;

# ËÆæÁΩÆÂà´Âêç
SELECT Â≠óÊÆµ1[AS Âà´Âêç1], Â≠óÊÆµ2[AS Âà´Âêç2] .. FROM Ë°®Âêç;

# ÂéªÈô§ÈáçÂ§çËÆ∞ÂΩï
SELECT DISTINCT Â≠óÊÆµÂàóË°® FROM Ë°®Âêç;

# Êü•ËØ¢Ê≤°ÊúâË∫´‰ªΩËØÅÂè∑ÁöÑÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE idcard IS NULL;

# Êü•ËØ¢ 15Â≤Å Âà∞ 20Â≤Å ‰πãÈó¥ÁöÑÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE age &gt;= 15 and age &lt;= 20;
SELECT * FROM emp WHERE age BETWEEN 20 and 15;

# Êü•ËØ¢Âπ¥ÈæÑ‰∏∫ 18Â≤Å Êàñ 20Â≤Å Êàñ 40Â≤Å ÁöÑÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE age = 18 OR age = 20 OR age = 40;
SELECT * FROM emp WHERE age IN(18, 20, 40);

# Êü•ËØ¢ÂßìÂêç‰∏∫‰∏§‰∏™Â≠óÁöÑÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE name LIKE '__';

# Êü•ËØ¢Ë∫´‰ªΩËØÅÊúÄÂêé‰∏Ä‰ΩçÊòØXÁöÑÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE idcard LIKE '%X';

# ÁªüËÆ°‰ºÅ‰∏öÂëòÂ∑•Êï∞ÊçÆÈáè
SELECT COUNT(*) FROM emp;

# Ê†πÊçÆÊÄßÂà´ÂàÜÁªÑÔºåÁªüËÆ°Áî∑ÊÄßÂëòÂ∑•ÂíåÂ•≥ÊÄßÂëòÂ∑•ÁöÑÊï∞Èáè
SELECT gender, count(*) FROM emp GROUP BY gender;

# Êü•ËØ¢Âπ¥ÈæÑÂ∞è‰∫é 45Â≤Å ÁöÑÂëòÂ∑•ÔºåÂπ∂Ê†πÊçÆÂ∑•‰ΩúÂú∞ÂùÄÂàÜÁªÑÔºåËé∑ÂèñÂëòÂ∑•Êï∞ÈáèÂ§ß‰∫é3ÁöÑÂ∑•‰ΩúÂú∞ÂùÄ
SELECT workaddress, count(*) FROM emp WHERE age&lt;45 GROUP BY workaddress HAVING count(*)&gt;3;

# Ê†πÊçÆÂπ¥ÈæÑÂØπÂÖ¨Âè∏ÁöÑÂëòÂ∑•ËøõË°åÂçáÂ∫èÊéíÂ∫è
SELECT * FROM emp ORDER BY age ASC;

# Ê†πÊçÆÂÖ•ËÅåÊó∂Èó¥ÂØπÂëòÂ∑•ËøõË°åÈôçÂ∫èÊéíÂ∫è
SELECT * FROM emp ORDER BY entrydate DESC;

# ÂÖàÊåâÂπ¥ÈæÑÂçáÂ∫èÊéíÔºåÂπ¥ÈæÑÂêåÁöÑÊåâÂÖ•ËÅåÊó∂Èó¥ÈôçÂ∫èÊéí
SELECT * FROM emp ORDER BY age ASC, entrydate DESC;

# Êü•ËØ¢Á¨¨ 1 È°µÂëòÂ∑•Êï∞ÊçÆÔºåÊØèÈ°µÂ±ïÁ§∫ 10 Êù°ËÆ∞ÂΩï
SELECT * FROM emp LIMIT 0, 10;

# Êü•ËØ¢Á¨¨ 2 È°µÂëòÂ∑•Êï∞ÊçÆÔºåÊØèÈ°µÂ±ïÁ§∫ 10 Êù°ËÆ∞ÂΩï
SELECT * FROM emp LIMIT 10,10;
</code></pre>
<h3 id="dcl">DCL</h3>
<pre><code class="language-mysql"># Êü•ËØ¢Áî®Êà∑
USE mysql;
SELECT * FROM USER;

# ÂàõÂª∫Áî®Êà∑
CREATE USER 'Áî®Êà∑Âêç'@'‰∏ªÊú∫Âêç' IDENTIFIED BY 'ÂØÜÁ†Å';

# ‰øÆÊîπÁî®Êà∑ÂØÜÁ†Å
ALTER USER 'Áî®Êà∑Âêç'@'‰∏ªÊú∫Âêç' IDENTIFIED WITH mysql_native_password BY 'Êñ∞ÂØÜÁ†Å';

# Âà†Èô§Áî®Êà∑
DROP USER 'Áî®Êà∑Âêç'@'‰∏ªÊú∫Âêç';

# Êü•ËØ¢ÊùÉÈôê
SHOW GRANTS FOR 'Áî®Êà∑Âêç'@'‰∏ªÊú∫Âêç';

# Êéà‰∫àÊùÉÈôê
GRANT ÊùÉÈôêÂàóË°® ON Êï∞ÊçÆÂ∫ìÂêç.Ë°®Âêç TO 'Áî®Êà∑Âêç'@'‰∏ªÊú∫Âêç';

# Êí§ÈîÄÊùÉÈôê
REVOKE ÊùÉÈôêÂàóË°® ON Êï∞ÊçÆÂ∫ìÂêç.Ë°®Âêç FROM 'Áî®Êà∑Âêç'@'‰∏ªÊú∫Âêç';
</code></pre>
<h2 id="ÂáΩÊï∞">ÂáΩÊï∞</h2>
<h3 id="Â≠óÁ¨¶‰∏≤ÂáΩÊï∞">Â≠óÁ¨¶‰∏≤ÂáΩÊï∞</h3>
<pre><code class="language-mysql">-- concat
SELECT CONCAT('Hello ', 'MySQL');

-- LOWER
SELECT LOWER('Hello');

-- UPPER
SELECT UPPER('Hello');

-- LPAD
SELECT LPAD('01', 5, '-');

-- RPAD
SELECT RPAD('01', 5, '-');

-- TRIM
SELECT TRIM(' Hello MySQL ');

-- SUBSTRIMG
SELECT SUBSTRING('Hello MySQL', 1, 5);

</code></pre>
<h3 id="Êï∞ÂÄºÂáΩÊï∞">Êï∞ÂÄºÂáΩÊï∞</h3>
<pre><code class="language-mysql">-- CEIL(x)
SELECT CEIL(1.1);

-- FLOOR(x)
SELECT FLOOR(1.9);

-- MOD(x,y)
SELECT MOD(3, 4);

-- RAND()
SELECT RAND();

-- ROUND(x,y)
SELECT ROUND(3.1415926, 2);

</code></pre>
<h3 id="Êó•ÊúüÂáΩÊï∞">Êó•ÊúüÂáΩÊï∞</h3>
<pre><code class="language-mysql">-- CURDATE()
SELECT CURDATE();

-- CURTIME()
SELECT CURTIME();

-- NOW()
SELECT NOW();

-- YEAR, MONTH, DAY
SELECT YEAR(NOW());
SELECT MONTH(NOW());
SELECT DAY(NOW());

-- DATE_ADD(date, INTERVAL expr type)
SELECT DATE_ADD(NOW(), INTERVAL 70 DAY);

-- DATEDIFF(date1, date2)
SELECT DATEDIFF('2024-02-29', '2023-11-11');

</code></pre>
<h3 id="ÊµÅÁ®ãÂáΩÊï∞">ÊµÅÁ®ãÂáΩÊï∞</h3>
<pre><code class="language-mysql">-- IF
SELECT IF(FALSE, 'OK', 'ERROR');

-- IFNULL
SELECT IFNULL('Get', 'DEFAULT');
SELECT IFNULL('', 'DEFATLT');
SELECT IFNULL(null, 'DEFATLT');

-- CASE WHEN[val1] THEN[res1] ... ELSE[default] END
SELECT name, CASE WHEN score &gt;= 85 THEN '‰ºòÁßÄ' WHEN score &gt;= 60 THEN 'ÂèäÊ†º' ELSE '‰∏çÂèäÊ†º' END FROM student_score;

-- CASE [expr] WHEN[val1] THEN[res1] ... ELSE[default] END
SELECT name, CASE workaddress WHEN 'Âåó‰∫¨' THEN '‰∏ÄÁ∫øÂüéÂ∏Ç' WHEN '‰∏äÊµ∑' THEN '‰∏ÄÁ∫øÂüéÂ∏Ç'ELSE '‰∫åÁ∫øÂüéÂ∏Ç' END FROM emp; 

</code></pre>
<h2 id="Á∫¶Êùü">Á∫¶Êùü</h2>
<p>Á∫¶ÊùüÂåÖÊã¨Ôºö</p>
<ul>
<li>1„ÄÅ‰∏ªÈîÆÁ∫¶ÊùüÔºöÊØè‰∏™Ë°®‰ºöÊúâ‰∏Ä‰∏™ÂîØ‰∏ÄÊ†áËØÜË°®ÁöÑÂ≠óÊÆµ„ÄÇ</li>
<li>2„ÄÅÂ§ñÈîÆÁ∫¶ÊùüÔºöË°®‰∏≠ÁöÑÊüêÂ≠óÊÆµÁî±Âè¶Â§ñ‰∏Ä‰∏™Ë°®ÁöÑ‰∏ªÈîÆÂÜ≥ÂÆö„ÄÇ</li>
<li>3„ÄÅÂîØ‰∏ÄÁ∫¶ÊùüÔºöÁ°Æ‰øùËØ•Â≠óÊÆµÁöÑÊØè‰∏™Â≠óÊÆµÂÄºÊòØÂîØ‰∏ÄÁöÑÔºåÂÖÅËÆ∏Á©∫ÂÄº„ÄÇ</li>
<li>4„ÄÅÊ£ÄÊü•Á∫¶ÊùüÔºöÁî®‰∫éÊ£ÄÊü•Êï∞ÊçÆË°®‰∏≠ÔºåÂ≠óÊÆµÂÄºÊòØÂê¶ÊúâÊïà„ÄÇ</li>
<li>5„ÄÅÈùûÁ©∫Á∫¶ÊùüÔºöÁî®Êù•Á∫¶ÊùüÊï∞ÊçÆË°®‰∏≠ÔºåÂ≠óÊÆµÂÄº‰∏çËÉΩ‰∏∫Á©∫„ÄÇ</li>
<li>6„ÄÅÈªòËÆ§ÂÄºÁ∫¶ÊùüÔºöÂΩìË°®‰∏≠ÊüêÂ≠óÊÆµ‰∏çËæìÂÖ•ÂÄºÊó∂ÔºåËá™Âä®‰∏∫ÂÖ∂Ê∑ªÂä†ËÆæÂÆöÂ•ΩÁöÑÂÄº„ÄÇ</li>
</ul>
<h3 id="Â∏∏ËßÅÁ∫¶Êùü">Â∏∏ËßÅÁ∫¶Êùü</h3>
<pre><code class="language-mysql">CREATE TABLE USER(
	id INT PRIMARY KEY AUTO_INCREMENT COMMENT '‰∏ªÈîÆ',
    name VARCHAR(10) NOT NULL UNIQUE COMMENT 'ÂßìÂêç',
    age INT CHECK(age &gt; 0 AND age &lt;= 120) COMMENT 'Âπ¥ÈæÑ',
    status CHAR(1) DEFAULT '1' COMMENT 'Áä∂ÊÄÅ',
	gender CHAR(1) COMMENT 'ÊÄßÂà´'
) COMMENT 'Áî®Êà∑Ë°®';

</code></pre>
<h3 id="Â§ñÈîÆÁ∫¶Êùü">Â§ñÈîÆÁ∫¶Êùü</h3>
<pre><code class="language-mysql">CREATE TABLE emp(
    id INT PRIMARY KEY AUTO_INCREMENT COMMENT '‰∏ªÈîÆ',
    name VARCHAR(10) NOT NULL UNIQUE COMMENT 'ÂßìÂêç',
	age INT CHECK(age &gt; 0 AND age &lt;= 120) COMMENT 'Âπ¥ÈæÑ',
    salary INT CHECK(salary &gt; 0) NOT NULL COMMENT 'Ëñ™ËµÑ',
    entrydate NOT NULL COMMENT 'ÂÖ•ËÅåÊó∂Èó¥',
    managerid INT COMMENT 'Áõ¥Â±ûÈ¢ÜÂØºID',
    dept_id INT 'ÈÉ®Èó®ID'
) COMMENT 'ÂëòÂ∑•Ë°®';

CREATE TABLE dept(
	id INT PRIMARY KEY AUTO_INCREMENT COMMENT 'ID',
    name VARCHAR(50) NOT NULL COMMENT 'ÈÉ®Èó®ÂêçÁß∞'
) COMMENT 'ÈÉ®Èó®Ë°®';

# Ê∑ªÂä†Â§ñÈîÆ
ALTER TABLE emp ADD CONSTRAINT fk_emp_dept_id FOREIGN KEY (dept_id) REFERENCES dept(id) ON UPDATE CASCADE ON DELETE CASCADE;

ALTER TABLE emp ADD CONSTRAINT fk_emp_dept_id FOREIGN KEY (dept_id) REFERENCES dept(id) ON UPDATE CASCADE ON DELETE SET NULL;

# Âà†Èô§Â§ñÈîÆ
ALTER TABLE emp DROP FOREIGN KEY fk_emp_dept_id;

</code></pre>
<h2 id="Â§öË°®Êü•ËØ¢">Â§öË°®Êü•ËØ¢</h2>
<h3 id="Â§öË°®ÂÖ≥Á≥ª">Â§öË°®ÂÖ≥Á≥ª</h3>
<pre><code class="language-mysql">CREATE TABLE student(
	id INT PRIMARY KEY AUTO_INCREMENT COMMENT '‰∏ªÈîÆ',
    name VARCHAR(10) COMMENT 'ÂßìÂêç',
    sid VARCHAR(10) COMMENT 'Â≠¶Âè∑'
) COMMENT 'Â≠¶ÁîüË°®';

CREATE TABLE course(
	id INT PRIMARY KEY AUTO_INCREMENT COMMENT '‰∏ªÈîÆ',
    name VARCHAR(10) COMMENT 'ËØæÁ®ãÂêçÁß∞'
)COMMENT 'ËØæÁ®ãË°®';

CREATE TABLE student_course(
	id INT PRIMARY KEY AUTO_INCREMENT COMMENT '‰∏ªÈîÆ',
    studentid INT COMMENT 'Â≠¶ÁîüID',
    courseid INT COMMENT 'ËØæÁ®ãID',
    CONSTRAINT fk_courseid FOREIGN KEY (courseid) REFERENCES course(id),
    CONSTRAINT fk_studentid FOREIGN KEY (studentid) REFERENCES student(id)
)COMMENT 'Â≠¶ÁîüÈÄâËØæË°®';

</code></pre>
<h3 id="Â§öË°®Êü•ËØ¢Ê¶ÇËø∞">Â§öË°®Êü•ËØ¢Ê¶ÇËø∞</h3>
<pre><code class="language-mysql"># Â§öË°®Êü•ËØ¢ - Á¨õÂç°Â∞îÁßØ
SELECT * FROM emp, dept WHERE emp.detp_id = dept.id;

</code></pre>
<h3 id="ÂÜÖËøûÊé•">ÂÜÖËøûÊé•</h3>
<pre><code class="language-mysql"># ÂÜÖËøûÊé•Êü•ËØ¢ÁöÑÊòØ‰∏§Âº†‰∫§ÈõÜÁöÑÈÉ®ÂàÜ
SELECT Â≠óÊÆµÂàóË°® FROM Ë°®1, Ë°®2 WHERE Êù°‰ª∂ ...;
SELECT Â≠óÊÆµÂàóË°® FROM Ë°®1 [INNER] JOIN Ë°®2 ON ËøûÊé•Êù°‰ª∂;

</code></pre>
<h3 id="Â§ñËøûÊé•">Â§ñËøûÊé•</h3>
<pre><code class="language-mysql"># Â∑¶Â§ñËøûÊé•
SELECT Â≠óÊÆµÂàóË°® FROM Ë°®1 LEFT [OUTER] JOIN Ë°®2 ON Êù°‰ª∂ ...;

# Âè≥Â§ñËøûÊé•
SELECT Â≠óÊÆµÂàóË°® FROM Ë°®1 RIGHT [OUTER] JOIN Ë°®2 ON Êù°‰ª∂ ...;

</code></pre>
<h3 id="Ëá™ËøûÊé•">Ëá™ËøûÊé•</h3>
<pre><code class="language-mysql"># Ëá™ËøûÊé•ÂèØ‰ª•ÊòØÂÜÖËøûÊé•‰πüÂèØ‰ª•ÊòØÂ§ñËøûÊé•
SELECT Â≠óÊÆµÂàóË°® FROM Ë°®A Âà´ÂêçA JOIN Ë°®A Âà´ÂêçB ON Êù°‰ª∂ ...;
SELECT Â≠óÊÆµÂàóË°® FROM Ë°®A Âà´ÂêçA LEFT[OR RIGHT] [OUTER] JOIN Ë°®B Âà´ÂêçB ON Êù°‰ª∂ ...;

</code></pre>
<h3 id="ËÅîÂêàÊü•ËØ¢">ËÅîÂêàÊü•ËØ¢</h3>
<pre><code class="language-mysql"># UNION ALL ÊòØ‰∏çÂêàÂπ∂Áõ∏Âêå‰ø°ÊÅØ
SELECT * FROM emp WHERE salary &lt; 5000
UNION ALL
SELECT * FROM emp WHERE age &gt; 50;

</code></pre>
<h3 id="Â≠êÊü•ËØ¢">Â≠êÊü•ËØ¢</h3>
<pre><code class="language-mysql"># ÂµåÂ•óÊü•ËØ¢Â∞±ÊòØÂ≠êÊü•ËØ¢
SELECT * FROM t1 WHERE column1 = (SELECT column1 FROM t2);

# Êü•ËØ¢ÈîÄÂîÆÈÉ®ÊâÄÊúâÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE dept_id = (SELECT id FROM dept WHERE name = 'ÈîÄÂîÆÈÉ®');

# Êü•ËØ¢ÈîÄÂîÆÈÉ®ÂíåÂ∏ÇÂú∫ÈÉ®ÊâÄÊúâÂëòÂ∑•‰ø°ÊÅØ
SELECT * FROM emp WHERE dept_id IN((SELECT id FROM dept WHERE name IN('ÈîÄÂîÆÈÉ®', 'Â∏ÇÂú∫ÈÉ®')));

# SOME„ÄÅANY„ÄÅALL ‰ΩøÁî®
# ÊØîË¥¢Âä°ÈÉ®ÊâÄÊúâ‰∫∫Â∑•ËµÑÈÉΩÈ´ò
SELECT * FROM emp WHERE salary &gt; ALL(SELECT salary FROM emp WHERE dept_id = (SELECT id FROM dept WHERE name = 'Ë¥¢Âä°ÈÉ®'));

</code></pre>
<h2 id="‰∫ãÂä°">‰∫ãÂä°</h2>
<p>‰∫ãÂä°ÔºöÂ∞±ÊòØ‰∏ÄÁªÑÊìç‰ΩúÔºå‰∏çÂèØÂàÜÂâ≤ÂçïÂ∑•‰ΩúÂçï‰ΩçÔºåÂ∞Ü‰Ωú‰∏∫‰∏Ä‰∏™Êï¥‰ΩìÊèê‰∫§Âà∞Á≥ªÁªü„ÄÇ</p>
<p><em>ÈªòËÆ§ MySQL ÁöÑ‰∫ãÂä°ÊòØËá™Âä®Êèê‰∫§ÁöÑÔºå‰πüÂ∞±ÊòØÔºåÂΩìÊâßË°å‰∏ÄÊù° DML ËØ≠Âè•Ôºå MySQL ‰ºöÈöêÂºèÂú∞Êèê‰∫§‰∫ãÂä°„ÄÇ</em></p>
<h3 id="‰∫ãÂä°Êìç‰Ωú">‰∫ãÂä°Êìç‰Ωú</h3>
<pre><code class="language-mysql"># Êü•Áúã„ÄÅËÆæÁΩÆ‰∫ãÂä°Êèê‰∫§ÊñπÂºè
SELECT @@autocommint;
SET @@autocommint = 0;

# ÂºÄÂêØ‰∫ãÂä°
START TRANSACTION;
BEGIN;

# Êèê‰∫§‰∫ãÂä°
COMMIT;

# ÂõûÊªö‰∫ãÂä°
ROLLBACK;

</code></pre>
<pre><code class="language-mysql">CREATE TABLE account(
	ID INT AUTO_INCREMENT PRIMARY KEY  COMMENT '‰∏ªÈîÆ',
	NAME VARCHAR(10) COMMENT 'ÂßìÂêç',
	MONEY INT COMMENT '‰ΩôÈ¢ù'
) COMMENT 'Ë¥¶Êà∑Ë°®';
INSERT INTO account(ID, NAME, MONEY) VALUES (null, 'Âº†‰∏â', 2000), (null, 'ÊùéÂõõ', 2000);

# ÊÅ¢Â§çÊï∞ÊçÆ
UPDATE account SET MONEY = 2000 WHERE NAME IN('Âº†‰∏â', 'ÊùéÂõõ');

# Âº†‰∏âÁªôÊùéÂõõËΩ¨Ë¥¶ 1000
# 1.Êü•ËØ¢Âº†‰∏âË¥¶Êà∑‰ΩôÈ¢ù
SELECT MONEY FROM account WHERE name = 'Âº†‰∏â';
# 2.Â∞ÜÂº†‰∏âÁî®Êà∑‰ΩôÈ¢ù -1000
UPDATE account SET MONEY = MONEY - 1000 WHERE name = 'Âº†‰∏â';
# 3.Â∞ÜÊùéÂõõÁî®Êà∑‰ΩôÈ¢ù +1000
UPDATE account SET MONEY = MONEY + 1000 WHERE name = 'ÊùéÂõõ';

</code></pre>
<h3 id="‰∫ãÂä°ÁâπÊÄß">‰∫ãÂä°ÁâπÊÄß</h3>
<p>ÂéüÂ≠êÊÄßÔºàAtomicityÔºâÔºö‰∫ãÂä°‰∏çÂèØÂàÜÂâ≤„ÄÇ</p>
<p>‰∏ÄËá¥ÊÄßÔºàConsistencyÔºâÔºö‰∫ãÂä°ÂÆåÊàêÊó∂ÔºåÊâÄÊúâÊï∞ÊçÆÁä∂ÊÄÅ‰∏ÄËá¥„ÄÇ</p>
<p>ÈöîÁ¶ªÊÄßÔºàIsolationÔºâÔºö‰øùËØÅ‰∫ãÂä°Âú®‰∏çÂèóÂπ∂ÂèëÊìç‰Ωú‰∏ãÁã¨Á´ãËøêË°å„ÄÇ</p>
<p>ÊåÅ‰πÖÊÄßÔºàDurabiliryÔºâÔºö‰∫ãÂä°‰∏ÄÊó¶Êèê‰∫§ÊàñÂõûÊªöÔºåÊï∞ÊçÆÊîπÂèòÊòØÊ∞∏‰πÖÁöÑ„ÄÇ</p>
<h3 id="Âπ∂Âèë‰∫ãÂä°">Âπ∂Âèë‰∫ãÂä°</h3>
<p>ËÑèËØªÔºö‰∏Ä‰∏™‰∫ãÂä°ËØªÂà∞Âè¶‰∏Ä‰∏™‰∫ãÂä°ËøòÊ≤°ÊúâÊèê‰∫§ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>‰∏çÂèØÈáçÂ§çËØªÔºö‰∏Ä‰∏™‰∫ãÂä°ÂÖàÂêéËØªÂèñÂêå‰∏ÄÊù°ËÆ∞ÂΩïÔºå‰ΩÜÊòØ‰∏§Ê¨°ËØªÂèñÁöÑÊï∞ÊçÆ‰∏çÂêå„ÄÇ</p>
<p>ÂπªËØªÔºöÊü•ËØ¢Êó∂Ê≤°ÊúâÂØπÂ∫îÊï∞ÊçÆË°åÔºå‰ΩÜÊèíÂÖ•Êï∞ÊçÆÊó∂Êï∞ÊçÆÂèàÂ≠òÂú®„ÄÇ</p>
<h3 id="‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´">‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´</h3>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>ÈöîÁ¶ªÁ∫ßÂà´</th>
<th>ËÑèËØª</th>
<th>‰∏çÂèØÈáçÂ§çËØª</th>
<th>ÂπªËØª</th>
</tr>
</thead>
<tbody>
<tr>
<td>Read uncommitted</td>
<td>‚úì</td>
<td>‚úì</td>
<td>‚úì</td>
</tr>
<tr>
<td>Read committed</td>
<td>√ó</td>
<td>‚úì</td>
<td>‚úì</td>
</tr>
<tr>
<td>Repeatable Read (Default)</td>
<td>√ó</td>
<td>√ó</td>
<td>‚úì</td>
</tr>
<tr>
<td>Serializable</td>
<td>√ó</td>
<td>√ó</td>
<td>√ó</td>
</tr>
</tbody>
</table></div>
<pre><code class="language-mysql"># Êü•Áúã‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´
SELECT @@TRANSACTION_ISOLATION;

# ËÆæÁΩÆ‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´
SET [SESSION|GLOBAL] TRANSACTION ISOLATION LEVEL {READ UNCOMMITTED | READ COMMITTED | REPEATABLE READ | SERIALIZABLE};

</code></pre>
<h1 id="ËøõÈò∂ÁØá">ËøõÈò∂ÁØá</h1>
<h2 id="linux-mysql-‰ΩøÁî®">Linux MySQL ‰ΩøÁî®</h2>
<h3 id="mysql-ÊúçÂä°">MySQL ÊúçÂä°</h3>
<pre><code class="language-shell"># ÂêØÂä®
systemctl start mysqld

# ÈáçÂêØ
systemctl restart msyqld

# ÂÅúÊ≠¢
systemctl stop mysqld


</code></pre>
<h3 id="Êü•ËØ¢Ëá™Âä®ÁîüÊàêÁöÑ-root-ÂØÜÁ†Å">Êü•ËØ¢Ëá™Âä®ÁîüÊàêÁöÑ root ÂØÜÁ†Å</h3>
<pre><code class="language-shell">grep 'temporary password' /var/log/mysqld.log


</code></pre>
<h3 id="‰øÆÊîπ-root-ÂØÜÁ†Å">‰øÆÊîπ root ÂØÜÁ†Å</h3>
<pre><code class="language-mysql"># ËÆæÁΩÆÂØÜÁ†ÅÂ§çÊùÇÂ∫¶ÂíåÂØÜÁ†ÅÈïøÂ∫¶
SET GLOBAL VALIDATE_PASSWORD.policy = 0;
SET GLOBAL VALIDATE_PASSWORD.length = 4;

# ‰øÆÊîπÂØÜÁ†Å
ALTER USER 'root'@'localhost' IDENTIFIED BY '1234';


</code></pre>
<h3 id="ÂàõÂª∫Áî®Êà∑">ÂàõÂª∫Áî®Êà∑</h3>
<pre><code class="language-mysql">CREATE USER 'root'@'%' IDENTIFIED WITH mysql_native_password BY '1234';


</code></pre>
<h3 id="ÂàÜÈÖçÊâÄÊúâÊùÉÈôê">ÂàÜÈÖçÊâÄÊúâÊùÉÈôê</h3>
<pre><code class="language-mysql">grant all on *.* to 'root'@'%';


</code></pre>
<h2 id="Â≠òÂÇ®ÂºïÊìé">Â≠òÂÇ®ÂºïÊìé</h2>
<h3 id="mysql-‰ΩìÁ≥ªÁªìÊûÑ">MySQL ‰ΩìÁ≥ªÁªìÊûÑ</h3>
<p>MySQL ÂÆ¢Êà∑Á´Ø &laquo; === &raquo; MySQL Server ÔºàËøûÊé•Â±Ç + ÊúçÂä°Â±Ç + ÂºïÊìéÂ±Ç + Â≠òÂÇ®Â±ÇÔºâ</p>
<p>MySQL Server = ËøûÊé•Ê±† + Á≥ªÁªüÁÆ°ÁêÜÂ∑•ÂÖ∑ + SQL Êé•Âè£ + Ëß£ÊûêÂô® + Êü•ËØ¢‰ºòÂåñÂô® + ÁºìÂ≠ò + ÂèØÊèíÊãîÂ≠òÂÇ®ÂºïÊìé + Á≥ªÁªüÊñá‰ª∂ + Êñá‰ª∂ÂíåÊó•Âøó</p>
<h3 id="Â≠òÂÇ®ÂºïÊìéÁÆÄ‰ªã">Â≠òÂÇ®ÂºïÊìéÁÆÄ‰ªã</h3>
<p>Â≠òÂÇ®ÂºïÊìéÂ∞±ÊòØÂ≠òÂÇ®Êï∞ÊçÆ„ÄÅÂª∫Á´ãÁ¥¢Âºï„ÄÅÊõ¥Êñ∞/Êü•ËØ¢Êï∞ÊçÆÁ≠âÊäÄÊúØÁöÑÂÆûÁé∞ÊñπÂºè„ÄÇÂ≠òÂÇ®ÊÆ∑Âã§ÊòØÂü∫‰∫éË°®ÁöÑÔºåËÄå‰∏çÊòØÂü∫‰∫éÂ∫ìÁöÑÔºåÊâÄ‰ª•Â≠òÂÇ®ÂºïÊìé‰πüÂèØË¢´Áß∞‰∏∫Ë°®Á±ªÂûã„ÄÇ</p>
<pre><code class="language-mysql"># ÂàõÂª∫Ë°®Êó∂ÊåáÂÆöÂ≠òÂÇ®ÂºïÊìé
CREATE TABLE Ë°®Âêç(

)ENGINE = INNODBÔºõ

# Êü•ËØ¢Êï∞ÊçÆÂ∫ìÊîØÊåÅÁöÑÂ≠òÂÇ®ÂºïÊìé
SHOW ENGINESÔºõ


</code></pre>
<h3 id="Â≠òÂÇ®ÂºïÊìéÁâπÁÇπ">Â≠òÂÇ®ÂºïÊìéÁâπÁÇπ</h3>
<p>InnoDBÔºöÈ´òÂèØÈù†ÊÄßÂíåÈ´òÊÄßËÉΩÁöÑÈÄöÁî®Â≠òÂÇ®ÂºïÊìé„ÄÇ</p>
<p>xxx.ibdÔºöxxx ‰ª£Ë°®Ë°®ÂêçÔºåinnoDB ÂºïÊìéÊØèÂº†Ë°®ÈÉΩ‰ºöÂØπÂ∫î‰∏Ä‰∏™Ë°®Á©∫Èó¥Êñá‰ª∂ÔºåÂ≠òÂÇ®ËØ•Ë°®ÁöÑË°®ÁªìÊûÑÔºàfrm„ÄÅsdiÔºâ„ÄÅÊï∞ÊçÆÂíåÁ¥¢Âºï„ÄÇ</p>
<p>Tablespace -&gt; Segment -&gt; EXtent -&gt; Page -&gt; Row (Trx id + Roll Pointer + col1 + col2 + col3 + &hellip;)</p>
<ul>
<li>DML Êìç‰ΩúÈÅµÂæ™ ACID Ê®°ÂûãÔºåÊîØÊåÅ‰∫ãÂä°Ôºõ</li>
<li>Ë°åÁ∫ßÈîÅÔºåÊèêÈ´òÂπ∂ÂèëËÆøÈóÆÊÄßËÉΩÔºõ</li>
<li>ÊîØÊåÅÂ§ñÈîÆ FOREIGN KEY Á∫¶ÊùüÔºå‰øùËØÅÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÂíåÊ≠£Á°ÆÊÄß„ÄÇ</li>
</ul>
<p>MyISAMÔºöMySQL Êó©ÊúüÈªòËÆ§Â≠òÂÇ®ÂºïÊìé„ÄÇ</p>
<p>xxx.sdiÔºöÂ≠òÂÇ®Ë°®ÁªìÊûÑ‰ø°ÊÅØ„ÄÇ</p>
<p>xxx.MYDÔºöÂ≠òÂÇ®Êï∞ÊçÆ„ÄÇ</p>
<p>xxx.MYIÔºöÂ≠òÂÇ®Á¥¢Âºï„ÄÇ</p>
<ul>
<li>‰∏çÊîØÊåÅ‰∫ãÂä°Ôºå‰∏çÊîØÊåÅÂ§ñÈîÆÔºõ</li>
<li>ÊîØÊåÅË°®ÈîÅÔºå‰∏çÊîØÊåÅË°åÈîÅÔºõ</li>
<li>ËÆøÈóÆÈÄüÂ∫¶Âø´„ÄÇ</li>
</ul>
<p>MemoeryÔºöË°®Êï∞ÊçÆÂ≠òÂÇ®Âú®ÂÜÖÂ≠ò‰∏≠ÔºåÂè™ÂÅö‰∏¥Êó∂Ë°®ÊàñÁºìÂ≠ò„ÄÇ</p>
<p>xxx.sdiÔºöÂ≠òÂÇ®Ë°®ÁªìÊûÑ‰ø°ÊÅØ„ÄÇ</p>
<ul>
<li>ÂÜÖÂ≠òÂ≠òÊîæÔºõ</li>
<li>hash Á¥¢ÂºïÔºàÈªòËÆ§Ôºâ„ÄÇ</li>
</ul>
<h3 id="Â≠òÂÇ®ÂºïÊìéÈÄâÊã©">Â≠òÂÇ®ÂºïÊìéÈÄâÊã©</h3>
<p>InnoDBÔºöÂØπ‰∫ãÂä°ÂÆåÊï¥ÊÄßË¶ÅÊ±ÇÈ´òÔºåÂπ∂ÂèëÊù°‰ª∂‰∏ãÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÔºåÈô§‰∫ÜÊèíÂÖ•ÂíåÊü•ËØ¢Â§ñÔºåËøòÂåÖÂê´ÂæàÂ§öÊõ¥Êñ∞„ÄÅÂà†Èô§ÔºåÂàôÈÄâËØ•ÂºïÊìé„ÄÇ</p>
<p>MyISAMÔºö‰ª•ËØªÂèñÂíåÊèíÂÖ•‰∏∫‰∏ªÔºåÂæàÂ∞ëÊõ¥Êñ∞ÂíåÂà†Èô§Êìç‰ΩúÔºåÂØπ‰∫ãÂä°ÂÆåÊï¥ÊÄß„ÄÅÂπ∂ÂèëÊÄßË¶ÅÊ±Ç‰∏çÊòØÂæàÈ´òÔºåÂ∞±Áî®ËØ•ÂºïÊìé„ÄÇ</p>
<p>MEMORYÔºöËÆøÈóÆÈÄüÂ∫¶Âø´Ôºå‰ΩÜÂ§ßÂ∞èÊúâÈôêÂà∂ÔºåÂõ†‰∏∫ÊòØ‰∏¥Êó∂Â≠òÂÇ®‰πüÊó†Ê≥ï‰øùËØÅÊï∞ÊçÆÁöÑÂÆâÂÖ®ÊÄß„ÄÇ</p>
<h2 id="Á¥¢Âºï">Á¥¢Âºï</h2>
<h3 id="Á¥¢ÂºïÊ¶ÇËø∞">Á¥¢ÂºïÊ¶ÇËø∞</h3>
<p>Á¥¢ÂºïÔºàIndexÔºâ Ôºö ÊòØÂ∏ÆÂä© MySQL È´òÊïàËé∑ÂèñÊï∞ÊçÆÁöÑÊï∞ÊçÆÁªìÊûÑ„ÄÇÊï∞ÊçÆ‰πãÂ§ñÔºåÊï∞ÊçÆÂ∫ìÁÆ°ÁêÜÁ≥ªÁªüËøòÁª¥Êä§ÁùÄÊª°Ë∂≥ÁâπÂÆöÊü•ÊâæÁÆóÊ≥ïÁöÑÊï∞ÊçÆÁªìÊûÑÔºåËøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰ª•ÊüêÁßçÊñπÂºèÂºïÁî®ÔºàÊåáÂêëÔºâÊï∞ÊçÆÔºåËøôÊ†∑Â∞±ÂèØ‰ª•Âú®Ëøô‰∫õÊï∞ÊçÆÁªìÊûÑ‰∏äÂÆûÁé∞È´òÁ∫ßÊü•ÊâæÁÆóÊ≥ïÔºåËøôÁßçÊï∞ÊçÆÁªìÊûÑÂ∞±ÊòØÁ¥¢Âºï„ÄÇ</p>
<ul>
<li>‰ºòÁÇπÔºöÊèêÈ´òÊ£ÄÁ¥¢ÁöÑÊïàÁéáÔºåÈôç‰ΩéÊï∞ÊçÆÂ∫ìÁöÑ IO ÊàêÊú¨ÔºõÈÄöËøáÁ¥¢ÂºïÂàóÂØπÊï∞ÊçÆËøõË°åÊéíÂ∫èÔºåÈôç‰ΩéÊï∞ÊçÆÊéíÂ∫èÁöÑÊàêÊú¨ÔºåÈôç‰ΩéCPUÁöÑÊ∂àËÄóÔºõ</li>
<li>Áº∫ÁÇπÔºöÁ¥¢ÂºïÂàó‰πüÊòØË¶ÅÂç†Áî®Á©∫Èó¥ÁöÑÔºõÁ¥¢ÂºïÊèêÈ´ò‰∫ÜÊü•ËØ¢ÊïàÁéáÔºåÂêåÊó∂‰πüÈôç‰Ωé‰∫ÜÊõ¥Êñ∞Ë°®ÁöÑÈÄüÂ∫¶„ÄÇ</li>
</ul>
<h3 id="Á¥¢ÂºïÁªìÊûÑ">Á¥¢ÂºïÁªìÊûÑ</h3>
<p>MySQL ÁöÑÁ¥¢ÂºïÊòØÂú®Â≠òÂÇ®ÂºïÊìéÂ±ÇÂÆûÁé∞ÁöÑÔºå‰∏çÂêåÁöÑÂ≠òÂÇ®ÂºïÊìéÊúâ‰∏çÂêåÁöÑÁªìÊûÑÔºö</p>
<p>B+TreeÔºöÊúÄÂ∏∏ËßÅÁöÑÁ¥¢ÂºïÁ±ªÂûãÔºåÂ§ßÈÉ®ÂàÜÂºïÊìéÊîØÊåÅ„ÄÇ</p>
<p>HashÔºöÂ∫ïÂ±ÇÊï∞ÊçÆÁî®ÂìàÂ∏åË°®ÂÆûÁé∞ÔºåÂè™ÊúâÁ≤æÁ°ÆÂåπÈÖçÁ¥¢ÂºïÂàóÊü•ËØ¢ÊâçÊúâÊïà„ÄÇ</p>
<p>R-treeÔºöÁ©∫Èó¥Á¥¢Âºï‰∏∫MyISAMÂºïÊìéÁöÑÁâπÊÆäÁ¥¢ÂºïÁ±ªÂûãÔºå‰∏ªË¶ÅÁî®‰∫éÂú∞ÁêÜÁ©∫Èó¥Êï∞ÊçÆÁ±ªÂûã„ÄÇ</p>
<p>Full-textÔºö‰∏ÄÁßçÈÄöËøáÂª∫Á´ãÂÄíÊéíÁ¥¢ÂºïÔºåÂø´ÈÄüÂåπÈÖçÊñáÊ°£ÁöÑÊñπÂºè„ÄÇ</p>
<p>‰∫åÂèâÊ†ëÔºöÈ°∫Â∫èÊèíÂÖ•Âà∞Êó∂ÂÄôÔºå‰ºöÂΩ¢Êàê‰∏Ä‰∏™ÈìæË°®ÔºåÊü•ËØ¢ÊÄßËÉΩ‰ºöÂ§ßÂ§ßÈôç‰ΩéÔºåÂ§ßÊï∞ÊçÆÈáèÊÉÖÂÜµ‰∏ãÔºåÂ±ÇÁ∫ßËæÉÊ∑±ÔºåÊ£ÄÁ¥¢ÈÄüÂ∫¶ÊÖ¢„ÄÇ</p>
<p>Á∫¢ÈªëÊ†ëÔºöÂ§ßÈáèÊï∞ÊçÆÊÉÖÂÜµ‰∏ãÔºåÂ±ÇÁ∫ßÊ∑±ÔºåÊ£ÄÁ¥¢ÈÄüÂ∫¶ÊÖ¢„ÄÇ</p>
<p>B-TreeÔºöÔºàÊúÄÂ§ßÂ∫¶Êï∞‰∏∫ 5 ÁöÑ b-tree ÊØè‰∏™ËäÇÁÇπÂ≠ò 4 ‰∏™ keyÔºâ„ÄÇ</p>
<p>B+-TreeÔºöÊâÄÊúâÁöÑÊï∞ÊçÆÈÉΩÊúâÂú®Âè∂Â≠êËäÇÁÇπÂΩ¢ÊàêÂçïÂêëÈìæË°®ÔºåÈùûÂè∂Â≠êËäÇÁÇπËµ∑Âà∞Á¥¢ÂºïÁöÑ‰ΩúÁî®„ÄÇ</p>
<p>MySQL Á¥¢ÂºïÂú®ÁªèÂÖ∏ B+Tree ËøõË°å‰∫Ü‰ºòÂåñÔºåÂ¢ûÂä†‰∫Ü‰∏Ä‰∏™ÊåáÂêëÁõ∏ÈÇªÂè∂Â≠êËäÇÁÇπÁöÑÈìæË°®ÊåáÈíà„ÄÇ</p>
<p>Hash Á¥¢ÂºïÂ∞±ÊòØÈááÁî®‰∏ÄÂÆöÁöÑ hash ÁÆóÊ≥ïÔºåÂ∞ÜÈîÆÂÄºÊç¢ÁÆóÊàêÊñ∞ÁöÑ hash ÂÄºÔºåÂÜçÊò†Â∞ÑÂà∞ÂØπÂ∫îÁöÑÊßΩ‰Ωç‰∏äÔºåÁÑ∂ÂêéÂ≠òÂÇ®Âú® hash Ë°®‰∏≠„ÄÇÂ¶ÇÊûú‰∏§‰∏™ÊàñÂ§ö‰∏™ÈîÆÂÄºÔºåÊò†Â∞ÑÂà∞Áõ∏ÂêåÁöÑ‰ΩçÁΩÆ‰∏äÔºåÂ∞±‰∫ßÁîü‰∫ÜÂìàÂ∏åÂÜ≤Á™ÅÔºåÂèØ‰ª•ÈÄöËøáÈìæË°®Êù•Ëß£ÂÜ≥„ÄÇ</p>
<p>HashÁöÑÁâπÁÇπÔºö‰∏çÊîØÊåÅËåÉÂõ¥ÊêúÁ¥¢ÔºåÊó†Ê≥ïÈÄöËøáÁ¥¢ÂºïÂÆåÊàêÊéíÂ∫èÔºåÊü•ËØ¢ÊïàÁéáÈ´ò„ÄÇ</p>
<p>Memory ÂºïÊìéÊîØÊåÅ hash Á¥¢ÂºïÔºåËÄå InnoDB Ëá™ÈÄÇÂ∫î hash ÂäüËÉΩ„ÄÇ</p>
<p>‰∏∫‰ªÄ‰πà InnoDB Áî® B+tree Á¥¢ÂºïÁªìÊûÑÔºü</p>
<p>Áõ∏ÂØπ‰∫é‰∫åÂèâÊ†ëÔºåÂ±ÇÁ∫ßÊõ¥Â∞ëÔºåÊêúÁ¥¢ÁöÑÊïàÁéáÈ´òÔºõ</p>
<p>ÂØπ‰∫é B-tree ÔºåÂõ†‰∏∫‰ªñÂè∂Â≠êÂíåÈùûÂè∂Â≠êÈÉΩ‰øùÂ≠òÊï∞ÊçÆÔºåËøôÊ†∑‰∏Ä‰∏™È°µÂÜÖÂ≠òÂÇ®ÁöÑÈîÆÂÄºÂØπÂ∞ëÔºåÂ¶ÇÊûúË¶Å‰øùÂ≠òÂ§ßÈáèÊï∞ÊçÆÔºåÂè™ËÉΩÂ¢ûÂä†Ê†ëÈÉΩÈ´òÂ∫¶Ôºõ</p>
<p>Áõ∏ÂØπ‰∫é Hash Á¥¢ÂºïÔºåB+tree ÊîØÊåÅËåÉÂõ¥ÂåπÈÖçÂíåÊéíÂ∫èÊìç‰Ωú„ÄÇ</p>
<h3 id="Á¥¢ÂºïÂàÜÁ±ª">Á¥¢ÂºïÂàÜÁ±ª</h3>
<p>‰∏ªÈîÆÁ¥¢ÂºïÔºöÈíàÂØπË°®‰∏≠‰∏ªÈîÆÂàõÂª∫ÁöÑÁ¥¢ÂºïÔºåÈªòËÆ§Ëá™Âä®ÂàõÂª∫„ÄÇPRIMARY„ÄÇ</p>
<p>ÂîØ‰∏ÄÁ¥¢ÂºïÔºöÈÅøÂÖçÂêå‰∏Ä‰∏™Ë°®‰∏≠ÊüêÊï∞ÊçÆÂàó‰∏≠ÁöÑÂÄºÈáçÂ§çÔºåÂèØ‰ª•ÊúâÂ§ö‰∏™„ÄÇUNIQUE„ÄÇ</p>
<p>Â∏∏ËßÑÁ¥¢ÂºïÔºöÂø´ÈÄüÂÆö‰ΩçÁâπÂÆöÊï∞ÊçÆÔºåÂèØ‰ª•ÊúâÂ§ö‰∏™„ÄÇ</p>
<p>ÂÖ®ÊñáÁ¥¢ÂºïÔºöÂÖ®ÊñáÁ¥¢ÂºïÊü•ÊâæÁöÑÊòØÊñáÊú¨‰∏≠ÁöÑÂÖ≥ÈîÆËØçÔºåÂèØ‰ª•ÊúâÂ§ö‰∏™„ÄÇFULLTEXT„ÄÇ</p>
<p>Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠ÔºåÊ†πÊçÆÁ¥¢ÂºïÁöÑÂ≠òÂÇ®ÂΩ¢ÂºèÔºåËøòÂèØ‰ª•ÂàíÂàÜÔºö</p>
<p>ËÅöÁæ§Á¥¢ÂºïÔºàClustered IndexÔºâÂ∞ÜÊï∞ÊçÆ‰∏éÁ¥¢ÂºïÊîæÂà∞‰∏ÄÂùóÔºåÁ¥¢ÂºïÁªìÊûÑÁöÑÂè∂Â≠êËäÇÁÇπ‰øùÂ≠ò‰∫ÜÊï∞ÊçÆ„ÄÇÂøÖÈ°ªÊúâÔºå‰∏îÂè™‰∏Ä‰∏™„ÄÇ</p>
<ul>
<li>Â¶ÇÊûúÂ≠òÂú®‰∏ªÈîÆÔºå‰∏ªÈîÆÁ¥¢ÂºïÂ∞±ÊòØËÅöÈõÜÁ¥¢Âºï„ÄÇ</li>
<li>Â¶ÇÊûú‰∏çÂ≠òÂú®‰∏ªÈîÆÔºåÂ∞Ü‰ΩøÁî®Á¨¨‰∏Ä‰∏™ UNIQUE Á¥¢Âºï‰Ωú‰∏∫ËÅöÈõÜÁ¥¢Âºï„ÄÇ</li>
<li>Â¶ÇÊûúÈÉΩÊ≤°ÊúâÔºåÂàô InnoDB Ëá™Âä®ÁîüÊàê rowid ‰∏∫ÈöêËóèÁöÑËÅöÈõÜÁ¥¢Âºï„ÄÇ</li>
</ul>
<p>‰∫åÁ∫ßÁ¥¢ÂºïÔºàSecondary IndexÔºâÂ∞ÜÊï∞ÊçÆ‰∏éÁ¥¢ÂºïÂàÜÂºÄÂ≠òÂÇ®ÔºåÁ¥¢ÂºïÁªìÊûÑÁöÑÂè∂Â≠êËäÇÁÇπÂÖ≥ËÅîÂØπÂ∫î‰∏ªÈîÆ„ÄÇÂèØ‰ª•Â≠òÂú®Â§ö‰∏™„ÄÇ</p>
<p>‰æãÂ¶ÇÔºö<code>SELECT * FROM USER WHERE NAME='Arm';</code></p>
<p>1„ÄÅËøõË°å NAME Â≠óÊÆµÁöÑ‰∫åÁ∫ßÁ¥¢ÂºïÔºåÊâæÂà∞ÂØπÂ∫îÁöÑ IDÔºõ</p>
<p>2„ÄÅÊ†πÊçÆ ID ËøõË°åÂõûË°®Êü•ËØ¢ÔºåÂç≥ËÅöÈõÜÁ¥¢ÂºïÊâæÂà∞ ID ‰∏ãÈÇ£‰∏ÄË°åÁöÑÊï∞ÊçÆ„ÄÇ</p>
<h3 id="Á¥¢ÂºïËØ≠Ê≥ï">Á¥¢ÂºïËØ≠Ê≥ï</h3>
<pre><code class="language-mysql"># ÂàõÂª∫Á¥¢Âºï
CREATE [UNIQUE | FULLTEXT] INDEX index_name ON table_name (index_col_name, ...);

# Êü•ÁúãÁ¥¢Âºï
SHOW INDEX FROM table_name;

# Âà†Èô§Á¥¢Âºï
DROP INDEX index_name ON table_name;


</code></pre>
<h3 id="sql-ÊÄßËÉΩÂàÜÊûê">SQL ÊÄßËÉΩÂàÜÊûê</h3>
<p>SQL ÊâßË°åÈ¢ëÁéáÔºö<code>SHOW [SESSION|GLOBAL] STATUS; </code> ÂèØ‰ª•Êü•ÁúãÊï∞ÊçÆÂ∫ìÊåá‰ª§ÁöÑËÆøÈóÆÈ¢ëÊ¨°„ÄÇ</p>
<pre><code class="language-mysql">SHOW GLOBAL STATUS LIKE 'com______';


</code></pre>
<p>ÊÖ¢Êü•ËØ¢Êó•ÂøóÔºöÂÆÉËÆ∞ÂΩï‰∫ÜÊâÄÊúâÊâßË°åÊó∂Èó¥Ë∂ÖËøáÊåáÂÆöÂèÇÊï∞Ôºàlong_query_timeÔºåÂçï‰ΩçÔºöÁßíÔºåÈªòËÆ§ 10 ÁßíÔºâÁöÑÊâÄÊúâ SQL ËØ≠Âè•ÁöÑÊó•Âøó„ÄÇMySQL ÁöÑÊÖ¢Êü•ËØ¢Êó•ÂøóÈªòËÆ§Ê≤°ÊúâÂºÄÂêØÔºåÈúÄË¶ÅÂú® MySQL ÁöÑÈÖçÁΩÆÊñá‰ª∂Ôºà/etc/my.cnfÔºâ‰∏≠ÈÖçÁΩÆ‰ø°ÊÅØÔºö</p>
<pre><code class="language-mysql"># ÂºÄÂêØ MySQL ÊÖ¢Êó•ÂøóÊü•ËØ¢
slow_query_log = 1

# ËÆæÁΩÆË∂Ö 2 ÁßíÂ∞±ËßÜ‰∏∫ÊÖ¢Êü•ËØ¢
long_query_time = 2

# ÈáçÂêØÂêéÔºåÊÖ¢Êü•ËØ¢Êó•Âøó
SHOW VARIABLES LIKE 'slow_query_log';

# ÁîüÊàêÊñá‰ª∂ /var/lib/mysql/localhost-slow.log


</code></pre>
<p>show profiles ËÉΩÂ§üÂú® SQL ‰ºòÂåñÊó∂Â∏ÆÊàë‰ª¨‰∫ÜËß£Êó∂Èó¥ÈÉΩËÄóË¥πÂú®Âì™Èáå„ÄÇÈÄöËøá have_profiling ÂèÇÊï∞ÔºåËÉΩÁúãËßÅ MySQL ÊòØÂê¶ÊîØÊåÅ profile Êìç‰ΩúÔºö</p>
<pre><code class="language-mysql"># ÈªòËÆ§ÂÖ≥Èó≠ÔºåÈÄöËøá SET Âú® session / global ÂºÄÂêØ
SET profiling = 1;

# Êü•Áúã profiles ÊòØÂê¶ÂºÄÂêØ
SELECT @@have_profiling;

# Êü•ÁúãÊØè‰∏ÄÊù° SQL ÁöÑËÄóÊó∂Âü∫Êú¨ÊÉÖÂÜµ
SHOW profiles;

# Êü•ÁúãÊåáÂÆö query_id ÁöÑ SQL ËØ≠Âè•ÂêÑ‰∏™Èò∂ÊÆµÁöÑËÄóÊó∂ÊÉÖÂÜµ
SHOW profile FOR query query_id;

# Êü•ÁúãÊåáÂÆö query_id ÁöÑ SQL ËØ≠Âè• CPU ‰ΩøÁî®ÊÉÖÂÜµ
SHOW profile cpu FOR query query_id;


</code></pre>
<p>EXPLAIN Êàñ DESC ÂëΩ‰ª§Ëé∑Âèñ MySQL Â¶Ç‰ΩïÊâßË°å SELECT ËØ≠Âè•ÁöÑ‰ø°ÊÅØÔºåÂåÖÊã¨Âú® SELECT ËØ≠Âè•ÊâßË°åËøáÁ®ã‰∏≠Ë°®Â¶Ç‰ΩïËøûÊé•ÊàñËøûÊé•ÁöÑÈ°∫Â∫è„ÄÇ</p>
<pre><code class="language-mysql"># Áõ¥Êé•Âú® SELECT ËØ≠Âè•ÂâçÂä†‰∏äÂÖ≥ÈîÆÂ≠ó explain / desc
EXPLAIN SELECT Â≠óÊÆµ FROM Ë°®Âêç WHERE Êù°‰ª∂;

/*
	id Áõ∏ÂêåÔºå‰ªé‰∏äÂà∞‰∏ãÈ°∫Â∫èÊâßË°åÔºõ‰∏çÂêåÂàôÂÄºÂ§ßÁöÑÂÖàÊâßË°å„ÄÇ
	select_type Ë°®Á§∫ SELECT Á±ªÂûã„ÄÇ
	tyep Ë°®ËøûÊé•Á±ªÂûãÔºåÊÄßËÉΩÂ•ΩÂà∞Â∑Æ‰∏∫ NULL„ÄÅsystem„ÄÅconst„ÄÅeq_ref„ÄÅref„ÄÅrange„ÄÅindex„ÄÅall„ÄÇ
	possible_key ÊòæÁ§∫ÂèØËÉΩÂ∫îÁî®Ëøô‰∏™Ë°®‰∏äÁöÑÁ¥¢ÂºïÔºå‰∏Ä‰∏™ÊàñÂ§ö‰∏™„ÄÇ
	key ‰∏∫ÂÆûÈôÖ‰ΩøÁî®ÁöÑÁ¥¢Âºï„ÄÇ
	key_len Á¥¢Âºï‰∏≠‰ΩøÁî®ÁöÑÂ≠óËäÇÊï∞ÔºåÂç≥Á¥¢ÂºïÂ≠óÊÆµÊúÄÂ§ßÂèØËÉΩÂÄº„ÄÇ
	rows MySQL ËÆ§‰∏∫ÂøÖÈ°ªË¶ÅÊâßË°åÊü•ËØ¢ÁöÑË°åÊï∞ÔºåËøôÊòØ‰º∞ËÆ°ÂÄº„ÄÇ
	filtered Ë°®Á§∫ËøîÂõûÁªìÊûúÁöÑË°åÊï∞Âç†ÊâÄÈúÄËØªÂèñË°åÊï∞ÁöÑÁôæÂàÜÊØîÔºåÂÄºË∂äÂ§ßË∂äÂ•Ω„ÄÇ
*/


</code></pre>
<h3 id="Á¥¢Âºï‰ΩøÁî®">Á¥¢Âºï‰ΩøÁî®</h3>
<p>È™åËØÅÁ¥¢ÂºïÊïàÁéá</p>
<pre><code class="language-mysql"># Êú™Âª∫Á´ãÁ¥¢ÂºïÂâçÊâßË°å SQL
SELECT * FROM tb_sku WHERE sn = '100000003145001';
# ÈíàÂØπÂ≠óÊÆµÂª∫Á´ãÁ¥¢Âºï
CREATE INDEX idx_sku_sn ON tb_sku(sn);
# ÂÜçÊ¨°ÊâßË°å
SELECT * FROM tb_sku WHERE sn = '100000003145001';


</code></pre>
<p>ÊúÄÂ∑¶ÂâçÁºÄÊ≥ïÔºöÂ¶ÇÊûúËøõË°å‰∫ÜËÅîÂêàÁ¥¢ÂºïÔºåË¶ÅÈÅµÂæ™ÊúÄÂ∑¶ÂâçÁºÄÊ≥ïÂàô„ÄÇÊúÄÂ∑¶ÂâçÁºÄÊ≥ïÂàôÊåáÁöÑÊòØÊü•ËØ¢‰ªéÁ¥¢ÂºïÁöÑÊúÄÂ∑¶ÂàóÂºÄÂßãÔºåÂπ∂‰∏î‰∏çË∑≥ËøáÁ¥¢Âºï‰∏≠ÁöÑÂàó„ÄÇÂ¶ÇÊûúË∑≥Ë∑ÉÊüê‰∏ÄÂàóÔºåÁ¥¢ÂºïÂ∞ÜÈÉ®ÂàÜÂ§±ÊïàÔºàÂêéÈù¢ÁöÑÂ≠óÊÆµÁ¥¢ÂºïÂ§±ÊïàÔºâ„ÄÇ</p>
<p>ËåÉÂõ¥Êü•ËØ¢ÔºöËÅîÂêàÁ¥¢Âºï‰∏≠ÔºåÂá∫Áé∞ËåÉÂõ¥Êü•ËØ¢Ôºà&gt;, &lt;ÔºâÔºåËåÉÂõ¥Êü•ËØ¢Âè≥‰æßÁöÑÂàóÁ¥¢ÂºïÂ§±Êïà„ÄÇÂú®‰∏öÂä°ÂÖÅËÆ∏ÁöÑÊÉÖÂÜµÔºåÂ∞ΩÈáè‰ΩøÁî® &gt;= Êàñ &lt;=„ÄÇ</p>
<p>Á¥¢ÂºïÂàóËøêÁÆóÔºö‰∏çË¶ÅÂú®Á¥¢ÂºïÂàó‰∏äËøõË°åËøêÁÆóÊìç‰ΩúÔºåÁ¥¢ÂºïÂ∞ÜÂ§±Êïà„ÄÇÊ≠§Â§ñÔºåÂ¶ÇÊûúÂ≠óÁ¨¶‰∏≤‰∏çÂä†ÂºïÂè∑Ôºå‰πü‰∏ç‰ºöËµ∞Á¥¢ÂºïÁöÑ„ÄÇ</p>
<p>Ê®°Á≥äÊü•ËØ¢ÔºöÂ¶ÇÊûú‰ªÖ‰ªÖÊòØÂ∞æÈÉ®Ê®°Á≥äÂåπÈÖçÔºåÁ¥¢Âºï‰∏ç‰ºöÂ§±Êïà„ÄÇÂ¶ÇÊûúÊòØÂ§¥ÈÉ®Ê®°Á≥äÂåπÈÖçÔºåÁ¥¢ÂºïÂ§±Ë¥•„ÄÇ</p>
<p>or ËøûÊé•Êù°‰ª∂ÔºöÂ¶ÇÊûú or ÂâçÂ≠óÊÆµÊúâÁ¥¢ÂºïÔºåËÄåÂêéÈù¢ÁöÑÊ≤°ÊúâÁ¥¢ÂºïÔºåÂàô‰∏ç‰ºöÁî®Âà∞Á¥¢Âºï„ÄÇ</p>
<p>Êï∞ÊçÆÂàÜÂ∏ÉÂΩ±ÂìçÔºöÂ¶ÇÊûú MySQL ËØÑ‰º∞‰ΩøÁî®Á¥¢ÂºïÊØîÂÖ®Ë°®Êõ¥ÊÖ¢ÔºåÂàô‰∏ç‰ΩøÁî®Á¥¢Âºï„ÄÇ</p>
<p>SQL ÊèêÁ§∫ÔºöÂ∞±ÊòØÂú® SQL ËØ≠Âè•‰∏≠Âä†ÂÖ•‰∏Ä‰∫õ‰∫∫‰∏∫ÁöÑÊèêÁ§∫Êù•ËææÂà∞‰ºòÂåñÊìç‰ΩúÁöÑÁõÆÁöÑ„ÄÇ</p>
<pre><code class="language-mysql"># USE INDEX
explain select * from tb_user use index(idx_user_pro) where profession='ËΩØ‰ª∂Â∑•Á®ã';

# IGNORE INDEX
explain select * from tb_user ignore index(idx_user_pro) where profession='ËΩØ‰ª∂Â∑•Á®ã';

# FORCE
explain select * from tb_user force index(idx_user_pro) where profession='ËΩØ‰ª∂Â∑•Á®ã';


</code></pre>
<p>Ë¶ÜÁõñÁ¥¢ÂºïÔºöÂ∞ΩÈáè‰ΩøÁî®Ë¶ÜÁõñÁ¥¢ÂºïÔºàÊü•ËØ¢‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÔºå‰∏îÈúÄË¶ÅËøîÂõûÁöÑÂàóÔºåÂú®ËØ•Á¥¢Âºï‰∏≠Â∑≤ÁªèÂÖ®ÈÉ®ËÉΩÂ§üÊâæÂà∞ÔºâÔºåÂáèÂ∞ë select *„ÄÇ</p>
<p>using index condition Ôºö Êü•Êâæ‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÔºå‰ΩÜÊòØÈúÄË¶ÅÂõûË°®Êü•ËØ¢Êï∞ÊçÆ„ÄÇ</p>
<p>using where; using index ÔºöÊü•Êâæ‰ΩøÁî®‰∫ÜÁ¥¢ÂºïÔºå‰ΩÜÊòØÈúÄË¶ÅÁöÑÊï∞ÊçÆÈÉΩÂú®Á¥¢ÂºïÂàó‰∏≠ËÉΩÊâæÂà∞ÔºåÊâÄ‰ª•‰∏çÈúÄË¶ÅÂõûË°®Êü•ËØ¢Êï∞ÊçÆ„ÄÇ</p>
<p>ÂâçÁºÄÁ¥¢ÂºïÔºöÂΩìÂ≠óÊÆµÁ±ªÂûã‰∏∫Â≠óÁ¨¶‰∏≤Êó∂ÔºåË¶ÅÁ¥¢ÂºïÂæàÈïøÁöÑÂ≠óÁ¨¶‰∏≤ÔºåËøôÊ†∑‰ºöÊµ™Ë¥πÁ£ÅÁõòIOÔºåÂΩ±ÂìçÊü•ËØ¢ÊïàÁéá„ÄÇÊ≠§Êó∂ÂèØ‰ª•Âè™Â∞ÜÂ≠óÁ¨¶‰∏≤ÁöÑ‰∏ÄÈÉ®ÂàÜÂâçÁºÄÔºåÂª∫Á´ãÁ¥¢ÂºïÔºåËøôÊ†∑ÂèØ‰ª•ËäÇÁ∫¶Á¥¢ÂºïÁ©∫Èó¥„ÄÇ</p>
<pre><code class="language-mysql">CREATE INDEX idx_xxx ON table_name(column(n));

# ÂâçÁºÄÈïøÂ∫¶Ôºö‰∏çÈáçÂ§çÊï∞ÊçÆ Âíå ÊÄªÊï∞ÊçÆÁöÑÊØîÂÄº
SELECT count(distinct email)/count(*) FROM tb_user;
SELECT count(distinct substring(email, 1,5)) / count(*) FROM tb_user;


</code></pre>
<p>ÂçïÂàóÁ¥¢ÂºïÔºöÂç≥‰∏Ä‰∏™Á¥¢ÂºïÂè™ÂåÖÂê´Âçï‰∏™Âàó„ÄÇ</p>
<p>ËÅîÂêàÁ¥¢ÂºïÔºöÂç≥‰∏Ä‰∏™Á¥¢ÂºïÂåÖÂê´‰∫ÜÂ§ö‰∏™Âàó„ÄÇ</p>
<p>‰∏öÂä°Âú∫ÊôØ‰∏≠ÔºåÂ¶ÇÊûúÂ≠òÂú®Â§ö‰∏™Êü•ËØ¢Êù°‰ª∂ÔºåËÄÉËôëÈíàÂØπ‰∫éÊü•ËØ¢Â≠óÊÆµÂª∫Á´ãÁ¥¢ÂºïÊó∂ÔºåÂª∫ËÆÆÂª∫Á´ãËÅîÂêàÁ¥¢ÂºïÔºåËÄåÈùûÂçïÂàóÁ¥¢Âºï„ÄÇ</p>
<pre><code class="language-mysql"># ÂçïÂàóÁ¥¢ÂºïÊÉÖÂÜµ MysQL ‰ºòÂåñÂô®‰ºöËá™Âä®ËØÑ‰º∞Âì™‰∏™Â≠óÊÆµÁöÑÁ¥¢ÂºïÊïàÁéáÊõ¥È´ò
EXPLAIN select id,phone,name from tb_user where phone='12314123' and name = 'ÊùéÁôΩ';


</code></pre>
<h3 id="Á¥¢ÂºïËÆæËÆ°ÂéüÂàô">Á¥¢ÂºïËÆæËÆ°ÂéüÂàô</h3>
<p>1„ÄÅÊï∞ÊçÆÈáèÂ§ßÔºå‰∏îÊü•ËØ¢ÊØîËæÉÈ¢ëÁπÅÂ∞±Âª∫Á´ãÁ¥¢ÂºïÔºõ</p>
<p>2„ÄÅÈíàÂØπÂ∞ù‰Ωú‰∏∫Êü•ËØ¢„ÄÅÊéíÂ∫è„ÄÅÂàÜÁªÑÁöÑÂ≠óÊÆµÂª∫Á´ãÁ¥¢ÂºïÔºõ</p>
<p>3„ÄÅÈÄâÊã©Âå∫ÂàÜÂ∫¶È´òÁöÑÂª∫Á´ãÁ¥¢ÂºïÔºåÂ∞ΩÈáèÂª∫Á´ãÂîØ‰∏ÄÁ¥¢ÂºïÔºõ</p>
<p>4„ÄÅÂ≠óÁ¨¶‰∏≤Á±ªÂûãÂ≠óÊÆµÂèØÂª∫Á´ãÂâçÁºÄÁ¥¢ÂºïÔºõ</p>
<p>5„ÄÅÂ∞ΩÈáè‰ΩøÁî®ËÅîÂêàÁ¥¢ÂºïÔºåÂæàÂ§öÊó∂ÂÄôÂèØ‰ª•Ë¶ÜÁõñÁ¥¢ÂºïÔºõ</p>
<p>6„ÄÅÊéßÂà∂Á¥¢ÂºïÊï∞ÈáèÔºåÁª¥Êä§Á¥¢ÂºïÁªìÊûÑ‰ª£‰ª∑Ë¶ÅËÄÉËôëÔºõ</p>
<p>7„ÄÅÁ¥¢ÂºïÂàó‰∏çËÉΩÂ≠òÂÇ®NULLÂÄºÔºåÂ∞±Áî®NOT NULLËøõË°åÁ∫¶Êùü„ÄÇ</p>
<h2 id="sql-‰ºòÂåñ">SQL ‰ºòÂåñ</h2>
<h3 id="ÊèíÂÖ•Êï∞ÊçÆ">ÊèíÂÖ•Êï∞ÊçÆ</h3>
<pre><code class="language-mysql">-- ÊâπÈáèÊèíÂÖ•
INSERT INTO tb_test VALUES (1, 'Tom'), (2, 'Cat');

-- ÊâãÂä®Êèê‰∫§‰∫ãÂä°
START TRANSACTION;
INSERT INTO tb_test VALUES (1, 'Tom'), (2, 'Cat');
INSERT INTO tb_test VALUES (3, 'Jerry'), (4, 'Mike');
COMMIT;

-- ‰∏ªÈîÆÈ°∫Â∫èÊèíÂÖ•


</code></pre>
<pre><code class="language-mysql">-- Â§ßÊâπÈáèÊèíÂÖ•
# ËøûÊé•ÊúçÂä°Âô®
mysql --local-infile -u root -p

# ËÆæÁΩÆÂèòÈáèÔºå‰ªéÊú¨Âú∞Âä†ËΩΩÊñá‰ª∂ÂØºÂÖ•Êï∞ÊçÆ
SET GLOBAL local_infile = 1;

# ÊâßË°å load Êåá‰ª§ÔºåÂä†ËΩΩÊï∞ÊçÆÂà∞Ë°®
load data local infile '/root/sql1.log' into table 'tb_user' fields terminated by ',' lines terminated by '\n';


</code></pre>
<h3 id="‰∏ªÈîÆ‰ºòÂåñ">‰∏ªÈîÆ‰ºòÂåñ</h3>
<p>Âú® InnoDB Â≠òÂÇ®ÂºïÊìé‰∏≠ÔºåË°®Êï∞ÊçÆÈÉΩÊòØÊ†πÊçÆ‰∏ªÈîÆÈ°∫Â∫èÁªÑÁªáÂ≠òÊîæÁöÑÔºåËøôÁßçÂ≠òÂÇ®ÊñπÂºèÁöÑË°®Áß∞‰∏∫ Á¥¢ÂºïÁªÑÁªáË°®Ôºàindex organized table IOTÔºâ„ÄÇ</p>
<p>ÈÄªËæëÁªìÊûÑ‰∏∫ÔºöTableSpace &gt; Segement &gt; Extend &gt; Page &gt; Row„ÄÇ</p>
<p>È°µÂèØ‰ª•‰∏∫Á©∫Ôºå‰πüÂèØ‰ª•Â°´ÂÖÖ‰∏ÄÂçä„ÄÇÊØè‰∏™È°µÂåÖÂê´‰∫Ü 2-N Ë°åÊï∞ÊçÆÔºåÂ¶ÇÊûú‰∏ÄË°åÊï∞ÊçÆÂ§™Â§ß‰ºöË°åÊ∫¢Âá∫ÔºåÊòØÊ†πÊçÆ‰∏ªÈîÆÊéíÂ∫èÁöÑ„ÄÇ</p>
<p>È°µÂàÜË£ÇÔºö‰∏ªÈîÆ‰π±Â∫èÊèíÂÖ•ÁöÑÊó∂ÂÄô‰ºöÊñ∞Âª∫‰∏Ä‰∏™È°µÁ©∫Èó¥ÔºåÂ∞ÜÂéüÊúâÁöÑÈ°µ‰∏ÄÂàÜ‰∏∫‰∫åÔºåÁÑ∂ÂêéÊèíÂÖ•Êñ∞Êï∞ÊçÆ„ÄÇ</p>
<p>È°µÂêàÂπ∂ÔºöÂΩìÈ°µÂà†Èô§ËÆ∞ÂΩïËææÂà∞ MERGE_THRESHOLDÔºå‰ºöÊü•ÊâæÂâçÂêéÈ°µÊòØÂê¶ÂèØ‰ª•ËøõË°åÂêàÂπ∂„ÄÇ</p>
<p>ËÆæËÆ°ÂéüÂàôÔºö</p>
<ul>
<li>Êª°Ë∂≥‰∏öÂä°ÈúÄÊ±ÇÁöÑÊÉÖÂÜµ‰∏ãÔºåÂ∞ΩÈáèÈôç‰Ωé‰∏ªÈîÆÁöÑÈïøÂ∫¶Ôºõ</li>
<li>ÊèíÂÖ•Êï∞ÊçÆÂ∞ΩÈáèÈ°∫Â∫èÊèíÂÖ•ÔºåÈÄâÊã© AUTO_INCREMENTÔºõ</li>
<li>Â∞ΩÈáè‰∏çÁî® UUID ÂÅö‰∏ªÈîÆÊàñÊòØÂÖ∂‰ªñËá™ÁÑ∂‰∏ªÈîÆÔºåÂ¶ÇË∫´‰ªΩËØÅÂè∑Ôºõ</li>
<li>‰∏öÂä°Êìç‰ΩúÊó∂ÔºåÂ∞ΩÈáè‰∏çÂØπ‰∏ªÈîÆ‰øÆÊîπ„ÄÇ</li>
</ul>
<h3 id="order-by-‰ºòÂåñ">order by ‰ºòÂåñ</h3>
<ul>
<li>Using filesortÔºöÈÄöËøáË°®Á¥¢ÂºïÊàñÂÖ®Ë°®Êâ´ÊèèÔºåËØªÂèñÊª°Ë∂≥Êù°‰ª∂ÁöÑÊï∞ÊçÆË°åÔºåÁÑ∂ÂêéÂú®ÊéíÂ∫èÁºìÂÜ≤Âå∫ sort buffer ‰∏≠ÂÆåÊàêÊéíÂ∫èÊìç‰ΩúÔºåÊâÄÊúâ‰∏çÊòØÈÄöËøáÁ¥¢ÂºïÁõ¥Êé•ËøîÂõûÊéíÂ∫èÁªìÊûúÁöÑÊéíÂ∫èÈÉΩÂè´ FileSort ÊéíÂ∫è„ÄÇ</li>
<li>Using indexÔºöÈÄöËøáÊúâÂ∫èÁ¥¢ÂºïÈ°∫Â∫èÊâ´ÊèèÁõ¥Êé•ËøîÂõûÊúâÂ∫èÊï∞ÊçÆÔºå‰∏çÈúÄË¶ÅÈ¢ùÂ§ñÊéíÂ∫è„ÄÇ</li>
<li>ÂèØ‰ª•ÈÄöËøáÊåáÂÆöÁ¥¢ÂºïÊó∂ÊéíÂ∫èÂ≠óÊÆµÁöÑÂçáÈôçÂ∫èÔºåÊù•ËøõË°å‰ºòÂåñÔºõ</li>
<li>Ê≥®ÊÑèË¶ÅÈÅµÂæ™Â∑¶ÂâçÁºÄÊ≥ïËøõË°åÁ¥¢Âºï„ÄÇ</li>
<li>Â¶ÇÊûúË¶Å filesort ÂèØ‰ª•ÈÄÇÂΩìÂ¢ûÂä†ÊéíÂ∫èÁºìÂÜ≤Âå∫Â§ßÂ∞è sort_buffer_size„ÄÇ</li>
</ul>
<h3 id="group-by-‰ºòÂåñ">group by ‰ºòÂåñ</h3>
<ul>
<li>ÂàÜÁªÑÊìç‰ΩúÊó∂ÔºåÂèØ‰ª•ÈÄöËøáÁ¥¢ÂºïÊù•ÊèêÈ´òÊïàÁéá„ÄÇ</li>
<li>ÂàÜÁªÑÊìç‰ΩúÊó∂ÔºåÁ¥¢ÂºïÁöÑ‰ΩøÁî®‰πüÊòØÊª°Ë∂≥ÊúÄÂ∑¶ÂâçÁºÄÊ≥ï„ÄÇ</li>
</ul>
<h3 id="limit-‰ºòÂåñ">limit ‰ºòÂåñ</h3>
<pre><code class="language-mysql"># ‰∏çÁõ¥Êé•‰ΩøÁî® limit Ëé∑ÂèñÂÖ®ÈÉ®Êï∞ÊçÆÔºåËÄåÊòØÂè™Ëé∑Âèñ id ÁÑ∂ÂêéÂÜç‰Ωú‰∏∫Ë°®Êü•ËØ¢
SELECT s.* FROM tb_sku s, (SELECT id FROM tb_sku ORDER BY id LIMIT 9000000, 10) a WHERE s.id = a.id;


</code></pre>
<h3 id="count-‰ºòÂåñ">count ‰ºòÂåñ</h3>
<p>MyISAM ÂºïÊìé‰ºöÊää‰∏Ä‰∏™Ë°®ÁöÑÊÄªË°åÊï∞Â≠òÂú®Á£ÅÁõò‰∏äÔºõInnoDB ÂºïÊìéÂàôÈúÄË¶Å‰∏ÄË°å‰∏ÄË°åÂú∞ËÆ°ÁÆó„ÄÇ</p>
<pre><code class="language-mysql"># ÊïàÁéáÊéíË°å Ôºöcount(*) &gt; count(1) &gt; count(‰∏ªÈîÆ) &gt; count(Â≠óÊÆµ)


</code></pre>
<h3 id="update‰ºòÂåñ">update‰ºòÂåñ</h3>
<p>InnoDB ÁöÑË°åÈîÅÊòØÈíàÂØπÁ¥¢ÂºïÂä†ÁöÑÈîÅÔºå‰∏çÊòØÈíàÂØπËÆ∞ÂΩïÂä†ÁöÑÈîÅÔºåÂπ∂‰∏îËØ•Á¥¢Âºï‰∏çËÉΩÂ§±ÊïàÔºåÂê¶Âàô‰ºö‰ªéË°åÈîÅÂçáÁ∫ß‰∏∫Ë°®ÈîÅ„ÄÇ</p>
<h2 id="ËßÜÂõæÂ≠òÂÇ®ËøáÁ®ãËß¶ÂèëÂô®">ËßÜÂõæ/Â≠òÂÇ®ËøáÁ®ã/Ëß¶ÂèëÂô®</h2>
<h3 id="ËßÜÂõæ">ËßÜÂõæ</h3>
<p>ËßÜÂõæÔºàViewÔºâÊòØ‰∏ÄÁßçËôöÊãüÂ≠òÂú®ÁöÑË°®„ÄÇËßÜÂõæ‰∏≠ÁöÑÊï∞ÊçÆÂπ∂‰∏çÂú®Êï∞ÊçÆÂ∫ì‰∏≠ÂÆûÈôÖÂ≠òÂú®ÔºåË°åÂíåÂàóÊï∞ÊçÆÊù•Ëá™ÂÆö‰πâËßÜÂõæÁöÑÊü•ËØ¢‰∏≠‰ΩøÁî®ÁöÑË°®ÔºåÂπ∂‰∏îÊòØÂú®‰ΩøÁî®ËßÜÂõæÊó∂Âä®ÊÄÅÁîüÊàêÁöÑ„ÄÇÂÖ∂ÂÆûÔºåËßÜÂõæÂ∞±ÊòØ‰øùÁïô‰∫Ü SQL ÈÄªËæëÔºå‰∏ç‰øùÂ≠òÊü•ËØ¢ÁªìÊûú„ÄÇ</p>
<p>WITH CHECK OPTION Â≠êÂè•ÂàõÂª∫Êó∂ÔºåMySQL ‰ºöÊ£ÄÊü•Ê≠£Âú®Êõ¥ÊîπÁöÑË°åÊòØÂê¶Á¨¶ÂêàËßÜÂõæÁöÑÂÆö‰πâ„ÄÇMySQL ÂÖÅËÆ∏Âü∫‰∫éÂè¶‰∏Ä‰∏™ËßÜÂõæÂàõÂª∫ËßÜÂõæÔºåÂÆÉËøò‰ºöÊ£ÄÊü•‰æùËµñËßÜÂõæ‰∏≠ÁöÑËßÑÂàô‰ª•‰øùÊåÅ‰∏ÄËá¥ÊÄß„ÄÇ‰∏∫‰∫ÜÁ°ÆÂÆöÊ£ÄÊü•ËåÉÂõ¥ÔºåMySQL Êèê‰æõ‰∫Ü‰∏§‰∏™ÈÄâÈ°πÔºö CASCADEDÔºàÈªòËÆ§Ôºâ Âíå LOCAL„ÄÇ</p>
<pre><code class="language-mysql"># ÂàõÂª∫
CREATE [OR REPLACE] VIEW ËßÜÂõæÂêçÁß∞[(ÂàóÂêçÂàóË°®)] AS SELECTËØ≠Âè• [with cascaded check option]; 

# Êü•ËØ¢
SHOW CREATE VIEW ËßÜÂõæÂêçÁß∞;
SELECT * FROM ËßÜÂõæÂêçÁß∞ ...;

# ‰øÆÊîπ
CREATE [OR REPLACE] VIEW ËßÜÂõæÂêçÁß∞[(ÂàóÂêçÂàóË°®)] AS SELECTËØ≠Âè•„ÄÇ
ALTER VIEW ËßÜÂõæÂêçÁß∞[(ÂàóÂêçÂàóË°®)] AS SELECTËØ≠Âè•„ÄÇ

# Âà†Èô§
DROP VIEW [IF EXISTS] ËßÜÂõæÂêç;


</code></pre>
<p>ËßÜÂõæËã•ÂåÖÂê´‰∏Ä‰∏ãÈ°πÂàô‰∏çÂèØÊõ¥Êñ∞Ôºö</p>
<ul>
<li>1„ÄÅËÅöÂêàÂáΩÊï∞ÊàñÁ™óÂè£ÂáΩÊï∞ÔºàSUM()„ÄÅMIN()„ÄÅMAX()„ÄÅCOUNT()Á≠âÔºâÔºõ</li>
<li>2„ÄÅDISTINCT„ÄÅGROUP BY„ÄÅHAVING„ÄÅUNION Êàñ UNION ALL„ÄÇ</li>
</ul>
<p>‰ΩúÁî®Ôºö</p>
<ul>
<li>ÁªèÂ∏∏‰ΩøÁî®ÁöÑÊü•ËØ¢ÂèØ‰ª•Ë¢´ÂÆö‰πâ‰∏∫ËßÜÂõæÔºå‰ªéËÄåÁî®Êà∑‰∏çÂøÖÊØèÊ¨°Êìç‰ΩúÈÉΩÊåáÂÆöÊìç‰ΩúÊù•ËøõË°åÊü•ËØ¢‰∫ÜÔºõ</li>
<li>Êï∞ÊçÆÂ∫ìÊéàÊùÉÔºåÈÄöËøáËßÜÂõæÁî®Êà∑Âè™ËÉΩÊü•ËØ¢Âíå‰øÆÊîπÊâÄËÉΩËßÅÂà∞ÁöÑÊï∞ÊçÆÔºõ</li>
<li>ËßÜÂõæÂèØ‰ª•Â∏ÆÂä©Áî®Êà∑Â±èËîΩÁúüÂÆûË°®ÁªìÊûÑÂèòÂåñÂ∏¶Êù•ÁöÑÂΩ±Âìç„ÄÇ</li>
</ul>
<h3 id="Â≠òÂÇ®ËøáÁ®ã">Â≠òÂÇ®ËøáÁ®ã</h3>
<p>Â≠òÂÇ®ËøáÁ®ãÂ∞±ÊòØ‰∫ãÂÖàÁªèËøáÁºñËØëÂπ∂Â≠òÂÇ®Âú®Êï∞ÊçÆÂ∫ì‰∏≠ÁöÑ‰∏ÄÊÆµ SQL ËØ≠Âè•ÁöÑÈõÜÂêàÔºåË∞ÉÁî®Â≠òÂÇ®ËøáÁ®ãÂèØ‰ª•ÁÆÄÂåñÂ∫îÁî®ÂºÄÂèë‰∫∫ÂëòÁöÑÂæàÂ§öÂ∑•‰ΩúÔºåÂáèÂ∞ëÊï∞ÊçÆÂú®Êï∞ÊçÆÂ∫ìÂíåÂ∫îÁî®ÊúçÂä°Âô®‰πãÈó¥ÁöÑ‰º†ËæìÔºåÂØπ‰∫éÊèêÈ´òÊï∞ÊçÆÂ§ÑÁêÜÁöÑÊïàÁéáÊòØÊúâÂ•ΩÂ§ÑÁöÑ„ÄÇ</p>
<p>Â≠òÂÇ®ËøáÁ®ãÊÄùÊÉ≥‰∏äÔºåÂ∞±ÊòØÊï∞ÊçÆÂ∫ì SQL ËØ≠Âè•Â±ÇÈù¢ÁöÑ‰ª£Á†ÅÂ∞ÅË£Ö‰∏éÈáçÁî®„ÄÇÂèØ‰ª•Êé•Êî∂ÂèÇÊï∞Ôºå‰πüÂèØ‰ª•ËøîÂõûÊï∞ÊçÆÔºåÂáèÂ∞ëÁΩëÁªú‰∫§‰∫íÔºåÊèêÈ´òÊïàÁéá„ÄÇ</p>
<pre><code class="language-mysql"># ÂàõÂª∫
# ÈÄöËøáÂÖ≥ÈîÆÂ≠ó delimiter ÊåáÂÆö SQL ËØ≠Âè•ÁªìÊùüÁ¨¶
/*
delimiter $$
CREATE PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞([ÂèÇÊï∞ÂàóË°®])
BEGIN
	-- SQL ËØ≠Âè•
END$$
*/
CREATE PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞([ÂèÇÊï∞ÂàóË°®])
BEGIN
	-- SQL ËØ≠Âè•
END;

# Ë∞ÉÁî®
CALL ÂêçÁß∞([ÂèÇÊï∞]);

# Êü•Áúã
SELECT * FROM INFORMATION_SCHEMA.ROUTINES WHERE ROUTINE_SCHEMA = 'xxx';
SHOW CREATE PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞;

# Âà†Èô§
DROP PROCEDURE [IF EXISTS] Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞;


</code></pre>
<p>Á≥ªÁªüÂèòÈáè ÊòØ MySQL ÊúçÂä°Âô®Êèê‰æõÔºå‰∏çÊòØÁî®Êà∑ÂÆö‰πâÁöÑÔºåÂ±û‰∫éÊúçÂä°Âô®Â±ÇÈù¢„ÄÇÂàÜ‰∏∫ÂÖ®Â±ÄÂèòÈáèÔºàGLOBALÔºâ„ÄÅ‰ºöËØùÂèòÈáèÔºàSESSIOMÔºâ„ÄÇ</p>
<ul>
<li>ÈªòËÆ§ÊòØÊîπÂèò SESSION ÂèòÈáè„ÄÇ</li>
<li>MySQL ÊúçÂä°Âô®ÈáçÂêØÂêéÔºåËÆæÁΩÆÁöÑÂÖ®Â±ÄÂèÇÊï∞‰ºöÂ§±ÊïàÔºåÊÉ≥Ë¶Å‰∏çÂ§±ÊïàÔºåÂèØ‰ª•Âú® /etc/my.cnf ‰∏≠ÈÖçÁΩÆ„ÄÇ</li>
</ul>
<pre><code class="language-mysql"># Êü•ÁúãÁ≥ªÁªüÂèòÈáè
SHOW [SESSION|GLOBAL] VARIABLES;
SHOW [SESSION|GLOBAL] VARIABLES LIKE ...;
SELECT @@[SESSION|GLOBAL] Á≥ªÁªüÂèòÈáèÂêç;

# ËÆæÁΩÆÁ≥ªÁªüÂèòÈáè
SET [SESSION|GLOBAL] Á≥ªÁªüÂèòÈáèÂêç = ÂÄº;
SET @@[SESSION|GLOBAL] Á≥ªÁªüÂèòÈáèÂêç = ÂÄº;


</code></pre>
<p>Áî®Êà∑ÂÆö‰πâÂèòÈáè ÊòØÁî®Êà∑Ê†πÊçÆËá™Â∑±ÂÆö‰πâÁöÑÂèòÈáèÔºåÁî®Êà∑ÂèòÈáè‰∏çÁî®ÊèêÂâçÂ£∞ÊòéÔºåÂú®Áî®ÁöÑÊó∂ÂÄôÁõ¥Êé•Áî® &ldquo;@ÂèòÈáèÂêç&rdquo; ‰ΩøÁî®„ÄÇÂÖ∂‰ΩúÁî®Âüü‰∏∫ÂΩìÂâçËøûÊé•„ÄÇ</p>
<pre><code class="language-mysql"># ËµãÂÄº
SET @var_name = expr;
SET @var_name := expr;
SELECT @var_name := expr;
SELECT Â≠óÊÆµÂêç INTO @var_name FROM Ë°®Âêç;
# ‰ΩøÁî®
SELECT @var_name;


</code></pre>
<p>Â±ÄÈÉ®ÂèòÈáè Ê†πÊçÆÈúÄË¶ÅÂÆö‰πâÁöÑÂú®Â±ÄÈÉ®ÁîüÊïàÁöÑÂèòÈáèÔºåËÆøÈóÆ‰πãÂâçÔºåÈúÄË¶Å DECLARE Â£∞Êòé„ÄÇÂèØÁî®‰ΩúÂ≠òÂÇ®ËøáÁ®ãÂÜÖÁöÑÂ±ÄÈÉ®ÂèòÈáèÂíåËæìÂÖ•ÂèÇÊï∞ÔºåÂ±ÄÈÉ®ÂèòÈáèÁöÑËåÉÂõ¥ÊòØÂú®ÂÖ∂ÂÜÖÂ£∞ÊòéÁöÑ BEGIN &hellip; END Âùó„ÄÇ</p>
<pre><code class="language-mysql"># Â£∞Êòé
DECLARE ÂèòÈáèÂêç ÂèòÈáèÁ±ªÂûã [DEFAULT ...];
# ËµãÂÄº
SET ÂèòÈáèÂêç = ÂÄº;
SET ÂèòÈáèÂêç := ÂÄº;
SELECT Â≠óÊÆµÂêç INTO ÂèòÈáèÂêç FROM Ë°®Âêç ...;


</code></pre>
<pre><code class="language-mysql"># if ËØ≠Âè•
IF Êù°‰ª∂1 THEN
...
ELSEIF Êù°‰ª∂2 THEN	
...
ELSE
...
END IF;


</code></pre>
<pre><code class="language-mysql">#  ÂèÇÊï∞ IN„ÄÅOUT„ÄÅINOUT
CREATE PROCEDURE Â≠òÂÇ®ËøáÁ®ãÂêçÁß∞([IN/OUT/INOUT ÂèÇÊï∞Âêç ÂèÇÊï∞Á±ªÂûã])
BEGIN
	-- SQL ËØ≠Âè•
END;


</code></pre>
<pre><code class="language-mysql"># case ËØ≠Âè•
CASE case_value
	WHEN when_value1 THEN statement_list1
	...
END CASE;

CASE
	WHEN search_condition1 THEN statement_list1
	...
END CASE;


</code></pre>
<pre><code class="language-mysql"># while ËØ≠Âè•
WHILE Êù°‰ª∂ DO
	SQL ÈÄªËæë
END WHILE;


</code></pre>
<pre><code class="language-mysql"># repeat ËØ≠Âè•
REPEAT
	SQL ÈÄªËæë
	UNTIL Êù°‰ª∂
END REPEAT;


</code></pre>
<pre><code class="language-mysql"># loop ÂáΩÊï∞
# LEAVEÔºöÈÄÄÂá∫Âæ™ÁéØÔºõITERATEÔºöË∑≥ËøáÂΩìÂâçÂæ™ÁéØÔºåËøõÂÖ•‰∏ãÊ¨°Âæ™ÁéØ„ÄÇ
[begin_label:]LOOP
	SQL ÈÄªËæë
END LOOP [end_label];

CREATE PROCEDURE pp(IN n INT)
BEGIN
	DECLARE total INT DEFAULT 0;
	
	sum:LOOP
		IF n &lt;= 0 THEN
			LEAVE sum;
		END IF;
		
		SET total := total + n;
		SET n := n - 1;
	END LOOP sum;
	SELECT total;
END;


</code></pre>
<pre><code class="language-mysql">/* 
	Ê∏∏Ê†áÔºàCURSORÔºâÁî®Êù•Â≠òÂÇ®Êü•ËØ¢ÁªìÊûúÈõÜÁöÑÊï∞ÊçÆÁ±ªÂûãÔºå
	Âú®Â≠òÂÇ®ËøáÁ®ãÂíåÂáΩÊï∞‰∏≠ÂèØ‰ΩøÁî®Ê∏∏Ê†áÂØπÁªìÊûúÈõÜËøõË°åÂæ™ÁéØÂ§ÑÁêÜ„ÄÇ
*/
# Ê∏∏Ê†áÂ£∞Êòé
DECLARE Ê∏∏Ê†áÂêçÁß∞ CURSOR FOR Êü•ËØ¢ËØ≠Âè•;
# ÊâìÂºÄÊ∏∏Ê†á
OPEN Ê∏∏Ê†áÂêçÁß∞;
# Ëé∑ÂèñÊ∏∏Ê†áËÆ∞ÂΩï(Âæ™ÁéØËé∑Âèñ)
FETCH Ê∏∏Ê†áÂêçÁß∞ INTO ÂèòÈáè;
# ÂÖ≥Èó≠Ê∏∏Ê†á
CLOSE Ê∏∏Ê†áÂêçÁß∞;


</code></pre>
<pre><code class="language-mysql"># Êù°‰ª∂Â§ÑÁêÜÁ®ãÂ∫è Handler
# handler_actionÔºöCONTINUE ÁªßÁª≠ÊâßË°åÂΩìÂâçÁ®ãÂ∫è„ÄÅEXIT ÁªàÊ≠¢ÊâßË°åÂΩìÂâçÁ®ãÂ∫è„ÄÇ
# SQLSTATE sqlstate_value Áä∂ÊÄÅÁ†Å„ÄÅSQLWARNING ‰ª•01ÂºÄÂ§¥ÁöÑSQLSTATE‰ª£Á†ÅÁÆÄÂÜô„ÄÅNOT FOUND ‰ª•02ÂºÄÂ§¥ÁöÑSQLSTATE‰ª£Á†ÅÁÆÄÂÜô„ÄÅSQLEXCEPTION ÂÖ∂‰ªñ„ÄÇ
DECLARE handler_action HANDLER FOR condition_value statement;

DECLARE exit HANDLER FOR SQLSTATE '02000' CLOSE u_cursor;


</code></pre>
<h3 id="Â≠òÂÇ®ÂáΩÊï∞">Â≠òÂÇ®ÂáΩÊï∞</h3>
<p>Â≠òÂÇ®ÂáΩÊï∞ÊòØÊúâËøîÂõûÂÄºÁöÑÂ≠òÂÇ®ËøáÁ®ãÔºåÂ≠òÂÇ®ÂáΩÊï∞ÁöÑÂèÇÊï∞Âè™ËÉΩÊòØ IN Á±ªÂûãÁöÑ„ÄÇ</p>
<pre><code class="language-mysql">/*
	DETREMINISTICÔºöÁõ∏ÂêåÁöÑËæìÂÖ•ÂèÇÊï∞ÊÄªÊòØ‰∫ßÁîüÁõ∏ÂêåÁöÑÁªìÊûú;
	NO SQLÔºö‰∏çÂåÖÂê´ SQL ËØ≠Âè•;
	READS SQL DATAÔºöÂåÖÂê´ËøûÁª≠ËØªÂèñÊï∞ÊçÆÁöÑËØ≠Âè•Ôºå‰ΩÜ‰∏çÂåÖÂê´ÂÜôÂÖ•Êï∞ÊçÆËØ≠Âè•„ÄÇ
*/
CREATE FUNCTION Â≠òÂÇ®ÂáΩÊï∞ÂêçÁß∞([ÂèÇÊï∞ÂàóË°®])
RETURNS type [characteristic ...]
BEGIN
	-- SQL ËØ≠Âè•
	RETURN ...;
END;


</code></pre>
<h3 id="Ëß¶ÂèëÂô®">Ëß¶ÂèëÂô®</h3>
<p>Ëß¶ÂèëÂô®ÊòØ‰∏éË°®ÊúâÂÖ≥ÁöÑÊï∞ÊçÆÂ∫ìÂØπË±°„ÄÇÂú® insert/update/delete ‰πãÂâçÊàñ‰πãÂêéÔºåËß¶ÂèëÂπ∂ÊâßË°åËß¶ÂèëÂô®‰∏≠ÂÆö‰πâÁöÑ SQL ËØ≠Âè•ÈõÜÂêà„ÄÇ</p>
<p>Ëß¶ÂèëÂô®ÂèØ‰ª•ÂçèÂä©Â∫îÁî®Âú®Êï∞ÊçÆÂ∫ìÁ´Ø‰øùËØÅÊï∞ÊçÆÁöÑÂÆåÊï¥ÊÄßÔºåÊó•ËÆ∞ËÆ∞ÂΩïÔºåÊï∞ÊçÆÊ†°È™åÁ≠âÊìç‰Ωú„ÄÇ</p>
<p>OLD Âíå NEW ÂºïÁî®Ëß¶ÂèëÂô®‰∏≠ÂèòÂåñÁöÑËÆ∞ÂΩïÂÜÖÂÆπ„ÄÇÊîØÊåÅË°åÁ∫ßËß¶Âèë„ÄÇ</p>
<p>INTER ÂûãËß¶ÂèëÂô®ÔºöNEW Ë°®Á§∫Â∞ÜË¶ÅÊàñËÄÖÂ∑≤ÁªèÊñ∞Â¢ûÁöÑÊï∞ÊçÆÔºõ</p>
<p>UPDATE ÂûãËß¶ÂèëÂô®ÔºöOLD Ë°®Á§∫‰øÆÊîπ‰πãÂâçÁöÑÊï∞ÊçÆÔºåNEW Ë°®Á§∫Â∞ÜË¶ÅÊàñÂ∑≤Áªè‰øÆÊîπÂêéÁöÑÊï∞ÊçÆ„ÄÇ</p>
<p>DELETE ÂûãËß¶ÂèëÂô®ÔºöOLD Ë°®Á§∫Â∞ÜË¶ÅÊàñÂ∑≤ÁªèÂà†Èô§ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<pre><code class="language-mysql"># ÂàõÂª∫
CREATE TRIGGER trigger_name
BEFORE / AFTER INSERT / UPDATE / DELETE
ON table_name FOR EACH ROW
BEGIN
	triggle_statement;
END;
# Êü•Áúã
SHOW TRIGGERS;
# Âà†Èô§
DROP TRIGGER [schema_name.]trigger_name;


</code></pre>
<pre><code class="language-mysql">-- ÈÄöËøáËß¶ÂèëÂô®ËÆ∞ÂΩï tb_user Ë°®ÁöÑÂèòÊõ¥Êï∞ÊçÆÔºåÂ∞ÜÂèòÊõ¥Êó•ÂøóÊèíÂÖ•Âà∞Êó•ÂøóË°® user_logs ‰∏≠ÔºåÂåÖÂê´Â¢ûÂä†„ÄÅ‰øÆÊîπ„ÄÅÂà†Èô§
# Êó•ÂøóË°® user_log
create table user_logs(
	id int(11) not null auto_increment;
    operation varchar(20) not null comment 'Êìç‰ΩúÁ±ªÂûã',
    operation_tim datetime not null comment 'Êìç‰ΩúÊó∂Èó¥',
    operate_id int(11) not null comment 'Êìç‰ΩúID',
    operate_params varchar(500) comment 'Êìç‰ΩúÂèÇÊï∞',
    primary key(id)
)engine=innodb default charset=utf8;

# ÊèíÂÖ•Êï∞ÊçÆËß¶ÂèëÂô®
create trigger tb_user_insert_trigger
	after insert on tb_user for each row
begin
	insert into user_logs(id, operation, operate_time, operate_id, operate_params) values (null, 'insert', now(), new.id, concat('ÊèíÂÖ•ÁöÑÊï∞ÊçÆÂÜÖÂÆπ‰∏∫Ôºöid=', new.id, ', name=', new.name, ', phone=', new.phone, ', email=', new.email))
end;

# Êõ¥Êñ∞Êï∞ÊçÆËß¶ÂèëÂô®
create trigger tb_user_update_trigger
	after insert on tb_user for each row
begin
	insert into user_logs(id, operation, operate_time, operate_id, operate_params) values (null, 'update', now(), new.id, concat('Êõ¥Êñ∞ÂâçÂÜÖÂÆπ‰∏∫Ôºöid=', old.id, ', name=', old.name, ', phone=', old.phone, ', email=', old.email,'Êõ¥Êñ∞ÂêéÂÜÖÂÆπ‰∏∫Ôºöid=', new.id, ', name=', new.name, ', phone=', new.phone, ', email=', new.email))
end;


</code></pre>
<h2 id="ÈîÅ">ÈîÅ</h2>
<p>ÈîÅÊòØËÆ°ÁÆóÊú∫ÂçèË∞ÉÂ§ö‰∏™ËøõÁ®ãÊàñÁ∫øÁ®ãÂπ∂ÂèëËÆøÈóÆÊüê‰∏ÄËµÑÊ∫êÁöÑÊú∫Âà∂„ÄÇ</p>
<ul>
<li>ÂÖ®Â±ÄÈîÅÔºöÈîÅÂÆöÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑÊâÄÊúâË°®„ÄÇ</li>
<li>Ë°®Á∫ßÈîÅÔºöÊØèÊ¨°Êìç‰ΩúÈÉΩÈîÅ‰ΩèÊï¥Âº†Ë°®„ÄÇ</li>
<li>Ë°åÁ∫ßÈîÅÔºöÊØèÊ¨°Êìç‰ΩúÈîÅ‰ΩèÂØπÂ∫îÁöÑË°åÊï∞ÊçÆ„ÄÇ</li>
</ul>
<h3 id="ÂÖ®Â±ÄÈîÅ">ÂÖ®Â±ÄÈîÅ</h3>
<p>Âä†ÈîÅÂêéÔºåÊï¥‰∏™ÂÆû‰æãÂ∞±Â§Ñ‰∫éÂè™ËØªÁä∂ÊÄÅ„ÄÇ</p>
<p>ÂÖ∏ÂûãÂú∫ÊôØ‰∏∫ÂÖ®Â∫ìÊï∞ÊçÆÁöÑÈÄªËæëÂ§á‰ªΩÔºåÂØπÊâÄÊúâË°®ËøõË°åÈîÅÂÆö„ÄÇ</p>
<p>1„ÄÅÂ¶ÇÊûúÂú®‰∏ªÂ∫ìÂ§á‰ªΩÔºåÈÇ£‰πàÂ§á‰ªΩÊúüÈó¥Êï∞ÊçÆ‰∏çËÉΩÊõ¥Êñ∞Ôºå‰∏öÂä°Âü∫Êú¨ÂÅúÊëÜÔºõ</p>
<p>2„ÄÅÂ¶ÇÊûúÂú®‰ªéÂ∫ìÂ§á‰ªΩÔºåÈÇ£‰πàÂ§á‰ªΩÊúüÈó¥Êó†Ê≥ïÊâßË°å‰∏ªÂ∫ìÂêåÊ≠•ËøáÊù•ÁöÑ‰∫åËøõÂà∂Êó•ÂøóÔºå‰∏ª‰ªé‰∏ç‰∏ÄËá¥„ÄÇ</p>
<pre><code class="language-mysql"># ‰∏çÂä†ÈîÅ‰∏ÄËá¥ÊÄßÊï∞ÊçÆÂ§á‰ªΩ
mysqldump --single-transaction -h [address] -uroot -p1234 TestDB &gt; TestDB.sql;
# Âä†ÈîÅ
flush tables with read lock;

# Â§á‰ªΩ
mysqldump -h [address] -uroot -p1234 TestDB &gt; TestDB.sql;

# Ëß£ÈîÅ
unlock tables;


</code></pre>
<h3 id="Ë°®Á∫ßÈîÅ">Ë°®Á∫ßÈîÅ</h3>
<p>ÈîÅÂÆöÁ≤íÂ∫¶Â§ßÔºåÂèëÁîüÈîÅÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáÊúÄÈ´òÔºåÂπ∂ÂèëÂ∫¶ÊúÄ‰Ωé„ÄÇ</p>
<p>‰∏ªË¶ÅÊúâËøôÂá†Á±ª:</p>
<ul>
<li>Ë°®ÈîÅ
<ul>
<li>Ë°®ÂÖ±‰∫´ËØªÈîÅÔºàread lockÔºâÔºö‰∏ç‰ºöÈòªÂ°ûÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑËØªÔºå‰ΩÜ‰ºöÈòªÂ°ûÂÜô„ÄÇ</li>
<li>Ë°®Áã¨‰∫´ÂÜôÈîÅÔºàwrite lockÔºâÔºöÂÜôÈîÅÊó¢‰ºöÈòªÂ°ûÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑËØªÔºåÂèà‰ºöÈòªÂ°ûÂÖ∂‰ªñÂÆ¢Êà∑Á´ØÁöÑÂÜô„ÄÇ</li>
</ul>
</li>
<li>ÂÖÉÊï∞ÊçÆÈîÅÔºàmeta data lockÔºâÔºöÁ≥ªÁªüËá™Âä®ÊéßÂà∂ÔºåÁª¥Êä§Ë°®ÂÖÉÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÔºåÂú®Ë°®‰∏äÊúâÊ¥ªÂä®‰∫ãÂä°Êó∂Ôºå‰∏çÂèØ‰ª•ÂØπÂÖÉÊï∞ÊçÆËøõË°åÂÜôÂÖ•Êìç‰Ωú„ÄÇ</li>
<li>ÊÑèÂêëÈîÅÔºöÈÅøÂÖçË°åÈîÅÂíåË°®ÈîÅÂÜ≤Á™ÅÔºåÁî®ÊÑèÂêëÈîÅ‰ΩøË°®ÈîÅ‰∏çÁî®Ê£ÄÊü•ÊØèË°åÊï∞ÊçÆÊòØÂê¶Âä†ÈîÅÔºå‰ΩøÁî®ÊÑèÂêëÈîÅÊù•ÂáèÂ∞ëË°®ÈîÅÁöÑÊ£ÄÊü•„ÄÇ
<ul>
<li>ÊÑèÂêëÂÖ±‰∫´ÈîÅÔºàISÔºâÔºö‰∏éË°®ÂÖ±‰∫´ÈîÅÔºàreadÔºâÂÖºÂÆπÔºå‰∏éË°®ÂÖ±‰∫´ÈîÅÔºàreadÔºâ‰∫íÊñ•„ÄÇ</li>
<li>ÊÑèÂêëÊéí‰ªñÈîÅÔºàIXÔºâÔºö‰∏éË°®ÂÖ±‰∫´ÈîÅÔºàreadÔºâÂíåË°®ÂÖ±‰∫´ÈîÅÔºàreadÔºâÈÉΩ‰∫íÊñ•„ÄÇÊÑèÂêëÈîÅ‰πãÈó¥‰∏ç‰∫íÊñ•„ÄÇ</li>
</ul>
</li>
</ul>
<pre><code class="language-mysql">/*
	ÂΩìÂºÄÂêØ‰∫ãÂä°Êó∂ÔºåÂ∞±‰∏çËÉΩÂØπÂÖÉÊï∞ÊçÆËøõË°åÊìç‰ΩúÔºåÂè™Êúâ‰∫ãÂä°ÁªìÊùü‰∫ÜÊâçËÉΩÊìç‰Ωú„ÄÇ
	‰∏ÄËà¨Êù•ËØ¥ÔºåËØªÊï∞ÊçÆÊòØÂèØ‰ª•Âä†Ë°®ÈîÅÔºõËÄåÊîπÊï∞ÊçÆÊòØ‰∏çËÉΩÂä†Ë°®ÈîÅÁöÑ„ÄÇ
*/
# Ë°®ÈîÅ
LOCK TABLES Ë°®Âêç READ / WRITE;
UNLOCK TABLES / ÂÆ¢Êà∑Á´ØÊñ≠ÂºÄËøûÊé•;

# Âä†ÈîÅ
SELECT ËØ≠Âè• LOCK IN SHARE MODE;

# Êü•ÁúãÂÖÉÊï∞ÊçÆÈîÅ
SELECT * FROM performance_schema.metadata_locks;

# Êü•ÁúãÊÑèÂêëÈîÅÂíåË°åÈîÅ
SELECT * FROM performance_schema.data_locks;


</code></pre>
<h3 id="Ë°åÁ∫ßÈîÅ">Ë°åÁ∫ßÈîÅ</h3>
<p>Ë°åÁ∫ßÈîÅÔºåÊØèÊ¨°Êìç‰ΩúÈîÅÂØπÂ∫îÁöÑË°åÊï∞ÊçÆ„ÄÇÈîÅÂÆöÁ≤íÂ∫¶ÊúÄÂ∞èÔºåÂèëÁîüÈîÅÂÜ≤Á™ÅÁöÑÊ¶ÇÁéáÊúÄ‰ΩéÔºåÂπ∂ÂèëÂ∫¶ÊúÄÈ´ò„ÄÇ</p>
<p>InooDB ÁöÑÊï∞ÊçÆÊòØÂü∫‰∫éÁ¥¢ÂºïÁªÑÁªáÁöÑÔºåË°åÈîÅÊòØÈÄöËøáÂØπÁ¥¢Âºï‰∏äÁöÑÁ¥¢ÂºïÈ°πÂä†ÈîÅÊù•ÂÆûÁé∞ÁöÑÔºåËÄå‰∏çÊòØÂØπÂ∫îËÆ∞ÂΩïÂä†ÁöÑÈîÅ„ÄÇ</p>
<ul>
<li>Ë°åÈîÅÔºàRecord LockÔºâÔºöÈîÅÂÆöÂçï‰∏™Ë°åËÆ∞ÂΩïÁöÑÈîÅÔºåÈò≤Ê≠¢ÂÖ∂‰ªñ‰∫ãÂä°ÂØπÊ≠§ËøõË°å update Âíå delete„ÄÇÂú® RC„ÄÅRR ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÈÉΩÊîØÊåÅ„ÄÇ</li>
<li>Èó¥ÈöôÈîÅÔºàGap LockÔºâÔºöÈîÅÂÆöÁ¥¢ÂºïËÆ∞ÂΩïÈó¥ÈöôÔºåÁ°Æ‰øùÁ¥¢ÂºïËÆ∞ÂΩïÈó¥Èöô‰∏çÂèòÔºåÈò≤Ê≠¢ÂÖ∂‰ªñ‰∫ãÂä°Âú®Èó¥ÈöôËøõË°å insert Ôºå‰∫ßÁîüÂπªËØª„ÄÇÂú® RR ÈöîÁ¶ªÁ∫ßÂà´‰∏ãÈÉΩÊîØÊåÅ„ÄÇ</li>
<li>‰∏¥ÈîÆÈîÅÔºàNext-Key-LOCKÔºâÔºöË°åÈîÅÂíåÂêåÈöôÈîÅÁªÑÂêàÔºåÂêåÊó∂ÈîÅ‰ΩèÊï∞ÊçÆÔºåÂπ∂ÈîÅ‰ΩèÊï∞ÊçÆÂâçÈù¢ÁöÑÈó¥ÈöôGap„ÄÇÂú®RRÈöîÁ¶ªÁ∫ßÂà´‰∏ãÊîØÊåÅ„ÄÇ</li>
</ul>
<p>ÂÖ±‰∫´ÈîÅÔºàSÔºâÔºöÂÖÅËÆ∏‰∏Ä‰∏™‰∫ãÂä°ÂéªËØª‰∏ÄË°åÔºåÁªÑÁªáÂÖ∂‰ªñ‰∫ãÂä°Ëé∑ÂèñÁõ∏ÂêåÊï∞ÊçÆÈõÜÁöÑÊéí‰ªñÈîÅ„ÄÇ</p>
<p>Êéí‰ªñÈîÅÔºàXÔºâÔºöÂÖÅËÆ∏Ëé∑ÂèñÊéí‰ªñÈîÅÁöÑ‰∫ãÂä°Êõ¥Êñ∞Êï∞ÊçÆÔºåÈòªÊ≠¢ÂÖ∂‰ªñ‰∫ãÂä°Ê¥ªÂæóÁõ∏ÂêåÁöÑÊï∞ÊçÆÈõÜÁöÑÂÖ±‰∫´ÈîÅÂíåÊéí‰ªñÈîÅ„ÄÇ</p>
<div class="table-wrapper"><table>
<thead>
<tr>
<th>SQL</th>
<th>Ë°åÈîÅÁ±ªÂûã</th>
<th>ËØ¥Êòé</th>
</tr>
</thead>
<tbody>
<tr>
<td>INSERT</td>
<td>Êéí‰ªñÈîÅ</td>
<td>Ëá™Âä®Âä†ÈîÅ</td>
</tr>
<tr>
<td>UPDATE</td>
<td>Êéí‰ªñÈîÅ</td>
<td>Ëá™Âä®Âä†ÈîÅ</td>
</tr>
<tr>
<td>DELETE</td>
<td>Êéí‰ªñÈîÅ</td>
<td>Ëá™Âä®Âä†ÈîÅ</td>
</tr>
<tr>
<td>SELECT</td>
<td>‰∏çÂä†ÈîÅ</td>
<td>/</td>
</tr>
<tr>
<td>SELECT &hellip; LOCK IN SHARE MODE</td>
<td>ÂÖ±‰∫´ÈîÅ</td>
<td>ÊâãÂä®Âä†ÈîÅ</td>
</tr>
<tr>
<td>SELECT &hellip; FOR UPDATE</td>
<td>Êéí‰ªñÈîÅ</td>
<td>ÊâãÂä®Âä†ÈîÅ</td>
</tr>
</tbody>
</table></div>
<p>1„ÄÅÂØπÂîØ‰∏ÄÁ¥¢ÂºïËøõË°åÊ£ÄÁ¥¢ÔºåÂ∞±ÊòØË°åÈîÅ„ÄÇ</p>
<p>2„ÄÅÂØπÊ≤°ÊúâÁ¥¢ÂºïÁöÑÊù°‰ª∂ËøõË°åÊ£ÄÁ¥¢Ôºå‰ºöÂçáÁ∫ß‰∏∫Ë°®ÈîÅ„ÄÇ</p>
<p>3„ÄÅÁ¥¢Âºï‰∏äËøõË°åÁ≠âÂÄºÊü•ËØ¢ÔºàÂîØ‰∏ÄÁ¥¢ÂºïÔºâÔºåÁªô‰∏çÂ≠òÂú®ÁöÑËÆ∞ÂΩïÂä†ÈîÅÊó∂Ôºå‰ºòÂåñ‰∏∫Èó¥ÈöôÈîÅ„ÄÇ</p>
<p>4„ÄÅÁ¥¢Âºï‰∏äËøõË°åÁ≠âÂÄºÊü•ËØ¢ÔºàÊôÆÈÄöÁ¥¢ÂºïÔºâÔºåÂêëÂè≥ÈÅçÂéÜÂà∞ÊúÄÂêé‰∏Ä‰∏™ÂÄºÈÉΩ‰∏çÊª°Ë∂≥Êü•ËØ¢ÈúÄÊ±ÇÊó∂Ôºånext-key lock ÈÄÄÂåñ‰∏∫Èó¥Èöô„ÄÇ</p>
<p>5„ÄÅÁ¥¢Âºï‰∏äËøõË°åËåÉÂõ¥Êü•ËØ¢ÔºàÂîØ‰∏ÄÁ¥¢ÂºïÔºâÔºå‰ºöËÆøÈóÆÁõ¥Âà∞‰∏çÊª°Ë∂≥Êù°‰ª∂ÁöÑÁ¨¨‰∏Ä‰∏™ÂÄº‰∏∫Ê≠¢„ÄÇ</p>
<h2 id="innodb-ÂºïÊìé">InnoDB ÂºïÊìé</h2>
<h3 id="ÈÄªËæëÂ≠òÂÇ®ÁªìÊûÑ">ÈÄªËæëÂ≠òÂÇ®ÁªìÊûÑ</h3>
<p>TableSpace &raquo;&gt; Segment &raquo;&gt; Extent &raquo;&gt; Page &raquo;&gt; ROW</p>
<p>Ë°®Á©∫Èó¥ÔºàibdÊñá‰ª∂ÔºâÔºö‰∏Ä‰∏™ MySQL ÂÆû‰æãÂèØ‰ª•ÂØπÂ∫îÂ§ö‰∏™Ë°®Á©∫Èó¥ÔºåÁî®‰∫éÂ≠òÂÇ®ËÆ∞ÂΩï„ÄÅÁ¥¢ÂºïÁ≠âÊï∞ÊçÆ„ÄÇ</p>
<p>ÊÆµÔºöÊï∞ÊçÆÊÆµÔºàLeaf node segmentÔºâ„ÄÅÁ¥¢ÂºïÊÆµÔºàNon-leaf node segmentÔºâ„ÄÅÂõûÊªöÊÆµÔºàRollback segmentÔºâ„ÄÅInnoDB ÊòØÁ¥¢ÂºïÁªÑÁªáË°®ÔºåÊï∞ÊçÆÊÆµÂ∞±ÊòØ B+ Ê†ëÁöÑÂè∂Â≠êËäÇÁÇπÔºåÁ¥¢ÂºïÊÆµ‰∏∫ B+ Ê†ëÁöÑÈùûÂè∂Â≠êÂá†ÁÇπ„ÄÇÊÆµÁî®Êù•ÁÆ°ÁêÜÂå∫„ÄÇ</p>
<p>Âå∫ÔºöË°®Á©∫Èó¥ÁöÑÂçïÂÖÉÁªìÊûÑÔºåÊØè‰∏™Âå∫Â§ßÂ∞è‰∏∫ 1M„ÄÇÈªòËÆ§ÊÉÖÂÜµÔºåInnoDB Â≠òÂÇ®ÂºïÊìéÈ°µÂ§ßÂ∞è‰∏∫ 16kÔºåÂç≥‰∏Ä‰∏™Âå∫‰∏≠‰∏ÄÂÖ±Êúâ 64‰∏™ ËøûÁª≠ÁöÑÈ°µ„ÄÇ</p>
<p>È°µÔºöInnoDB Â≠òÂÇ®ÂºïÊìéÁ£ÅÁõòÁÆ°ÁêÜÁöÑÊúÄÂ∞èÂçïÂÖÉÔºåÊØè‰∏™È°µÁöÑÂ§ßÂ∞èÈªòËÆ§‰∏∫ 16KB„ÄÇ‰∏∫‰∫Ü‰øùËØÅÈ°µÁöÑËøûÁª≠ÊÄßÔºåInnoDB Â≠òÂÇ®ÂºïÊìéÊØèÊ¨°‰ªéÁ£ÅÁõòÁî≥ËØ∑ 4-5 ‰∏™Âå∫„ÄÇ</p>
<p>Ë°åÔºöInnoDB Â≠òÂÇ®ÂºïÊìéÊï∞ÊçÆÊòØÊåâË°åËøõË°åÂ≠òÊîæÁöÑ„ÄÇ</p>
<p>Trx_idÔºöÊØèÊ¨°ÂØπÊüêÊù°ËÆ∞ÂΩïËøõË°åÊîπÂä®Êó∂ÔºåÈÉΩ‰ºöÊääÂØπÂ∫îÁöÑ‰∫ãÂä° id ËµãÂÄºÁªô trx_id ÈöêËóèÂàó„ÄÇ</p>
<p>Roll_pointerÔºöÊØèÊ¨°ÂØπÊüêÊù°ÂºïËÆ∞ÂΩïÊîπÂä®Êó∂ÔºåÈÉΩ‰ºöÊääÊóßÁâàÊú¨ÂÜôÂÖ•Âà∞ undo Êó•Âøó‰∏≠ÔºåÁÑ∂ÂêéËøô‰∏™ÈöêËóèÂàóÂ∞±Áõ∏ÂΩì‰∫é‰∏Ä‰∏™ÊåáÈíàÔºåÂèØ‰ª•ÈÄöËøáÂÆÉÊâæÂà∞ËØ•ËÆ∞ÂΩï‰øÆÊîπÂâçÁöÑ‰ø°ÊÅØ„ÄÇ</p>
<h3 id="Êû∂ÊûÑ">Êû∂ÊûÑ</h3>
<p><strong>ÂÜÖÂ≠òÊû∂ÊûÑ</strong></p>
<p><strong>Buffer Pool</strong>ÔºöÁºìÂÜ≤Ê±†ÊòØ‰∏ªÂÜÖÂ≠ò‰∏≠ÁöÑ‰∏Ä‰∏™Âå∫ÂüüÔºåÁºìÂ≠òÁ£ÅÁõò‰∏äÁªèÂ∏∏Êìç‰ΩúÁöÑÁúüÂÆûÊï∞ÊçÆÔºåÂú®ÊâßË°åÂ¢ûÂà†ÊîπÊü•Êìç‰ΩúÊó∂ÔºåÂÖàÊìç‰ΩúÁºìÂÜ≤Ê±†‰∏≠ÁöÑÊï∞ÊçÆÔºàËã•Ê≤°ÊúâÊï∞ÊçÆÔºåÂàô‰ªéÁ£ÅÁõòÂä†ËΩΩÂπ∂ÁºìÂÜ≤ÔºâÔºåÁÑ∂Âêé‰ª•‰∏ÄÂÆöÈ¢ëÁéáÂà∑Êñ∞Âà∞Á£ÅÁõòÔºå‰ªéËÄåÂáèÂ∞ëÁ£ÅÁõòIOÔºåÂä†Âø´Â§ÑÁêÜÈÄüÂ∫¶„ÄÇ</p>
<p>ÁºìÂÜ≤Ê±†‰ª• Page È°µ‰∏∫Âçï‰ΩçÔºåÂ∫ïÂ±ÇÈááÁî®ÈìæË°®Êï∞ÊçÆÁªìÊûÑÁÆ°ÁêÜ Page„ÄÇÊ†πÊçÆÁä∂ÊÄÅÔºåÂ∞ÜPageÂàÜ‰∏∫‰∏âÁßçÁ±ªÂûãÔºöfree page Á©∫Èó≤È°µÔºåÊ≤°‰ΩøÁî®ËøáÔºõclean page Ë¢´‰ΩøÁî®ËøáÔºå‰ΩÜÊï∞ÊçÆÊú™‰øÆÊîπÔºõdirty page ËÑèÈ°µÔºåÂ∞±ÊòØË¢´‰ΩøÁî®Ëøá‰πüË¢´‰øÆÊîπËøáÔºå‰∏éÁ£ÅÁõò‰∏≠ÁöÑÊï∞ÊçÆ‰∫ßÁîü‰∫Ü‰∏ç‰∏ÄËá¥„ÄÇ</p>
<p><strong>Change Buffer</strong>ÔºöÊõ¥ÊîπÁºìÂÜ≤Âå∫ÔºàÈíàÂØπ‰∫é‰∫åÁ∫ßÁ¥¢ÂºïÈ°µÔºâÔºåÂú®ÊâßË°å DML ËØ≠Âè•ÔºåÂ¶ÇÊûúÊï∞ÊçÆÊ≤°ÊúâÂú® Buffer Pool‰∏≠Ôºå‰∏ç‰ºöÁõ¥Êé•Êìç‰ΩúÁ£ÅÁõòÔºåËÄåÊòØÂ∞ÜÊï∞ÊçÆÂèòÊõ¥ÂêéÁöÑÂÜÖÂÆπÂ≠òÂú®Êõ¥ÊîπÁºìÂÜ≤Âå∫ Change Buffer‰∏≠ÔºåÂú®Êú™Êù•Êï∞ÊçÆË¢´ËØªÂèñÊó∂ÔºåÂÜçÂ∞ÜÊï∞ÊçÆÂêàÂπ∂ÊÅ¢Â§çÂà∞ Buffer Pool‰∏≠ÔºåÂÜçÂ∞ÜÂêàÂπ∂ÂêéÁöÑÊï∞ÊçÆÂà∑Êñ∞Âà∞Á£ÅÁõò‰∏≠„ÄÇ</p>
<p>Âõ†‰∏∫‰∫åÁ∫ßÁ¥¢ÂºïÊòØÈùûÂîØ‰∏ÄÁöÑÔºåÂπ∂‰∏îÊèíÂÖ•È°∫Â∫èÊòØÁõ∏ÂØπÈöèÊú∫ÁöÑÔºåÂ¶ÇÊûúË¶ÅÂØπÂÖ∂Êõ¥ÊîπÊØèÊ¨°Êìç‰ΩúÈÉΩË¶Å‰æùËµñÁ£ÅÁõòÔºåËøôÊ†∑‰ºöÈÄ†ÊàêÂ§ßÈáèÁöÑÁ£ÅÁõò IOÔºåÊúâ‰∫Ü ChangeBuffer ÂêéÔºåÊàë‰ª¨ÂèØ‰ª•Âú®ÁºìÂÜ≤Ê±†Ê±áÊÄªËøõË°åÂêàÂπ∂Â§ÑÁêÜÔºåÂáèÂ∞ëÁ£ÅÁõò IO„ÄÇ</p>
<p><strong>Adaptive Hash Index</strong>ÔºöËá™ÈÄÇÂ∫î hash Á¥¢ÂºïÔºåÁî®‰∫é‰ºòÂåñÂØπ Buffer Pool Êï∞ÊçÆÁöÑÊü•ËØ¢„ÄÇInnoDB Â≠òÂÇ®ÂºïÊìé‰ºöÁõëÊéßÂØπË°®‰∏äÂêÑÁ¥¢ÂºïÈ°µÁöÑÊü•ËØ¢ÔºåÂ¶ÇÊûúËßÇÂØüÂà∞ Hash Á¥¢ÂºïÂèØ‰ª•ÊèêÂçáÈÄüÂ∫¶ÔºåÂàôÂª∫Á´ã Hash Á¥¢ÂºïÔºåÁß∞‰πã‰∏∫Ëá™ÈÄÇÂ∫î Hash Á¥¢Âºï„ÄÇÂèÇÊï∞Ôºö<code>adaptive_hash_index</code>„ÄÇ</p>
<p><strong>Log Buffer</strong>ÔºöÊó•ÂøóÁºìÂÜ≤Âå∫ÔºåÁî®Êù•‰øùÊä§Ë¶ÅÂÜôÂÖ•Âà∞Á£ÅÁõò‰∏≠ÁöÑ log Êó•ÂøóÊï∞ÊçÆÔºàredo log„ÄÅundo logÔºâÔºåÈªòËÆ§Â§ßÂ∞è‰∏∫ 16MBÔºåÊó•ÂøóÁºìÂÜ≤Âå∫ÁöÑÊó•Âøó‰ºöÂÆöÊúüÂà∑Êñ∞Âà∞Á£ÅÁõò‰∏≠„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÊõ¥Êñ∞„ÄÅÊèíÂÖ•ÊàñÂà†Èô§Â§öË°åÁöÑ‰∫ãÂä°ÔºåÂ¢ûÂä†Êó•ÂøóÁºìÂÜ≤Âå∫ÁöÑÂ§ßÂ∞èÂèØ‰ª•ËäÇÁúÅÁ£ÅÁõò IO„ÄÇÂèÇÊï∞Ôºö<code>innodb_log_buffer_size</code>„ÄÅ<code>innodb_flush_log_at_trx_commit</code>„ÄÇ1ÔºöÊó•ÂøóÂú®ÊØèÊ¨°‰∫ãÂä°Êèê‰∫§Êó∂ÂÜôÂÖ•Âπ∂Âà∑Êñ∞Âà∞Á£ÅÁõòÔºõ0ÔºöÊØèÁßíÂ∞ÜÊó•ÂøóÂÜôÂÖ•Âπ∂Âà∑Êñ∞Âà∞Á£ÅÁõò‰∏ÄÊ¨°Ôºõ2ÔºöÊó•ÂøóÂú®ÊØèÊ¨°‰∫ãÂä°Êèê‰∫§ÂêéÂÜôÂÖ•ÔºåÂπ∂ÊØèÁßíÂà∑Êñ∞Âà∞Á£ÅÁõò‰∏ÄÊ¨°„ÄÇ</p>
<p><strong>Á£ÅÁõòÁªìÊûÑ</strong></p>
<p><strong>System TableSapce</strong>ÔºöÁ≥ªÁªüË°®Á©∫Èó¥ÊòØÊõ¥ÊîπÁºìÂÜ≤Âå∫ÁöÑÂ≠òÂÇ®Âå∫Âüü„ÄÇÂ¶ÇÊûúË°®ÊòØÂú®Á≥ªÁªüÁ©∫Èó¥ËÄå‰∏çÊòØÊØè‰∏™Ë°®Êñá‰ª∂ÊàñÈÄöÁî®Ë°®Á©∫Èó¥ÂàõÂª∫ÁöÑÔºåÂÆÉ‰πüÂèØËÉΩÂåÖÂê´Ë°®ÂíåÁ¥¢ÂºïÊï∞ÊçÆ„ÄÇÂèÇÊï∞Ôºö<code>innodb_data_file_path</code>„ÄÇ</p>
<p><strong>File-Per-Table Tablespace</strong>ÔºöÊØè‰∏™Ë°®ÁöÑÊñá‰ª∂Ë°®Á©∫Èó¥ÂåÖÂê´Âçï‰∏™ InnoDB Ë°®ÁöÑÊï∞ÊçÆÂíåÁ¥¢ÂºïÔºåÂπ∂Â≠òÂÇ®Âú®Êñá‰ª∂Á≥ªÁªü‰∏äÁöÑÂçï‰∏™Êï∞ÊçÆÊñá‰ª∂„ÄÇÂèÇÊï∞Ôºö<code>innodb_file_per_table</code>„ÄÇ</p>
<p><strong>General Tablespaces</strong>ÔºöÈÄöÁî®Ë°®Á©∫Èó¥ÔºåÈúÄË¶ÅÈÄöËøá CREATE TABLESPACE ËØ≠Ê≥ïÂàõÂª∫ÈÄöÁî®Ë°®Á©∫Èó¥ÔºåÂú®ÂàõÂª∫Ë°®Êó∂ÔºåÂèØ‰ª•ÊåáÂÆöËØ•Ë°®Á©∫Èó¥„ÄÇ</p>
<pre><code class="language-mysql"># ÂàõÂª∫Ë°®Á©∫Èó¥
CREATE TABLESPACE xxx ADD 
DATAFILE 'file_name'
ENGINE = engine_name;
# ÂàõÂª∫Ë°®
CREATE TABLE xxx TABLESPACE ts_name;


</code></pre>
<p><strong>Undo TableSpaces</strong>ÔºöÊí§ÈîÄË°®Á©∫Èó¥ÔºåMySQL ÂÆû‰æãÂú®ÂàùÂßãÂåñÊó∂‰ºöËá™Âä®ÂàõÂª∫‰∏§‰∏™ÈªòËÆ§ÁöÑ undo Ë°®Á©∫Èó¥ÔºàÂàùÂßãÂ§ßÂ∞è16MÔºâÔºåÁî®‰∫éÂ≠òÂÇ®undo logÊó•Âøó„ÄÇ</p>
<p><strong>Temporay Tablespaces</strong>ÔºöInnoDB ‰ΩøÁî®‰ºöËØù‰∏¥Êó∂Ë°®Á©∫Èó¥ÂíåÂÖ®Â±Ä‰∏¥Êó∂Ë°®Á©∫Èó¥„ÄÇÂ≠òÂÇ®Áî®Êà∑ÂàõÂª∫ÁöÑ‰∏¥Êó∂Ë°®Êï∞ÊçÆ„ÄÇ</p>
<p><strong>Doublewrite Buffer Files</strong>ÔºöÂèåÂÜôÁºìÂÜ≤Âå∫ÔºåInnoDB ÂºïÊìéÂ∞ÜÊï∞ÊçÆÈ°µ‰ªé Buffer Pool Âà∑Êñ∞Âà∞Á£ÅÁõòÂâçÔºåÁ∫øÂ∞ÜÊï∞ÊçÆÈ°µÂÜôÂÖ•ÂèåÂÜôÁºìÂÜ≤Âå∫Êñá‰ª∂‰∏≠Ôºå‰æø‰∫éÁ≥ªÁªüÂºÇÂ∏∏Êó∂ÊÅ¢Â§çÊï∞ÊçÆ„ÄÇ</p>
<p><strong>Redo Log</strong>ÔºöÈáçÂÜôÊó•ÂøóÔºåÊòØÁî®Êù•ÂÆûÁé∞‰∫ãÂä°ÁöÑÊåÅ‰πÖÊÄß„ÄÇËØ•Êó•ÂøóÊñá‰ª∂Áî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºöÈáçÂÅöÊó•ÂøóÁºìÂÜ≤Ôºàredo log bufferÔºâ‰ª•ÂèäÈáçÂÅöÊó•ÂøóÊñá‰ª∂Ôºàredo logÔºâÔºåÂâçËÄÖÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂêéËÄÖÂú®Á£ÅÁõò‰∏≠„ÄÇÂΩì‰∫ãÂä°Êèê‰∫§Âêé‰ºöÊääÊâÄÊúâ‰øÆÊîπ‰ø°ÊÅØÈÉΩ‰ºöÂ≠òÂà∞Êó•Âøó‰∏≠ÔºåÁî®‰∫éÂú®Âà∑Êñ∞ËÑèÈ°µÂà∞Á£ÅÁõòÊó∂ÔºåÂèëÁîüÈîôËØØÊó∂ÔºåËøõË°åÊï∞ÊçÆÊÅ¢Â§ç‰ΩøÁî®„ÄÇÂæ™ÁéØÂÜôÂÖ•ÈáçÂÅöÊó•ÂøóÊñá‰ª∂ÔºåÊ∂âÂèä‰∏§‰∏™Êñá‰ª∂Ôºöib_logfile0„ÄÅib_logfile1„ÄÇ</p>
<p><strong>ÂêéÂè∞Á∫øÁ®ã</strong></p>
<p><strong>Master Thread</strong>ÔºöÊ†∏ÂøÉÂêéÂè∞Á∫øÁ®ãÔºåË¥üË¥£Ë∞ÉÂ∫¶ÂÖ∂‰ªñÁ∫øÁ®ãÔºåËøòË¥üË¥£Â∞ÜÁºìÂÜ≤Ê±†‰∏≠ÁöÑÊï∞ÊçÆÂºÇÊ≠•Âà∑Êñ∞Âà∞Á£ÅÁõò‰∏≠Ôºå‰øùÊåÅÊï∞ÊçÆÁöÑ‰∏ÄËá¥ÊÄßÔºåËøòÂåÖÊã¨ËÑèÈ°µÁöÑÂà∑Êñ∞„ÄÅÂêàÂπ∂ÊèíÂÖ•ÁºìÂÜ≤„ÄÅundoÈ°µÁöÑÂõûÊî∂„ÄÇ</p>
<p><strong>IO Thread</strong>ÔºöAIOË¥üË¥£IOËØ∑Ê±ÇÁöÑÂõûË∞É„ÄÇRead thread Ôºà4Ôºâ„ÄÅWrite threadÔºà4Ôºâ„ÄÅLog threadÔºà1Ôºâ„ÄÅInsert buffer threadÔºà1Ôºâ„ÄÇ</p>
<pre><code class="language-mysql">SHOW ENGINE innodb status;


</code></pre>
<p><strong>Purge Thread</strong>Ôºö‰∏ªË¶ÅÁî®‰∫éÂõûÊî∂‰∫ãÂä°Â∑≤ÁªèÊèê‰∫§‰∫ÜÁöÑundo logÔºåÂú®‰∫ãÂä°Êèê‰∫§ÂêéÔºåundo logÂèØËÉΩ‰∏çÁî®‰∫ÜÔºåÂ∞±Áî®ÂÆÉÊù•ÂõûÊî∂„ÄÇ</p>
<p><strong>Page Cleaner Thread</strong>ÔºöÂçèÂä© Master Thread Âà∑Êñ∞ËÑèÈ°µÂà∞Á£ÅÁõòÁöÑÁ∫øÁ®ãÔºåÂÆÉÂèØ‰ª•ÂáèËΩª Master Thread ÁöÑÂ∑•‰ΩúÂéãÂäõÔºåÂáèÂ∞ëÈòªÂ°û„ÄÇ</p>
<h3 id="‰∫ãÂä°ÂéüÁêÜ">‰∫ãÂä°ÂéüÁêÜ</h3>
<p>‰∫ãÂä°Â∞±ÊòØ‰∏ÄÁªÑÊìç‰ΩúÁöÑÈõÜÂêàÔºåÂ∞ÜÊâÄÊúâÊìç‰ΩúËßÜ‰ΩúÊòØ‰∏Ä‰∏™Êï¥‰ΩìÂêëÁ≥ªÁªüÊèê‰∫§ÔºåËã•ÊòØÂÖ∂‰∏≠Êüê‰∏™Êìç‰ΩúÂ§±Ë¥•‰∫ÜÔºåÂ∞±‰ºöÊâßË°åÂõûÊªöÊìç‰Ωú„ÄÇ</p>
<p>‰∫ãÂä°ÂÖ∑Êúâ ACID ÁöÑÁâπÊÄßÔºö</p>
<p>ÂéüÂ≠êÊÄßÔºåÂ∞±ÊòØ‰∫ãÂä°‰∏çÂèØÂàÜÂâ≤ÔºåË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÊàêÂäüÔºåË¶Å‰πàÂÖ®ÈÉ®ÊâßË°åÂ§±Ë¥•„ÄÇ</p>
<p>‰∏ÄËá¥ÊÄßÔºå‰∫ãÂä°ÂÆåÊàêÊó∂ÔºåÂøÖÈ°ªËÆ©ÊâÄÊúâÊï∞ÊçÆ‰øùÊåÅ‰∏ÄËá¥ÊÄß„ÄÇ</p>
<p>ÈöîÁ¶ªÊÄßÔºå‰∫ãÂä°‰∏çÂèóÂ§ñÈÉ®Âπ∂ÂèëÊìç‰ΩúÂΩ±Âìç„ÄÇ</p>
<p>ÊåÅ‰πÖÊÄßÔºå‰∫ãÂä°‰∏ÄÊó¶Êèê‰∫§ÊàñÂõûÊªöÔºåÊï∞ÊçÆÁöÑÊîπÂèòÂ∞±ÊòØÊ∞∏‰πÖÁöÑ„ÄÇ</p>
<p>ÂéüÂ≠êÊÄß - undo log</p>
<p>ÊåÅ‰πÖÊÄß - redo log</p>
<p>‰∏ÄËá¥ÊÄß - undo log + redo log</p>
<p>ÈöîÁ¶ªÊÄß - ÈîÅ + MVCC</p>
<p><strong>redo</strong>ÔºöÈáçÂÅöÊó•ÂøóÔºåËÆ∞ÂΩïÁöÑÊòØ‰∫ãÂä°Êèê‰∫§Êó∂Êï∞ÊçÆÈ°µÁöÑÁâ©ÁêÜ‰øÆÊîπÔºåÁî®Êù•ÂÆûÁé∞‰∫ãÂä°ÁöÑÊåÅ‰πÖÊÄß„ÄÇ</p>
<p>ËØ•Êó•ÂøóÊñá‰ª∂Áî±‰∏§ÈÉ®ÂàÜÁªÑÊàêÔºåÈáçÂÅöÊó•ÂøóÁºìÂÜ≤Ôºàredo log bufferÔºâ„ÄÅÈáçÂÅöÊó•ÂøóÊñá‰ª∂Ôºàredo log fileÔºâ„ÄÇÂâçËÄÖÊòØÂú®ÂÜÖÂ≠ò‰∏≠ÔºåÂêéËÄÖÂú®Á£ÅÁõò‰∏≠ÔºåÂΩì‰∫ãÂä°Êèê‰∫§Âêé‰ºöÊääÊâÄÊúâ‰øÆÊîπ‰ø°ÊÅØÈÉΩÂ≠òÂà∞ËØ•Êó•ÂøóÊñá‰ª∂‰∏≠ÔºåÁî®‰∫éÂú®Âà∑Êñ∞ËÑèÈ°µÂà∞Á£ÅÁõòÔºåÂèëÁîüÈîôËØØÊó∂ÔºåËøõË°åÊï∞ÊçÆÊÅ¢Â§ç‰ΩøÁî®„ÄÇ</p>
<p><strong>undo</strong>ÔºöÂõûÊªöÊó•ÂøóÔºåÁî®‰∫éËÆ∞ÂΩïÊï∞ÊçÆË¢´‰øÆÊîπÂâçÁöÑ‰ø°ÊÅØÔºåÂåÖÊã¨Êèê‰∫§ÂõûÊªöÂíåMVCCÔºàÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂Ôºâ„ÄÇundo log Âíå redo log ËÆ∞ÂΩïÁâ©ÁêÜÊó•Âøó‰∏ç‰∏ÄÊ†∑Ôºå‰ªñÊòØÈÄªËæëÊó•Âøó„ÄÇ‰πüÂ∞±ÊòØÂΩìÁî®Êà∑ÊâßË°å‰∏ÄÊ¨° delete ËÆ∞ÂΩïÊó∂Ôºåundo log ‰ºöËÆ∞ÂΩï‰∏ÄÊù° insert ËÆ∞ÂΩïÔºå‰ª•Êñπ‰æøÂõûÊªö„ÄÇ</p>
<p><strong>undo log ÈîÄÊØÅ</strong>Ôºöundo log Âú®‰∫ãÂä°ÊâßË°åÊó∂‰∫ßÁîüÔºå‰∫ãÂä°Êèê‰∫§Êó∂Ôºå‰∏ç‰ºöÁ´ãÂàªÂà†Èô§ undo logÔºåÂõ†‰∏∫Ëøô‰∫õÊó•ÂøóËøòÁî®‰∫é MVCC„ÄÇ</p>
<p><strong>undo log Â≠òÂÇ®</strong>Ôºöundo log ÈááÁî®ÊÆµÊñπÂºèËøõË°åÁÆ°ÁêÜÂíåËÆ∞ÂΩïÔºåÂ≠òÊîæÂú®ÂâçÈù¢‰ªãÁªç rollback segment ÂõûÊªöÊÆµ‰∏≠ÔºåÂÜÖÈÉ®ÂåÖÂê´ 1024 ‰∏™ undo log segment„ÄÇ</p>
<h3 id="mvcc">MVCC</h3>
<p><strong>ÂΩìÂâçËØª</strong>ÔºöËØªÂèñËÆ∞ÂΩïÁöÑÊúÄÊñ∞ÁâàÊú¨ÔºåËØªÂèñÊó∂‰øùËØÅÂÖ∂‰ªñÂπ∂Âèë‰∫ãÂä°‰∏çËÉΩ‰øÆÊîπÂΩìÂâçËÆ∞ÂΩïÔºå‰ºöÂØπËØªÂèñËÆ∞ÂΩïËøõË°åÂä†ÈîÅ„ÄÇ</p>
<p><strong>Âø´ÁÖßËØª</strong>ÔºöÁÆÄÂçïÁöÑ selectÔºà‰∏çÂä†ÈîÅÔºâÂ∞±ÊòØÂø´ÁÖßËØªÔºåÂø´ÁÖßËØªÔºåËØªÂèñÁöÑÊòØËÆ∞ÂΩïÊï∞ÊçÆÁöÑÂèØËßÅÁâàÊú¨ÔºåÊúâÂèØËÉΩÊòØÂéÜÂè≤Êï∞ÊçÆÔºå‰∏çÂä†ÈîÅÔºåÊòØÈùûÈòªÂ°ûËØª„ÄÇ</p>
<ul>
<li>Read CommittedÔºöÊØèÊ¨° select ÈÉΩÁîüÊàê‰∏Ä‰∏™Âø´ÁÖßËØª„ÄÇ</li>
<li>Repetabel ReadÔºöÂºÄÂêØ‰∫ãÂä°ÂêéÁ¨¨‰∏Ä‰∏™ select ËØ≠Âè•ÊòØÂø´ÁÖßËØª„ÄÇ</li>
<li>SerializableÔºöÂø´ÁÖßËØªÈÄÄÂåñ‰∏∫ÂΩìÂâçËØª„ÄÇ</li>
</ul>
<p><strong>MVCC</strong>ÔºöMulti-Version Concurrency ControlÔºåÂ§öÁâàÊú¨Âπ∂ÂèëÊéßÂà∂„ÄÇ‰πüÂ∞±ÊòØÁª¥Êä§‰∏Ä‰∏™Êï∞ÊçÆÁöÑÂ§ö‰∏™ÁâàÊú¨Ôºå‰ΩøÂæóËØªÂÜôÊìç‰ΩúÊ≤°ÊúâÂÜ≤Á™ÅÔºåÂø´ÁÖßËØª‰∏∫ MySQL ÂÆûÁé∞ MVCC Êèê‰æõ‰∫Ü‰∏Ä‰∏™ÈùûÈòªÂ°ûËØªÂäüËÉΩ„ÄÇMVCC ÁöÑÂÖ∑‰ΩìÂÆûÁé∞Ôºå‰æùËµñÊï∞ÊçÆÂ∫ìËÆ∞ÂΩï‰∏≠ÁöÑ‰∏â‰∏™ÈöêÂºèÂ≠óÊÆµ„ÄÅundo logÊó•Âøó„ÄÅreadView„ÄÇ</p>
<p><strong>ÈöêËóèÂ≠óÊÆµ</strong>Ôºö</p>
<ul>
<li>DB_TRX_ID ÊúÄËøë‰øÆÊîπ‰∫ãÂä°IDÔºåËÆ∞ÂΩïÊèíÂÖ•ËøôÊù°ËÆ∞ÂΩïÊàñÊúÄÂêé‰∏ÄÊ¨°‰øÆÊîπ‰∏∫ËØ•ËÆ∞ÂΩïÁöÑ‰∫ãÂä°ID„ÄÇ</li>
<li>DB_ROLL_PTR ÂõûÊªöÊåáÈíàÔºåÊåáÂêëËøôÊù°ËÆ∞ÂΩïÁöÑ‰∏ä‰∏™ÁâàÊú¨ÔºåÁî®‰∫éÈÖçÂêà undo logÔºåÊåáÂêë‰∏ä‰∏™ÁâàÊú¨„ÄÇ</li>
<li>DB_ROW_ID ÈöêËóè‰∏ªÈîÆÔºåÂ¶ÇÊûúË°®ÁªìÊûÑÊ≤°ÊúâÊåáÂÆö‰∏ªÈîÆÔºåÂ∞Ü‰ºöÁîüÊàêËØ•ÈöêËóèÂ≠óÊÆµ„ÄÇ</li>
</ul>
<p><strong>undo log</strong>ÔºöÂõûÊªöÊó•ÂøóÔºåÂú® insert„ÄÅupdate„ÄÅdelete Êó∂‰∫ßÁîü‰æø‰∫éÊï∞ÊçÆÂõûÊªöÁöÑÊó•Âøó„ÄÇÂΩì insert ÁöÑÊó∂ÂÄôÔºå‰∫ßÁîüÁöÑ undo log Êó•ÂøóÂè™Âú®ÂõûÊªöÊó∂ÈúÄË¶ÅÔºåÂú®‰∫ãÂä°Êèê‰∫§ÂêéÔºåÂèØË¢´Á´ãÂç≥Âà†Èô§„ÄÇËÄå update„ÄÅdelete ÁöÑÊó∂ÂÄôÔºå‰∫ßÁîüÁöÑ undo log Êó•Âøó‰∏ç‰ªÖÂú®ÂõûÊªöÊó∂ÈúÄË¶ÅÔºåÂú®Âø´ÁÖßËØªÊó∂‰πüÈúÄË¶ÅÔºå‰∏ç‰ºöÁ´ãÂç≥Ë¢´Âà†Èô§„ÄÇ</p>
<p>‰∏çÂêå‰∫ãÂä°ÊàñÁõ∏Âêå‰∫ãÂä°ÂØπÂêå‰∏ÄÊù°ËÆ∞ÂΩï‰øÆÊîπÔºå‰ºöÂØºËá¥ËØ•ËÆ∞ÂΩïÁöÑ undo log ÁîüÊàê‰∏ÄÊù°ËÆ∞ÂΩïÁâàÊú¨ÈìæË°®ÔºåÈìæË°®Â§¥ÈÉ®ÊòØÊúÄÊñ∞ÁöÑÊóßËÆ∞ÂΩïÔºåÈìæË°®Â∞æÈÉ®ÊòØÊúÄÊó©ÁöÑÊóßËÆ∞ÂΩï„ÄÇ</p>
<p><strong>readview</strong>ÔºöËØªËßÜÂõæÔºåÊòØÂø´ÁÖßËØªSQLÊâßË°åÊó∂MVCCÊèêÂèñÊï∞ÊçÆÁöÑ‰æùÊçÆÔºåËÆ∞ÂΩïÂπ∂Áª¥Êä§Á≥ªÁªüÂΩìÂâçÊ¥ªË∑ÉÁöÑ‰∫ãÂä°ÔºàÊú™Êèê‰∫§ÁöÑÔºâid„ÄÇ</p>
<ul>
<li>m_ids ÂΩìÂâçÊ¥ªË∑ÉÁöÑ‰∫ãÂä°IDÈõÜÂêà„ÄÇ</li>
<li>min_trx_id ÊúÄÂ∞èÊ¥ªË∑É‰∫ãÂä°ID„ÄÇ</li>
<li>max_trx_id È¢ÑÂàÜÈÖç‰∫ãÂä°IDÔºåÂΩìÂâçÊúÄÂ§ß‰∫ãÂä°ID+1„ÄÇ</li>
<li>creator_trx_id ReadView ÂàõÂª∫ËÄÖ‰∫ãÂä°ID„ÄÇ</li>
</ul>
<p>ÁâàÊú¨ÈìæÊï∞ÊçÆËÆøÈóÆËßÑÂàôÔºö</p>
<p>READ COMMITEDÔºöÂú®‰∫ãÂä°‰∏≠ÊØè‰∏ÄÊ¨°ÊâßË°åÂø´ÁÖßËØªÊó∂ÁîüÊàêReadView„ÄÇ</p>
<p>REPEATABLE READÔºö‰ªÖÂú®‰∫ãÂä°Á¨¨‰∏ÄÊ¨°ÊâßË°åÊ±áÂø´ÁÖßËØªÊó∂ÁîüÊàêReadViewÔºåÂêéÁª≠Â§çÁî®ËØ• ReadView„ÄÇ</p>
<ul>
<li>TRX_ID == CREATOR_TRX_IDÔºà‚úìÔºâ- Êï∞ÊçÆÊòØÂΩìÂâç‰∫ãÂä°Êõ¥ÊîπÁöÑ„ÄÇ</li>
<li>TRX_ID &lt; MIN_TRX_IDÔºà‚úìÔºâ- ËØ¥ÊòéÊï∞ÊçÆÂ∑≤ÁªèÊèê‰∫§‰∫Ü„ÄÇ</li>
<li>TRX_ID &gt; MAX_TRX_IDÔºà√óÔºâ- ËØ¥Êòé‰∫ãÂä°ÊòØÂú® ReadView Áîü‰∫ßÂêéÊâçÂºÄÂêØ„ÄÇ</li>
<li>MIN_TRX_ID &lt;= TRX_ID &lt;= MAX_TRX_IDÔºà‰∏çÂú®ÈõÜÂêà‰∏≠ÂèØËÆøÈóÆÔºâ- ËØ¥ÊòéÊï∞ÊçÆÂ∑≤ÁªèÊèê‰∫§„ÄÇ</li>
</ul>
<h2 id="mysql-ÁÆ°ÁêÜ">MySQL ÁÆ°ÁêÜ</h2>
<h3 id="Á≥ªÁªüÊï∞ÊçÆÂ∫ì">Á≥ªÁªüÊï∞ÊçÆÂ∫ì</h3>
<p>MySQL Ëá™Â∏¶Âõõ‰∏™Êï∞ÊçÆÂ∫ìÔºö</p>
<ul>
<li>mysql Â≠òÂÇ® MySQL ÊúçÂä°Âô®Ê≠£Â∏∏ËøêË°åÊâÄÈúÄË¶ÅÁöÑÂêÑÁßç‰ø°ÊÅØ ÔºàÊó∂Âå∫„ÄÅ‰∏ª‰ªé„ÄÅÁî®Êà∑„ÄÅÊùÉÈôêÁ≠âÔºâ„ÄÇ</li>
<li>information_schema Êèê‰æõ‰∫ÜËÆøÈóÆÊï∞ÊçÆÂ∫ìÂÖÉÊï∞ÊçÆÁöÑÂêÑÁßçË°®ÂíåËßÜÂõæÔºåÂåÖÂê´Êï∞ÊçÆÂ∫ì„ÄÅË°®„ÄÅÂ≠óÊÆµÁ±ªÂûãÂèäËÆøÈóÆÊùÉÈôêÁ≠â„ÄÇ</li>
<li>performance_schema ‰∏∫ MySQL ÊúçÂä°Âô®ËøêË°åÊó∂Áä∂ÊÄÅÊèê‰æõ‰∫Ü‰∏Ä‰∏™Â∫ïÂ±ÇÁõëÊéßÂäüËÉΩÔºå‰∏ªË¶ÅÁî®‰∫éÊî∂ÈõÜÊï∞ÊçÆÂ∫ìÊúçÂä°Âô®ÊÄßËÉΩÂèÇÊï∞„ÄÇ</li>
<li>sys ÂåÖÂê´‰∫Ü‰∏ÄÁ≥ªÂàóÊñπ‰æø DBA ÂíåÂºÄÂèë‰∫∫ÂëòÂà©Áî® performance_schema ÊÄßËÉΩÊï∞ÊçÆÂ∫ìËøõË°åÊÄßËÉΩË∞É‰ºòÂíåËØäÊñ≠ÁöÑËßÜÂõæ„ÄÇ</li>
</ul>
<h3 id="Â∏∏Áî®Â∑•ÂÖ∑">Â∏∏Áî®Â∑•ÂÖ∑</h3>
<p><strong>MySQL ÂÆ¢Êà∑Á´Ø</strong></p>
<p>ËØ≠Ê≥ïÔºömysql [options] [database]</p>
<p>ÈÄâÈ°πÔºö-u, &ndash;user=name</p>
<p>‚Äã			-p,&ndash;password[=name]</p>
<p>‚Äã			-h,&ndash;host=name</p>
<p>‚Äã			-p,&ndash;port=port</p>
<p>‚Äã			-e,&ndash;excute=name</p>
<pre><code class="language-shell">mysql -uroot -p123456 db01 -e &quot;select * from stu*&quot;


</code></pre>
<p><strong>mysqladmin</strong>ÔºöÊâßË°åÁÆ°ÁêÜÊìç‰ΩúÁöÑÂÆ¢Êà∑Á´ØÁ®ãÂ∫èÔºåÁî®ÂÆÉÊù•Ê£ÄÊü•ÊúçÂä°Âô®ÁöÑÈÖçÁΩÆÂíåÂΩìÂâçÁä∂ÊÄÅ„ÄÅÂàõÂª∫Âπ∂Âà†Èô§Êï∞ÊçÆÂ∫ìÁ≠â„ÄÇ</p>
<pre><code class="language-shell">mysqladmin -uroot -p123456 drop 'test01'

mysqladmin -uroot -p123456 version


</code></pre>
<p><strong>mysqlbinlog</strong>ÔºöÁî±ÊúçÂä°Âô®ÁîüÊàêÂØπ‰∫åËøõÂà∂Êó•ÂøóÊñá‰ª∂‰ª•‰∫åËøõÂà∂Ê†ºÂºè‰øùÂ≠òÔºåÂ¶ÇÊûúÊÉ≥Ë¶ÅÊ£ÄÊü•Ëøô‰∫õÊñáÊú¨Ê†ºÂºèÔºåÂ∞±‰ºöÁî®Âà∞ËØ•Êó•ÂøóÁÆ°ÁêÜÂ∑•ÂÖ∑</p>
<p>ËØ≠Ê≥ïÔºömysqlbinlog [options] log-files1 log-file2</p>
<p>ÈÄâÈ°πÔºö-d,&ndash;database=name	ÊåáÂÆöÊï∞ÊçÆÂ∫ìÂêçÁß∞ÔºåÂè™ÂàóÂá∫ÊåáÂÆöÁöÑÊï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Êìç‰Ωú</p>
<p>‚Äã			-o,&ndash;offset=#	ÂøΩÁï•Êó•Âøó‰∏≠ÁöÑÂâçnË°åÂëΩ‰ª§</p>
<p>‚Äã			-r,&ndash;result-file=name	Â∞ÜËæìÂá∫ÁöÑÊñáÊú¨Ê†ºÂºèÊó•ÂøóËæìÂá∫Âà∞ÊåáÂÆöÊñá‰ª∂</p>
<p>‚Äã			-s,&ndash;short-form	ÊòæÁ§∫ÁÆÄÂçïÊ†ºÂºèÔºåÁúÅÁï•Êéâ‰∏Ä‰∫õ‰ø°ÊÅØ</p>
<p>‚Äã			-v	Â∞ÜË°å‰∫ã‰ª∂ÔºàÊï∞ÊçÆÂèòÊõ¥ÔºâÈáçÊûÑ‰∏∫ SQL ËØ≠Âè•</p>
<p>‚Äã			-vv	Â∞ÜË°å‰∫ã‰ª∂ÔºàÊï∞ÊçÆÂèòÊõ¥ÔºâÈáçÊûÑ‰∏∫ SQL ËØ≠Âè•ÔºåÂπ∂ËæìÂá∫Ê≥®Èáä‰ø°ÊÅØ</p>
<p>‚Äã			&ndash;start-datetime=date1 &ndash;stop-datetime=date2	ÊåáÂÆöÊó•ÊúüÈó¥ÈöîÂÜÖÁöÑÊâÄÊúâÊó•Âøó</p>
<p>‚Äã			&ndash;start-position=pos1 &ndash;stop-position=pos2	ÊåáÂÆö‰ΩçÁΩÆÈó¥ÈöîÂÜÖÁöÑÊâÄÊúâÊó•Âøó</p>
<p><strong>mysqlshow</strong>Ôºömysqlshow ÂÆ¢Êà∑Á´ØÂØπË±°Êü•ÊâæÂ∑•ÂÖ∑ÔºåÁî®Êù•ÂæàÂø´Âú∞Êü•ÊâæÂ≠òÂú®Âì™‰∫õÊï∞ÊçÆÂ∫ì„ÄÅÊï∞ÊçÆÂ∫ì‰∏≠ÁöÑË°®„ÄÅË°®‰∏≠ÁöÑÂàóÊàñËÄÖÁ¥¢Âºï„ÄÇ</p>
<p>ËØ≠Ê≥ïÔºömysqlshow [options] [db_name [table_name [col_name]]]</p>
<p>ÈÄâÈ°πÔºö&ndash;count	ÊòæÁ§∫Êï∞ÊçÆÂ∫ìÂèäË°®ÁöÑÁªüËÆ°‰ø°ÊÅØÔºàÊï∞ÊçÆÂ∫ìÔºåË°®ÂùáÂèØ‰ª•‰∏çÊåáÂÆöÔºâ</p>
<p>‚Äã			-i	ÊòæÁ§∫ÊåáÂÆöÊï∞ÊçÆÂ∫ìÊàñËÄÖÊâßË°åË°®ÁöÑÁä∂ÊÄÅ‰ø°ÊÅØ</p>
<pre><code class="language-shell"># Êü•ËØ¢ÊØè‰∏™Êï∞ÊçÆÂ∫ìÁöÑË°®ÁöÑÊï∞Èáè‰ª•ÂèäË°®‰∏≠ËÆ∞ÂΩïÁöÑÊï∞Èáè
mysqlshow -uroot -p1234 --count

# Êü•ËØ¢ test Â∫ì‰∏≠ÊØè‰∏™Ë°®ÁöÑÂ≠óÊÆµÊï∞Ôºå‰ª•ÂèäË°åÊï∞
mysqlshow -uroot -p1234 test --count

# Êü•ËØ¢ test Â∫ì‰∏≠ book Ë°®ÁöÑËØ¶ÁªÜÊÉÖÂÜµ
mysqlshow -uroot -p1234 test book --count


</code></pre>
<p><strong>mysqldump</strong>ÔºöÁî®Êù•Â§á‰ªΩÊï∞ÊçÆÂ∫ìÊàñÂú®‰∏çÂêåÊï∞ÊçÆÂ∫ì‰πãÈó¥ËøõË°åÊï∞ÊçÆËøÅÁßª„ÄÇÂ§á‰ªΩÂÜÖÂÆπÂåÖÂê´ÂàõÂª∫Ë°®Ôºå‰ª•ÂèäÊèíÂÖ•Ë°®ÁöÑ SQL ËØ≠Âè•„ÄÇ</p>
<p>ËØ≠Ê≥ïÔºömysqldump [options] db_name [tables]</p>
<p>‚Äã			mysqldump [options] &ndash;database/-B db1 [db2 db3 &hellip;]</p>
<p>‚Äã			mysqldump [options] &ndash;all-database/-A</p>
<p>ËøûÊé•ÈÄâÈ°πÔºö-u,&ndash;user=name</p>
<p>‚Äã					-p,&ndash;password[=name]</p>
<p>‚Äã					-h,&ndash;host=name</p>
<p>‚Äã					-p,&ndash;port=#</p>
<p>ËæìÂá∫ÈÄâÈ°πÔºö&ndash;add-drop-database	Âú®ÊØè‰∏™Êï∞ÊçÆÂ∫ìÂàõÂª∫ËØ≠Âè•ÂâçÂä†‰∏ä drop database</p>
<p>‚Äã					&ndash;add-drop-table	Âú®Ë°®ÂàõÂª∫ËØ≠Âè•ÂâçÂä†‰∏ä drop table</p>
<p>‚Äã					-n,&ndash;no-create-db	‰∏çÂåÖÂê´Êï∞ÊçÆÂ∫ìÁöÑÂàõÂª∫</p>
<p>‚Äã					-t,&ndash;no-create-info	‰∏çÂåÖÂê´Êï∞ÊçÆË°®ÁöÑÂàõÂª∫</p>
<p>‚Äã					-d,&ndash;no-data	‰∏çÂåÖÂê´Êï∞ÊçÆ</p>
<p>‚Äã					-T,&ndash;tab-name	Ëá™Âä®ÁîüÊàê‰∏§‰∏™Êñá‰ª∂Ôºå‰∏Ä‰∏™.sqlÊñá‰ª∂ÔºåÂàõÂª∫Ë°®ÁªìÊûÑ;‰∏Ä‰∏™.txtÊñá‰ª∂ÔºåÊï∞ÊçÆÊñá‰ª∂„ÄÇÔºà<code>show variables liek '%secure_file_priv;'</code>Ôºâ</p>
<p><strong>mysqlimport/soucre</strong>ÔºöÊï∞ÊçÆÂØºÂÖ•Â∑•ÂÖ∑ÔºåÁî®Êù•ÂØºÂÖ• mysqldump -T ÂØºÂá∫ÁöÑÊñáÊú¨Êñá‰ª∂„ÄÇ</p>
<p>ËØ≠Ê≥ïÔºömysqlimport [options] db_name textfile1 [textfile2 &hellip;]</p>
<p>‚Äã			source /root/xxxx.sql</p>
<pre><code class="language-shell">source /root/test.sql
mysqlimport -uroot -p1234 test /tmp/city.txt


</code></pre>
<h1 id="ËøêÁª¥ÁØá">ËøêÁª¥ÁØá</h1>
<h2 id="Êó•Âøó">Êó•Âøó</h2>
<h3 id="ÈîôËØØÊó•Âøó">ÈîôËØØÊó•Âøó</h3>
<p>ÈîôËØØÊó•ÂøóËÆ∞ÂΩï‰∫Ü mysqld ÂêØÂä®ÂíåÂÅúÊ≠¢Êó∂Ôºå‰ª•ÂèäÂú®ËøêË°åËøáÁ®ã‰∏≠ÂèëÁîü‰ªª‰ΩïÈîôËØØÊó∂ÁöÑÁõ∏ÂÖ≥‰ø°ÊÅØ„ÄÇËØ•Êó•ÂøóÈªòËÆ§ÂºÄÂêØÔºåÂ≠òÊîæÁõÆÂΩï‰∏∫ <code>/var/log/</code>ÔºåÈªòËÆ§Êó•ÂøóÊñá‰ª∂Âêç<code>mysqld.log</code>„ÄÇ</p>
<pre><code class="language-mysql"># Êü•ÁúãÊó•ÂøóÊñá‰ª∂Âú∞ÂùÄ
SHOW VARIABLES LIKE '%log_error%';


</code></pre>
<h3 id="‰∫åËøõÂà∂Êó•Âøó">‰∫åËøõÂà∂Êó•Âøó</h3>
<p>‰∫åËøõÂà∂Êó•ÂøóÔºàBINLOGÔºâËÆ∞ÂΩï‰∫ÜÊâÄÊúâ DDL Âíå DML ËØ≠Âè•Ôºå‰ΩÜ‰∏çÂåÖÂê´ DQL ËØ≠Âè•„ÄÇ</p>
<p>‰ΩúÁî®ÔºöÁÅæÈöæÊó∂ÁöÑÊï∞ÊçÆÊÅ¢Â§çÔºõMySQL ‰∏ª‰ªéÂ§çÂà∂</p>
<pre><code class="language-mysql"># Êü•ÁúãÊó•ÂøóÊñá‰ª∂Âú∞ÂùÄ
SHOW VARIABLES LIKE '%log_bin';


</code></pre>
<p>MySQL Êèê‰æõ‰∫ÜÂ§öÁßçÊ†ºÂºèÊù•ËÆ∞ÂΩï‰∫åËøõÂà∂Êó•ÂøóÔºö</p>
<ul>
<li>STATEMENT - Âü∫‰∫é SQL ËØ≠Âè•ÁöÑÊó•ÂøóËÆ∞ÂΩïÔºåËÆ∞ÂΩïÁöÑÊòØ SQL ËØ≠Âè•ÔºåÂØπÊï∞ÊçÆËøõË°å‰øÆÊîπÁöÑ SQL ÈÉΩ‰ºöËÆ∞ÂΩïÂú®Êó•ÂøóÊñá‰ª∂‰∏≠„ÄÇ</li>
<li>ROW - Âü∫‰∫éË°åÁöÑÊó•ÂøóËÆ∞ÂΩïÔºåËÆ∞ÂΩïÁöÑÊòØÊØè‰∏ÄË°åÁöÑÊï∞ÊçÆ„ÄÇ</li>
<li>MIXED - Ê∑∑Âêà‰∫Ü STATEMENT Âíå ROW ‰∏§ÁßçÊ†ºÂºèÔºåÈªòËÆ§ÈááÁî® STATEMENTÔºåÂú®Êüê‰∫õÁâπÊÆäÊÉÖÂÜµ‰∏ã‰ºöËá™Âä®ÂàáÊç¢‰∏∫ ROW ËøõË°åËÆ∞ÂΩï„ÄÇ</li>
</ul>
<pre><code class="language-mysql"># Êü•ÁúãÊ†ºÂºè
SHOW VARIABLES LIKE '%binlog_format%';


</code></pre>
<p>Êó•ÂøóÂà†Èô§ÊñπÂºèÔºö</p>
<ul>
<li>reset master	Âà†Èô§ÂÖ®ÈÉ® binlog Êó•ÂøóÔºåÂà†Èô§ÂêéÔºåÊó•ÂøóÁºñÂè∑ÔºåÂ∞Ü‰ªé binlog.000001 ÈáçÊñ∞ÂºÄÂßã</li>
<li>purge master logs to &lsquo;binlog.xxxxxx&rsquo;    Âà†Èô§ xxxxxx ÁºñÂè∑‰πãÂâçÁöÑÊâÄÊúâÊó•Âøó</li>
<li>purge master logs before &lsquo;yyyy-mm-dd hh24:mi:ss&rsquo;    Âà†Èô§Êó•Âøó‰∏∫ &lsquo;yyyy-mm-dd hh24:mi:ss&rsquo; ‰πãÂâç‰∫ßÁîüÁöÑÊâÄÊúâÊó•Âøó</li>
</ul>
<p>ÂèØ‰ª•Âú® MySQL ÈÖçÁΩÆÊñá‰ª∂ /etc/my.cnf ‰∏≠ÈÖçÁΩÆ‰∫åËøõÂà∂Êó•ÂøóÔºö</p>
<pre><code class="language-mysql">SHOW VARIABLES LIKE '%binlog_expire_logs_seconds%';


</code></pre>
<h3 id="Êü•ËØ¢Êó•Âøó">Êü•ËØ¢Êó•Âøó</h3>
<p>Êü•ËØ¢Êó•ÂøóËÆ∞ÂΩï‰∫ÜÂÆ¢Êà∑Á´ØÊâÄÊúâÊìç‰ΩúËØ≠Âè•ÔºåËÄå‰∫åËøõÂà∂Êó•Âøó‰∏çÂåÖÂê´Êï∞ÊçÆÁöÑ SQL ËØ≠Âè•„ÄÇÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºåÊü•ËØ¢Êó•ÂøóÊòØÊú™ÂºÄÂêØÁöÑ„ÄÇÂ¶ÇÊûúÈúÄË¶ÅÂºÄÂêØÊü•ËØ¢Êó•ÂøóÔºåÂèØ‰ª•ËÆæÁΩÆÈÖçÁΩÆÔºö</p>
<pre><code class="language-mysql"># Êü•ËØ¢ general_log ÊòØÂê¶ÂºÄÂêØ
SHOW VARIABLES LIKE '%general%';

# Âú®ÈÖçÁΩÆ‰∏≠ÂºÄÂêØÊü•ËØ¢Êó•Âøó
general_log = 1

# ËÆæÁΩÆÊñá‰ª∂ÂêçÈªòËÆ§‰∏∫ host_name.log
general_log_file = mysql_query.log


</code></pre>
<h3 id="ÊÖ¢Êü•ËØ¢Êó•Âøó">ÊÖ¢Êü•ËØ¢Êó•Âøó</h3>
<p>ÊÖ¢Êü•ËØ¢Êó•ÂøóËÆ∞ÂΩï‰∫ÜÊâÄÊúâÊâßË°åÊó∂Èó¥Ë∂ÖËøáÂèÇÊï∞ long_query_time ËÆæÁΩÆÂÄºÂπ∂‰∏îÊâ´ÊèèËÆ∞ÂΩï‰∏çÂ∞è‰∫é min_examined_row_limit ÁöÑÊâÄÊúâ SQL ËØ≠Âè•Êó•ÂøóÔºåÈªòËÆ§Êú™ÂºÄÂêØ„ÄÇlong_query_time ÈªòËÆ§‰∏∫ 10 ÁßíÔºåÊúÄÂ∞è‰∏∫ 0ÔºåÁ≤æÂ∫¶ÂèØÂà∞ÂæÆÁßí„ÄÇ</p>
<pre><code class="language-mysql"># ÊÖ¢Êü•ËØ¢Êó•Âøó
slow_query_log = 1

# ÊâßË°åÊó∂Èó¥ÂèÇÊï∞
long_query_time = 2


</code></pre>
<p>ÈªòËÆ§ÊÉÖÂÜµ‰∏ãÔºå‰∏ç‰ºöËÆ∞ÂΩïÁÆ°ÁêÜËØ≠Âè•Ôºå‰πü‰∏ç‰ºöËÆ∞ÂΩï‰∏ç‰ΩøÁî®Á¥¢ÂºïËøõË°åÊü•ÊâæÁöÑÊü•ËØ¢„ÄÇÂèØ‰ª•‰ΩøÁî® log_slow_admin_statements ÂíåÊõ¥ÊîπÊ≠§Ë°å‰∏∫ log_queries_not_using_indexes„ÄÇ</p>
<pre><code class="language-mysql"># ËÆ∞ÂΩïÊâßË°åËæÉÊÖ¢ÁöÑÁÆ°ÁêÜËØ≠Âè•
log_slow_admin_statements = 1

# ËÆ∞ÂΩïÊâßË°åËæÉÊÖ¢ÁöÑÊú™‰ΩøÁî®Á¥¢ÂºïÁöÑËØ≠Âè•
log_queries_not_using_indexs = 1


</code></pre>
<h2 id="‰∏ª‰ªéÂ§çÂà∂">‰∏ª‰ªéÂ§çÂà∂</h2>
<h3 id="Ê¶ÇËø∞">Ê¶ÇËø∞</h3>
<p>‰∏ª‰ªéÂ§çÂà∂Â∞±ÊòØÂ∞ÜÊï∞ÊçÆÂ∫ìÁöÑ DDL Âíå DML Êìç‰ΩúÈÄöËøá‰∫åËøõÂà∂Êó•Âøó‰º†Âà∞‰ªéÂ∫ìÊúçÂä°Âô®‰∏≠ÔºåÁÑ∂ÂêéÂú®‰ªéÂ∫ì‰∏äÂØπËøô‰∫õÊó•ÂøóÈáçÊñ∞ÊâßË°åÔºà‰πüÂè´ÈáçÂÅöÔºâÔºå‰ªéËÄå‰ΩøÂæó‰ªéÂ∫ìÂíå‰∏ªÂ∫ìÁöÑÊï∞ÊçÆ‰øùÊåÅÂêåÊ≠•„ÄÇ</p>
<p>MySQL ÊîØÊåÅ‰∏ÄÂè∞‰∏ªÂ∫ìÂêåÊó∂ÂêëÂ§öÂè∞‰ªéÂ∫ìËøõË°åÂ§çÂà∂Ôºå‰ªéÂ∫ìÂêåÊó∂‰πüÂèØ‰ª•‰Ωú‰∏∫ÂÖ∂‰ªñ‰ªéÊúçÂä°Âô®ÁöÑ‰∏ªÂ∫ìÔºåÂÆûÁé∞ÈìæÁä∂Â§çÂà∂„ÄÇ</p>
<ul>
<li>1.‰∏ªÂ∫ìÂá∫Áé∞ÈóÆÈ¢òÔºåÂèØ‰ª•Âø´ÈÄüÂàáÊç¢Âà∞‰ªéÂ∫ìÊèê‰æõÊúçÂä°„ÄÇ</li>
<li>2.ÂÆûÁé∞ËØªÂÜôÂàÜÁ¶ªÔºåÈôç‰Ωé‰∏ªÂ∫ìÁöÑËÆøÈóÆÂéãÂäõ„ÄÇ</li>
<li>3.ÂèØ‰ª•Âú®‰ªéÂ∫ì‰∏≠ÊâßË°åÂ§á‰ªΩÔºå‰ª•ÈÅøÂÖçÂ§á‰ªΩÊúüÈó¥ÂΩ±Âìç‰∏ªÂ∫ìÊúçÂä°„ÄÇ</li>
</ul>
<h3 id="ÂéüÁêÜ">ÂéüÁêÜ</h3>
<p>1„ÄÅMaster ‰∏ªÂ∫ìÊèê‰∫§‰∫ãÂä°Êó∂Ôºå‰ºöÂ∞ÜÊï∞ÊçÆÂèòÊõ¥ËÆ∞ÂΩïÂú®‰∫åËøõÂà∂Êó•ÂøóÊñá‰ª∂ Binlog ‰∏≠„ÄÇ</p>
<p>2„ÄÅ‰ªéÂ∫ìËØªÂèñ‰∏ªÂ∫ìÁöÑ‰∫åËøõÂà∂Êñá‰ª∂ Binlog ÔºåÂÜôÂÖ•Âà∞‰ªéÂ∫ìÁöÑ‰∏≠ÁªßÊó•Âøó Replay Log„ÄÇ</p>
<p>3„ÄÅslave ÈáçÂÅö‰∏≠ÁªßÊó•Âøó‰∏≠ÁöÑ‰∫ã‰ª∂ÔºåÂ∞ÜÊîπÂèòÂèçÊò†ÂÆÉËá™Â∑±ÁöÑÊï∞ÊçÆ„ÄÇ</p>
<h3 id="Êê≠Âª∫">Êê≠Âª∫</h3>
<p>ÊúçÂä°Âô®ÂáÜÂ§áÔºö</p>
<p>192.168.200.200ÔºàmasterÔºâ</p>
<p>192.168.200.201ÔºàslaveÔºâ</p>
<pre><code class="language-shell"># ÂºÄÊîæÊåáÂÆö 3306 Á´ØÂè£Âè∑
firewall-cmd --zone=public --add-port=3306/tcp -permanent
firewall-cmd -reload

# ÂÖ≥Èó≠ÊúçÂä°Âô®Èò≤ÁÅ´Â¢ô
systemctl stop firewalld
systemctl diable firewalld


</code></pre>
<p>‰∏ªÂ∫ìÈÖçÁΩÆÔºö</p>
<p>1„ÄÅ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ /etc/my.cnf</p>
<pre><code class="language-mysql"># mysql ÊúçÂä°Âô® IDÔºåÁ°Æ‰øùÈõÜÁæ§‰∏≠ÂîØ‰∏Ä
server-id = 1

# ÊòØÂê¶Âè™ËØªÔºå1 ‰ª£Ë°®Âè™ËØªÔºå0‰ª£Ë°®ËØªÂÜô
read-only = 0

# ÂøΩÁï•ÁöÑÊï∞ÊçÆÔºåÊåá‰∏çÈúÄË¶ÅÂêåÊ≠•ÁöÑÊï∞ÊçÆÂ∫ì
# binlog-ignore-db = mysql

# ÊåáÂÆöÂêåÊ≠•ÁöÑÊï∞ÊçÆÂ∫ì
# binlog-do-db = db01


</code></pre>
<p>2„ÄÅÈáçÂêØ MySQL ÊúçÂä°Âô®</p>
<pre><code class="language-shell">systemctl restart mysqld


</code></pre>
<p>3„ÄÅÁôªÂΩï MySQLÔºåÂàõÂª∫ËøúÁ®ãËøûÊé•Ë¥¶Âè∑ÔºåÂπ∂Êéà‰∫à‰∏ª‰ªéÂ§çÂà∂ÊùÉÈôê</p>
<pre><code class="language-mysql"># ÂàõÂª∫Áî®Êà∑
CREATE USER 'master'@'%' IDENTIFIED WITH mysql_native_password BY 'root@123456';

# ÂàÜÈÖç‰∏ª‰ªéÂ§çÂà∂ÊùÉÈôê
GRANT REPLICATION SLAVE ON *.* TO 'master'@'%'


</code></pre>
<p>4„ÄÅÊü•Áúã‰∫åËøõÂà∂Êó•ÂøóÂùêÊ†á</p>
<pre><code class="language-mysql">/*
	file ‰ªéÂì™‰∏™Êó•ÂøóÊñá‰ª∂ÂºÄÂßãÊé®ÈÄÅ
	postions ‰ªéÂì™‰∏™‰ΩçÁΩÆÂºÄÂßãÊé®ÈÄÅ
	binlog_ignore_db ÊåáÂÆö‰∏çÈúÄË¶ÅÂêåÊ≠•ÁöÑÊï∞ÊçÆÂ∫ì
*/
SHOW MASTER STATUS;


</code></pre>
<p>‰ªéÂ∫ìÈÖçÁΩÆÔºö</p>
<p>1„ÄÅ‰øÆÊîπÈÖçÁΩÆÊñá‰ª∂ /etc/my.cnf</p>
<pre><code class="language-mysql"># ËÆæÁΩÆÊúçÂä°Âô® ID
server-id = 2

# ÊòØÂê¶Âè™ËØª
read-only = 1


</code></pre>
<p>2„ÄÅÈáçÂêØ MySQL</p>
<pre><code class="language-shell">systemctl mysql restart


</code></pre>
<p>3„ÄÅÁôªÂΩï MySQLÔºåËÆæÁΩÆ‰∏ªÂ∫ìÈÖçÁΩÆ</p>
<pre><code class="language-mysql">CHANGE REPLICATION SOURCE TO SOURCE_HOST='xxx.xxx',SOURCE_USER='xxx',SOURCE_PASSWORD='xxx',SOURCE_LOG_FILE='xxx',SOURCE_LOG_POS=xxx;


</code></pre>
<p>4„ÄÅÂºÄÂêØÂêåÊ≠•Êìç‰Ωú</p>
<pre><code class="language-mysql">START REPLICA;


</code></pre>
<p>5„ÄÅÊü•Áúã‰∏ª‰ªéÂêåÊ≠•Áä∂ÊÄÅ</p>
<pre><code class="language-mysql">SHOW REPLICA STATUS;


</code></pre>
<p>‚Äã</p>

</section>


    <footer class="article-footer">
    
    <section class="article-tags">
        
            <a href="/tags/mysql/">MySQL</a>
        
            <a href="/tags/note/">Note</a>
        
    </section>


    
    <section class="article-copyright">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-copyright" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="12" cy="12" r="9" />
  <path d="M14.5 9a3.5 4 0 1 0 0 6" />
</svg>



        <span>Licensed under CC BY-NC-SA 4.0</span>
    </section>
    </footer>


    
        <link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css"integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn"crossorigin="anonymous"
            ><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js"integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8"crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js"integrity="sha384-vZTG03m&#43;2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl"crossorigin="anonymous"
                defer
                >
            </script><script>
    window.addEventListener("DOMContentLoaded", () => {
        renderMathInElement(document.querySelector(`.article-content`), {
            delimiters: [
                { left: "$$", right: "$$", display: true },
                { left: "$", right: "$", display: false },
                { left: "\\(", right: "\\)", display: false },
                { left: "\\[", right: "\\]", display: true }
            ]
        });})
</script>
    
</article>

    <aside class="related-contents--wrapper">
    
    
</aside>

     
     
        
    

    <footer class="site-footer">
  


    

    

    

    

    

    


<script>
(function(u, c) {
  var d = document, t = 'script', o = d.createElement(t),
      s = d.getElementsByTagName(t)[0];
  o.src = u;
  if (c) { o.addEventListener('load', function(e) { c(e); }); }
  s.parentNode.insertBefore(o, s);
})('//cdn.bootcss.com/pangu/3.3.0/pangu.min.js', function() {
  pangu.spacingPage();
});
</script>

    <section class="copyright">
        &copy; 
        
        2024 <a href="https://stack-theme-mod.vercel.app/">Example Site</a>¬∑<i class="fas fa-bell"></i> <a id="days">0</a>Days<br>
      ÂÖ±‰π¶ÂÜô‰∫Ü17.5kÂ≠ó¬∑ÂÖ± 1ÁØáÊñáÁ´†</br><span><p>
    </section>
    
    <section class="powerby">
        Built with <a href="https://gohugo.io/" target="_blank" rel="noopener">Hugo</a> <br />
        Theme <b><a href="https://github.com/CaiJimmy/hugo-theme-stack" target="_blank" rel="noopener" data-version="3.2.0">Stack</a></b> designed by <a href="https://jimmycai.com" target="_blank" rel="noopener">Jimmy</a><br />
         <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank">¬© Licensed Under CC BY-NC-SA 4.0</a>
    </section>

<script>
var s1 = '2022-02-12';
s1 = new Date(s1.replace(/-/g, "/"));
s2 = new Date();
var days = s2.getTime() - s1.getTime();
var number_of_days = parseInt(days / (1000 * 60 * 60 * 24));
document.getElementById('days').innerHTML = number_of_days;
</script>
    
</footer>



    
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    
    <div class="pswp__bg"></div>

    
    <div class="pswp__scroll-wrap">

        
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                
                
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"integrity="sha256-ePwmChbbvXbsO02lbM3HoHbSHTHFAeChekF1xKJdleo="crossorigin="anonymous"
                defer
                >
            </script><script 
                src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"integrity="sha256-UKkzOn/w1mBxRmLLGrSeyB4e1xbrp4xylgAWb3M42pU="crossorigin="anonymous"
                defer
                >
            </script><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.css"integrity="sha256-c0uckgykQ9v5k&#43;IqViZOZKc47Jn7KQil4/MP3ySA3F8="crossorigin="anonymous"
            ><link 
                rel="stylesheet" 
                href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.css"integrity="sha256-SBLU4vv6CA6lHsZ1XyTdhyjJxCjPif/TRkjnsyGAGnE="crossorigin="anonymous"
            >

            </main>
    
    
    
    <aside class="sidebar right-sidebar sticky">
        
            <form action="/search/" class="search-form widget" >
        <p>
            <label>Search</label>
            <input name="keyword" required placeholder="Type something..." />
        
            <button title="Search">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-search" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <circle cx="10" cy="10" r="7" />
  <line x1="21" y1="21" x2="15" y2="15" />
</svg>



            </button>
        </p>
    </form>
        
            
    <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-hash" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <line x1="5" y1="9" x2="19" y2="9" />
  <line x1="5" y1="15" x2="19" y2="15" />
  <line x1="11" y1="4" x2="7" y2="20" />
  <line x1="17" y1="4" x2="13" y2="20" />
</svg>



        </div>
        <h2 class="widget-title section-title">Table of contents</h2>
        
        <div class="widget--toc">
            <nav id="TableOfContents">
  <ol>
    <li><a href="#mysqlÊ¶ÇËø∞">MySQLÊ¶ÇËø∞</a>
      <ol>
        <li><a href="#Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ">Êï∞ÊçÆÂ∫ìÁõ∏ÂÖ≥Ê¶ÇÂøµ</a></li>
        <li><a href="#mysql-Êï∞ÊçÆÂ∫ì">MySQL Êï∞ÊçÆÂ∫ì</a></li>
      </ol>
    </li>
    <li><a href="#sql">SQL</a>
      <ol>
        <li><a href="#sql-ÈÄöÁî®ËØ≠Ê≥ï">SQL ÈÄöÁî®ËØ≠Ê≥ï</a></li>
        <li><a href="#sql-ÂàÜÁ±ª">SQL ÂàÜÁ±ª</a></li>
        <li><a href="#Êï∞ÊçÆÁ±ªÂûã">Êï∞ÊçÆÁ±ªÂûã</a></li>
        <li><a href="#ddl">DDL</a></li>
        <li><a href="#dml">DML</a></li>
        <li><a href="#dql">DQL</a></li>
        <li><a href="#dcl">DCL</a></li>
      </ol>
    </li>
    <li><a href="#ÂáΩÊï∞">ÂáΩÊï∞</a>
      <ol>
        <li><a href="#Â≠óÁ¨¶‰∏≤ÂáΩÊï∞">Â≠óÁ¨¶‰∏≤ÂáΩÊï∞</a></li>
        <li><a href="#Êï∞ÂÄºÂáΩÊï∞">Êï∞ÂÄºÂáΩÊï∞</a></li>
        <li><a href="#Êó•ÊúüÂáΩÊï∞">Êó•ÊúüÂáΩÊï∞</a></li>
        <li><a href="#ÊµÅÁ®ãÂáΩÊï∞">ÊµÅÁ®ãÂáΩÊï∞</a></li>
      </ol>
    </li>
    <li><a href="#Á∫¶Êùü">Á∫¶Êùü</a>
      <ol>
        <li><a href="#Â∏∏ËßÅÁ∫¶Êùü">Â∏∏ËßÅÁ∫¶Êùü</a></li>
        <li><a href="#Â§ñÈîÆÁ∫¶Êùü">Â§ñÈîÆÁ∫¶Êùü</a></li>
      </ol>
    </li>
    <li><a href="#Â§öË°®Êü•ËØ¢">Â§öË°®Êü•ËØ¢</a>
      <ol>
        <li><a href="#Â§öË°®ÂÖ≥Á≥ª">Â§öË°®ÂÖ≥Á≥ª</a></li>
        <li><a href="#Â§öË°®Êü•ËØ¢Ê¶ÇËø∞">Â§öË°®Êü•ËØ¢Ê¶ÇËø∞</a></li>
        <li><a href="#ÂÜÖËøûÊé•">ÂÜÖËøûÊé•</a></li>
        <li><a href="#Â§ñËøûÊé•">Â§ñËøûÊé•</a></li>
        <li><a href="#Ëá™ËøûÊé•">Ëá™ËøûÊé•</a></li>
        <li><a href="#ËÅîÂêàÊü•ËØ¢">ËÅîÂêàÊü•ËØ¢</a></li>
        <li><a href="#Â≠êÊü•ËØ¢">Â≠êÊü•ËØ¢</a></li>
      </ol>
    </li>
    <li><a href="#‰∫ãÂä°">‰∫ãÂä°</a>
      <ol>
        <li><a href="#‰∫ãÂä°Êìç‰Ωú">‰∫ãÂä°Êìç‰Ωú</a></li>
        <li><a href="#‰∫ãÂä°ÁâπÊÄß">‰∫ãÂä°ÁâπÊÄß</a></li>
        <li><a href="#Âπ∂Âèë‰∫ãÂä°">Âπ∂Âèë‰∫ãÂä°</a></li>
        <li><a href="#‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´">‰∫ãÂä°ÈöîÁ¶ªÁ∫ßÂà´</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#linux-mysql-‰ΩøÁî®">Linux MySQL ‰ΩøÁî®</a>
      <ol>
        <li><a href="#mysql-ÊúçÂä°">MySQL ÊúçÂä°</a></li>
        <li><a href="#Êü•ËØ¢Ëá™Âä®ÁîüÊàêÁöÑ-root-ÂØÜÁ†Å">Êü•ËØ¢Ëá™Âä®ÁîüÊàêÁöÑ root ÂØÜÁ†Å</a></li>
        <li><a href="#‰øÆÊîπ-root-ÂØÜÁ†Å">‰øÆÊîπ root ÂØÜÁ†Å</a></li>
        <li><a href="#ÂàõÂª∫Áî®Êà∑">ÂàõÂª∫Áî®Êà∑</a></li>
        <li><a href="#ÂàÜÈÖçÊâÄÊúâÊùÉÈôê">ÂàÜÈÖçÊâÄÊúâÊùÉÈôê</a></li>
      </ol>
    </li>
    <li><a href="#Â≠òÂÇ®ÂºïÊìé">Â≠òÂÇ®ÂºïÊìé</a>
      <ol>
        <li><a href="#mysql-‰ΩìÁ≥ªÁªìÊûÑ">MySQL ‰ΩìÁ≥ªÁªìÊûÑ</a></li>
        <li><a href="#Â≠òÂÇ®ÂºïÊìéÁÆÄ‰ªã">Â≠òÂÇ®ÂºïÊìéÁÆÄ‰ªã</a></li>
        <li><a href="#Â≠òÂÇ®ÂºïÊìéÁâπÁÇπ">Â≠òÂÇ®ÂºïÊìéÁâπÁÇπ</a></li>
        <li><a href="#Â≠òÂÇ®ÂºïÊìéÈÄâÊã©">Â≠òÂÇ®ÂºïÊìéÈÄâÊã©</a></li>
      </ol>
    </li>
    <li><a href="#Á¥¢Âºï">Á¥¢Âºï</a>
      <ol>
        <li><a href="#Á¥¢ÂºïÊ¶ÇËø∞">Á¥¢ÂºïÊ¶ÇËø∞</a></li>
        <li><a href="#Á¥¢ÂºïÁªìÊûÑ">Á¥¢ÂºïÁªìÊûÑ</a></li>
        <li><a href="#Á¥¢ÂºïÂàÜÁ±ª">Á¥¢ÂºïÂàÜÁ±ª</a></li>
        <li><a href="#Á¥¢ÂºïËØ≠Ê≥ï">Á¥¢ÂºïËØ≠Ê≥ï</a></li>
        <li><a href="#sql-ÊÄßËÉΩÂàÜÊûê">SQL ÊÄßËÉΩÂàÜÊûê</a></li>
        <li><a href="#Á¥¢Âºï‰ΩøÁî®">Á¥¢Âºï‰ΩøÁî®</a></li>
        <li><a href="#Á¥¢ÂºïËÆæËÆ°ÂéüÂàô">Á¥¢ÂºïËÆæËÆ°ÂéüÂàô</a></li>
      </ol>
    </li>
    <li><a href="#sql-‰ºòÂåñ">SQL ‰ºòÂåñ</a>
      <ol>
        <li><a href="#ÊèíÂÖ•Êï∞ÊçÆ">ÊèíÂÖ•Êï∞ÊçÆ</a></li>
        <li><a href="#‰∏ªÈîÆ‰ºòÂåñ">‰∏ªÈîÆ‰ºòÂåñ</a></li>
        <li><a href="#order-by-‰ºòÂåñ">order by ‰ºòÂåñ</a></li>
        <li><a href="#group-by-‰ºòÂåñ">group by ‰ºòÂåñ</a></li>
        <li><a href="#limit-‰ºòÂåñ">limit ‰ºòÂåñ</a></li>
        <li><a href="#count-‰ºòÂåñ">count ‰ºòÂåñ</a></li>
        <li><a href="#update‰ºòÂåñ">update‰ºòÂåñ</a></li>
      </ol>
    </li>
    <li><a href="#ËßÜÂõæÂ≠òÂÇ®ËøáÁ®ãËß¶ÂèëÂô®">ËßÜÂõæ/Â≠òÂÇ®ËøáÁ®ã/Ëß¶ÂèëÂô®</a>
      <ol>
        <li><a href="#ËßÜÂõæ">ËßÜÂõæ</a></li>
        <li><a href="#Â≠òÂÇ®ËøáÁ®ã">Â≠òÂÇ®ËøáÁ®ã</a></li>
        <li><a href="#Â≠òÂÇ®ÂáΩÊï∞">Â≠òÂÇ®ÂáΩÊï∞</a></li>
        <li><a href="#Ëß¶ÂèëÂô®">Ëß¶ÂèëÂô®</a></li>
      </ol>
    </li>
    <li><a href="#ÈîÅ">ÈîÅ</a>
      <ol>
        <li><a href="#ÂÖ®Â±ÄÈîÅ">ÂÖ®Â±ÄÈîÅ</a></li>
        <li><a href="#Ë°®Á∫ßÈîÅ">Ë°®Á∫ßÈîÅ</a></li>
        <li><a href="#Ë°åÁ∫ßÈîÅ">Ë°åÁ∫ßÈîÅ</a></li>
      </ol>
    </li>
    <li><a href="#innodb-ÂºïÊìé">InnoDB ÂºïÊìé</a>
      <ol>
        <li><a href="#ÈÄªËæëÂ≠òÂÇ®ÁªìÊûÑ">ÈÄªËæëÂ≠òÂÇ®ÁªìÊûÑ</a></li>
        <li><a href="#Êû∂ÊûÑ">Êû∂ÊûÑ</a></li>
        <li><a href="#‰∫ãÂä°ÂéüÁêÜ">‰∫ãÂä°ÂéüÁêÜ</a></li>
        <li><a href="#mvcc">MVCC</a></li>
      </ol>
    </li>
    <li><a href="#mysql-ÁÆ°ÁêÜ">MySQL ÁÆ°ÁêÜ</a>
      <ol>
        <li><a href="#Á≥ªÁªüÊï∞ÊçÆÂ∫ì">Á≥ªÁªüÊï∞ÊçÆÂ∫ì</a></li>
        <li><a href="#Â∏∏Áî®Â∑•ÂÖ∑">Â∏∏Áî®Â∑•ÂÖ∑</a></li>
      </ol>
    </li>
  </ol>

  <ol>
    <li><a href="#Êó•Âøó">Êó•Âøó</a>
      <ol>
        <li><a href="#ÈîôËØØÊó•Âøó">ÈîôËØØÊó•Âøó</a></li>
        <li><a href="#‰∫åËøõÂà∂Êó•Âøó">‰∫åËøõÂà∂Êó•Âøó</a></li>
        <li><a href="#Êü•ËØ¢Êó•Âøó">Êü•ËØ¢Êó•Âøó</a></li>
        <li><a href="#ÊÖ¢Êü•ËØ¢Êó•Âøó">ÊÖ¢Êü•ËØ¢Êó•Âøó</a></li>
      </ol>
    </li>
    <li><a href="#‰∏ª‰ªéÂ§çÂà∂">‰∏ª‰ªéÂ§çÂà∂</a>
      <ol>
        <li><a href="#Ê¶ÇËø∞">Ê¶ÇËø∞</a></li>
        <li><a href="#ÂéüÁêÜ">ÂéüÁêÜ</a></li>
        <li><a href="#Êê≠Âª∫">Êê≠Âª∫</a></li>
      </ol>
    </li>
  </ol>
</nav>
        </div>
    </section>

        
            <section class="widget categories">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>


  
        </div> 
        <h2 class="widget-title section-title">Categories</h2>
    <div class="widget-categories--list">
<div class="widget">
    <h3 class="widget-title"> </h3>
    <div class="widget-body">
        <div class="category-list">
            <div class="category-list-item"><a href="https://yikuanzz.github.io/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/" class="category-list-link">Êï∞ÊçÆÂ∫ì<span class="category-list-count">1</a>
            </span></div>
        </div>
    </div>
</div>
    </div>
    </section>
        
            <section class="widget archives">
        <div class="widget-icon">
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-infinity" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M9.828 9.172a4 4 0 1 0 0 5.656 a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828 a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828" />
</svg>



        </div>
        <h2 class="widget-title section-title">Archives</h2>

        
        
        
        
        
        <div class="widget-archive--list">
            <div class="archives-year">
                    <a href="/archives/#2024">
                        
                            <span class="year">2024</span>
                            <span class="count">1</span>
                        
                    </a> 
                </div>
            
        </div>
    </section>
        
            <section class="widget tagCloud">
    <div class="widget-icon">
        <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-tag" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
  <path stroke="none" d="M0 0h24v24H0z"/>
  <path d="M11 3L20 12a1.5 1.5 0 0 1 0 2L14 20a1.5 1.5 0 0 1 -2 0L3 11v-4a4 4 0 0 1 4 -4h4" />
  <circle cx="9" cy="9" r="2" />
</svg>



    </div>
    <h2 class="widget-title section-title">Tags</h2>

    <div class="tagCloud-tags">
        
            <a href="/tags/mysql/" class="font_size_1">
                MySQL
            </a>
        
            <a href="/tags/note/" class="font_size_1">
                Note
            </a>
        
    </div>
</section>
        
    </aside>


        </div>
        <script 
                src="https://cdn.jsdelivr.net/npm/node-vibrant@3.1.5/dist/vibrant.min.js"integrity="sha256-5NovOZc4iwiAWTYIFiIM7DxKUXKWvpVEuMEPLzcm5/g="crossorigin="anonymous"
                
                >
            </script><script type="text/javascript" src="/ts/main.js" defer></script>
<script>
    (function () {
        const customFont = document.createElement('link');
        customFont.href = "https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&display=swap";

        customFont.type = "text/css";
        customFont.rel = "stylesheet";

        document.head.appendChild(customFont);
    }());
</script>

    </body>
</html>
